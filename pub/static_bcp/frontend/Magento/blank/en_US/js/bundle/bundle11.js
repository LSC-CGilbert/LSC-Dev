require.config({"config": {
        "jsbuild":{"Amasty_JetTheme/js/components/am-slider.js":"/**\n *   Slick Slider functionality\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'matchMedia',\n    'mage/mage',\n    'amThemeSlick'\n], function ($, _, mediaCheck) {\n    'use strict';\n\n    $.widget('am.slickSlider', {\n        options: {\n            mediaBreakpoint: '(min-width: 768px)',\n            sliderClass: 'amtheme-slick-slider',\n            updateOnResize: false,\n            updateEvent: 'nav.updated',\n            updateClass: 'update-in-progress',\n            slickUpdated: false,\n            isOnMobile: true,\n            responsiveSettings: {},\n            sliderOptions: {},\n            dataset: {\n                jsAttr: 'data-amtheme-js',\n                urlAttr: 'amtheme-action-url'\n            },\n            selectors: {\n                wishlist: '[data-amtheme-js=\"ajax-wishlist\"]',\n                dropdown: '[data-toggle=\"dropdown\"]',\n                splitEl: '.amtheme-split'\n            },\n            delay: 500\n        },\n\n        /**\n         * @private\n         * @returns {void}\n         */\n        _create: function () {\n            this.body = $('body');\n\n            if (this.options.isOnMobile) {\n                this.options.sliderOptions = $.extend(this.options.sliderOptions, this.options.responsiveSettings);\n                this._initSlider();\n            } else {\n                this._initResponsive();\n            }\n        },\n\n        /**\n         * @private\n         * @returns {void}\n         */\n        _destroySlider: function () {\n            if (this.element.hasClass('slick-initialized')) {\n                this.element.slick('unslick');\n            }\n            this.body.off(this.options.updateEvent);\n            this.element.removeClass(this.options.sliderClass);\n        },\n\n        /**\n         * @private\n         * @returns {void}\n         */\n        _initSlider: function () {\n            this.element.slick(this.options.sliderOptions);\n            this.element.addClass(this.options.sliderClass).attr(this.options.dataset.jsAttr, 'slider');\n            if (this.options.updateOnResize) {\n                this._initOnResizeUpdate();\n            }\n        },\n\n        /**\n         * if update for slick slider is enabled it will be refreshed on 'updateEvent'\n         *\n         * @private\n         * @returns {void}\n         */\n        _initOnResizeUpdate: function () {\n            var self = this;\n\n            this.body.on(this.options.updateEvent, function () {\n                self._updateTransitionProcess();\n                _.delay(function () {\n                    self.element[0].slick.refresh();\n                    self._updateTransitionProcess();\n                    self._refreshEvents();\n                }, self.options.delay);\n            });\n        },\n\n        _refreshEvents: function () {\n            var self = this,\n                options = this.options,\n                multiWishlist = this.element.find(options.selectors.wishlist);\n\n            if (multiWishlist.length) {\n                $.each(multiWishlist, function () {\n                    if (self.element.find(options.selectors.dropdown)) {\n                        $(this).closest(options.selectors.splitEl)\n                            .find(options.selectors.dropdown).mage('dropdown', {});\n                    }\n\n                    if ($(this).data(options.dataset.urlAttr)) {\n                        $(this).mage('amAjaxWishlist', {\n                            'actionUrl': $(this).data(options.dataset.urlAttr)\n                        });\n                    }\n                });\n            }\n        },\n\n        /**\n         * @private\n         * @returns {am.slickSlider}\n         */\n        _updateTransitionProcess: function () {\n            // eslint-disable-next-line no-unused-expressions\n            this.options.slickUpdated\n                ? this.element.css('opacity', 1).removeClass(this.options.updateClass)\n                : this.element.css('opacity', 0.4).addClass(this.options.updateClass);\n            this.options.slickUpdated = !this.options.slickUpdated;\n            return this;\n        },\n\n        /**\n         * @private\n         * @returns {void}\n         */\n        _initResponsive: function () {\n            var self = this;\n\n            mediaCheck({\n                media: self.options.mediaBreakpoint,\n                entry: function () {\n                    self._initSlider();\n                },\n                exit: function () {\n                    self._destroySlider();\n                }\n            });\n        }\n    });\n\n    return $.am.slickSlider;\n});\n","Amasty_CustomerAttributes/js/mixin-fix-get-custom-attribute-label.js":"define([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return function (viewComponent) {\n        return viewComponent.extend({\n            /**\n             * fix for m2.3.4 (fixed by Magento in m2.4.0).\n             * Prevent fatal on checkout page\n             */\n            getCustomAttributeLabel: function () {\n                if (_.isUndefined(this.source.get('customAttributes'))) {\n                    this.source.set('customAttributes', {});\n                }\n\n                return this._super();\n            }\n        });\n    };\n});\n","Amasty_CustomerAttributes/js/form/relationAbstract.js":"define([\n    'ko',\n    'underscore',\n    'uiRegistry',\n    'Amasty_CustomerAttributes/js/form/relationRegistry'\n], function (ko, _, registry, relationRegistry) {\n    'use strict';\n\n    /**\n     * @abstract\n     */\n    return {\n        hidedByDepend: false,\n        hidedByRate: false,\n        /**\n         * @param {Object[]} relations\n         * @param {string} relations[].attribute_name - element name of parent attribute\n         * @param {string} relations[].dependent_name - element name of depend attribute\n         * @param {string} relations[].option_value   - value which Parent should have to show Depend\n         */\n        relations: [],\n\n        /**\n         * check attribute dependencies on value change\n         */\n        onUpdate: function () {\n            this._super();\n            // relationRegistry.clear();\n            this.checkDependencies();\n        },\n        /**\n         * run check dependency and clear relations\n         */\n        initCheck: function () {\n            if (this.relations && this.relations.length) {\n                relationRegistry.clear();\n                this.checkDependencies();\n            }\n        },\n        checkDependencies: function () {\n            if (this.relations && this.relations.length) {\n                var fieldset = registry.get(this.parentName);\n                var localRegitry = registry;\n                var localRelationRegistry = relationRegistry;\n                this.relations.map(function (relation) {\n                    var dependElement = fieldset.getChild(relation.dependent_name);\n                    if (!dependElement) {\n                        // get element by full name if in fieldset element is not ready\n                        var elementFullNme = fieldset.name + '.' + relation.dependent_name;\n                        dependElement = localRegitry.get(elementFullNme);\n                    }\n                    if (dependElement) {\n                        dependElement.hidedByDepend = false;\n                        if (!localRelationRegistry.isExist(relation.dependent_name, this.value())) {\n                            if (this.isCanShow(relation, this)) {\n                                this.showDepend(dependElement, relation);\n                            } else {\n                                /** hide element only if no relation rules to show. On one check */\n                                this.hideDepend(dependElement);\n                            }\n                        } else if (this.hidedByDepend === false) {\n                            this.showDepend(dependElement, relation);\n                        } else {\n                            this.hideDepend(dependElement);\n                        }\n                    }\n                }.bind(this));\n            }\n        },\n        /**\n         * Is element value eq relation value\n         *\n         * @param relationToShow\n         * @param field\n         * @returns {boolean}\n         */\n        isCanShow: function (relationToShow, field) {\n            var result = true;\n\n            if (result && field.relations != void (0) && field.relations.length) {\n                field.relations.map(function (relation) {\n                    // search for all parent attributes of current relation\n                    if (relation.dependent_name == relationToShow.dependent_name) {\n                        result = !!(field.elementCheck(relation));\n                    }\n                });\n            }\n\n            return result;\n        },\n        elementCheck: function (relation) {\n            return (this.value() == relation.option_value && this.visible());\n        },\n        showDepend: function (dependElement, relation) {\n            if (dependElement.hidedByDepend && dependElement.hidedByDepend != this.index) {\n                return;\n            }\n            dependElement.hidedByDepend = false;\n            if (dependElement.hidedByRate) {\n                return false;\n            }\n            dependElement.show();\n            relationRegistry.add(relation.dependent_name, relation.option_value);\n            if (_.isFunction(dependElement.checkDependencies)) {\n                dependElement.checkDependencies();\n            }\n        },\n        hideDepend: function (dependElement) {\n            dependElement.hidedByDepend = this.index;\n            dependElement.hide();\n            if (_.isFunction(dependElement.checkDependencies)) {\n                dependElement.checkDependencies();\n            }\n        }\n    };\n});\n","Amasty_CustomerAttributes/js/form/relationRegistry.js":"define([\n    'ko'\n], function (ko) {\n    'use strict';\n\n    /**\n     * @abstract\n     */\n    return {\n        dependsToShow: [],\n        clear: function () {\n            this.dependsToShow = [];\n        },\n        add: function (relationName, optionValue) {\n            var result = false;\n            jQuery.each(this.dependsToShow, function(index, value) {\n                if (value[0] === relationName && value[1] === optionValue) {\n                    result = true;\n                }\n            });\n\n            if (result === false) {\n                this.dependsToShow.push([relationName, optionValue]);\n            }\n        },\n        get: function () {\n            return this.dependsToShow;\n        },\n        isExist: function (relationName, optionValue) {\n            var result = false;\n            jQuery.each(this.dependsToShow, function(index, value) {\n                if (value[0] === relationName && value[1] === optionValue) {\n                    result = true;\n                    return false;\n                }\n            });\n\n            return result;\n        }\n    };\n});","Amasty_CustomerAttributes/js/form/element/checkboxes.js":"/**\n * @author Amasty Team\n * @copyright Copyright (c) 2016 Amasty (http://www.amasty.com)\n * @package Amasty_CustomerAttributes\n */\n\ndefine([\n    'ko',\n    'underscore',\n    'uiRegistry',\n    'mageUtils',\n    'Magento_Ui/js/form/element/abstract',\n    'Amasty_CustomerAttributes/js/form/relationAbstract'\n], function (ko, _, registry, utils, Abstract, relationAbstract) {\n    'use strict';\n\n    return Abstract.extend(relationAbstract).extend({\n\n        /**\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\n         *     properties, calls 'setOptions' passing options to it\n         *\n         * @returns {Object} Chainable.\n         */\n        initObservable: function () {\n            var defaultValue = this.value;\n            this._super();\n            var value = this.value;\n            this.value = ko.observableArray([]).extend(value);\n            this.value(this.normalizeData(defaultValue));\n            return this;\n        },\n\n        /**\n         * Splits incoming string value.\n         *\n         * @returns {Array}\n         */\n        normalizeData: function (value) {\n            if (utils.isEmpty(value)) {\n                value = [];\n            }\n\n            return _.isString(value) ? value.split(',') : value;\n        },\n\n        /**\n         * Defines if value has changed\n         *\n         * @returns {Boolean}\n         */\n        hasChanged       : function () {\n            var value = this.value(),\n                initial = this.initialValue;\n\n            return !utils.equalArrays(value, initial);\n        },\n        elementCheck: function(relation) {\n            return (this.value().indexOf(relation.option_value) >= 0 && this.visible());\n        }\n    });\n});\n","Amasty_CustomerAttributes/js/form/element/date.js":"/**\n * @author Amasty Team\n * @copyright Copyright (c) 2016 Amasty (http://www.amasty.com)\n * @package Amasty_CustomerAttributes\n */\n\ndefine([\n    'ko',\n    'underscore',\n    'mageUtils',\n    'Magento_Ui/js/form/element/date',\n    'Amasty_CustomerAttributes/js/form/relationAbstract'\n], function (ko, _, utils, Date, relationAbstract) {\n    'use strict';\n\n    return Date.extend(relationAbstract).extend({\n\n        /**\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\n         *     properties, calls 'setOptions' passing options to it\n         *\n         * @returns {Object} Chainable.\n         */\n        initObservable: function () {\n            this._super();\n            return this;\n        }\n\n    });\n});\n","Amasty_CustomerAttributes/js/form/element/multiselect.js":"\ndefine([\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/multiselect',\n    'Amasty_CustomerAttributes/js/form/relationAbstract'\n], function (_, registry, Multiselect, relationAbstract) {\n    'use strict';\n\n    return Multiselect.extend(relationAbstract).extend({\n    });\n});\n","Amasty_CustomerAttributes/js/form/element/textarea.js":"/**\n * @author Amasty Team\n * @copyright Copyright (c) 2016 Amasty (http://www.amasty.com)\n * @package Amasty_CustomerAttributes\n */\n\ndefine([\n    'ko',\n    'underscore',\n    'mageUtils',\n    'Magento_Ui/js/form/element/textarea',\n    'Amasty_CustomerAttributes/js/form/relationAbstract'\n], function (ko, _, utils, TextArea, relationAbstract) {\n    'use strict';\n\n    return TextArea.extend(relationAbstract).extend({\n\n        /**\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\n         *     properties, calls 'setOptions' passing options to it\n         *\n         * @returns {Object} Chainable.\n         */\n        initObservable: function () {\n            this._super();\n            return this;\n        }\n\n    });\n});\n","Amasty_CustomerAttributes/js/form/element/file.js":"/**\n * @author Amasty Team\n * @copyright Copyright (c) 2016 Amasty (http://www.amasty.com)\n * @package Amasty_CustomerAttributes\n */\n\ndefine([\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/media'\n], function (_, registry, Media) {\n    'use strict';\n\n    return Media.extend({\n        defaults: {\n            elementTmpl: 'Amasty_CustomerAttributes/form/element/media',\n            links: {\n                value: '${ $.provider }:${ $.dataScope }'\n            }\n        },\n\n        initialize: function () {\n            this._super();\n            if (this.value()) {\n                this.value(this.path + this.value());\n            }\n\n            return this;\n        }\n\n    });\n});\n","Amasty_CustomerAttributes/js/form/element/select.js":"/**\n * @author Amasty Team\n * @copyright Copyright (c) 2016 Amasty (http://www.amasty.com)\n * @package Amasty_CustomerAttributes\n */\n\ndefine([\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/select',\n    'Amasty_CustomerAttributes/js/form/relationAbstract'\n], function (_, registry, Select, relationAbstract) {\n    'use strict';\n\n    return Select.extend(relationAbstract).extend({\n    });\n});\n","Amasty_CustomerAttributes/js/form/element/abstract.js":"/**\n * @author Amasty Team\n * @copyright Copyright (c) 2016 Amasty (http://www.amasty.com)\n * @package Amasty_CustomerAttributes\n */\n\ndefine([\n    'ko',\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/abstract',\n    'Amasty_CustomerAttributes/js/form/relationAbstract'\n], function (ko, _, registry, Abstract, relationAbstract) {\n    'use strict';\n\n    return Abstract.extend(relationAbstract).extend({\n\n        /**\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\n         *     properties, calls 'setOptions' passing options to it\n         *\n         * @returns {Object} Chainable.\n         */\n        initObservable: function () {\n            this._super();\n            return this;\n        }\n    });\n});\n","Amasty_CustomerAttributes/js/view/relation.js":"/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine(\n    [\n        'jquery'\n    ],\n    function($) {\n        'use strict';\n        return {\n            config : {\n                /**\n                 * arrays with keys:\n                 *      'parent_attribute_id'\n                 *      'parent_attribute_code'\n                 *      'parent_option_id'\n                 *      'depend_attribute_id'\n                 *      'depend_attribute_code'\n                 *      'parent_attribute_element_uid'\n                 *      'depend_attribute_element_uid'\n                 */\n            },\n            indexedElements : [],\n            /**\n             * @param {Object[]} options\n             * @param {Object[]} options.depends\n             * @returns {jquery}\n             */\n            init: function (options) {\n                this.config = options.depends;\n                this.initElements();\n                return this;\n            },\n            // init parent element listeners\n            initElements: function() {\n                var different = [];\n                $.each(this.config, function(key, relation) {\n                    var element = this.getElement(relation.parent_attribute_element_uid);\n                    if (element != void(0) && element.length && $.inArray(element.selector, different) == -1) {\n                        different.push(relation.parent_attribute_element_uid);\n                        element.on('change', function (event) {\n                            this.observer(event);\n                            this.indexedElements = [];\n                        }.bind(this));\n                        // for custom check\n                        element.on('check_relations', this.observer.bind(this));\n                        element.find('input,select').each(function (key, input) {\n                            $(input).trigger(\"check_relations\");\n                        });\n                        this.indexedElements = [];\n                    }\n                }.bind(this));\n            },\n            getElement: function (id) {\n                return $('[data-ui-id=\"' + id + '\"]');\n            },\n            observer: function (event) {\n                var element = $(event.target);\n                var block = $(event.currentTarget);\n                if (element && block) {\n                    var elementId = block.attr('data-ui-id');\n                    this.runDependencies(element, elementId);\n                }\n            },\n            runDependencies: function (element, elementId) {\n                // Find dependents elements\n                var elementDependencies = this.findElementRelations(elementId);\n                // Iterate throw elements and show required elements\n                $.each(elementDependencies, function(key, relation) {\n                    if (this.getElement(relation.depend_id).length) {\n                            // Multiselect and select\n                        if (this.isCanShow(relation)) {\n                            this.showBlock(relation.depend_id);\n                        } else if (this.indexedElements.indexOf(relation.depend_id) < 0) {\n                            this.hideBlock(relation.depend_id);\n                        }\n\n                    }\n                }.bind(this));\n            },\n            isCanShow: function (relationToShow) {\n                var parentRelations = this.findElementParentRelations(relationToShow);\n                var result = true;\n\n                // check all parent elements\n                $.each(parentRelations, function(key, relation) {\n                    var block = this.getElement(relation.parent_id);\n                    if (result && block.length) {\n                        result = !!(this.checkCheckbox(block.find('input'), relation) || this.checkSelect(block.find('select'), relation));\n                    }\n                }.bind(this));\n\n                return result;\n            },\n            /*\n             * check for Checkbox, radio\n             */\n            checkCheckbox: function (elementSet, relation) {\n                var result = false;\n                $.each(elementSet, function(key, element) {\n                    if (!result) {\n                        element = $(element);\n                        result = element.val() == relation.value && element.is(':checked') === true && element.is(\":visible\");\n                    }\n                });\n                return result;\n            },\n            /*\n             * check for select, multiselect\n             */\n            checkSelect: function (element, relation) {\n                if (!element.length) {\n                    return false;\n                }\n                return element.val() != void(0) && element.val().indexOf(relation.value) != -1 && element.is(\":visible\")\n            },\n\n            hideBlock: function (id) {\n                var element = this.getElement(id);\n                element.hide();\n                element.find('input,select').each(function (key, input) {\n                    $(input).trigger(\"check_relations\");\n                });\n            },\n            showBlock: function (id) {\n                var element = this.getElement(id);\n                element.show();\n                this.indexedElements.push(id);\n                element.find('input,select').each(function (key, input) {\n                    $(input).trigger(\"check_relations\");\n                });\n            },\n            findElementRelations: function (elementUId) {\n                var elements = [];\n                $.each(this.config, function(key, item) {\n                    if (item.parent_attribute_element_uid == elementUId) {\n                        var el = {\n                            'depend_id': item.depend_attribute_element_uid,\n                            'value': item.parent_option_id\n                        };\n                        elements.push(el);\n                    }\n                });\n                return elements;\n            },\n            findElementParentRelations: function (elementUId) {\n                var elements = [];\n                $.each(this.config, function(key, item) {\n                    if (item.depend_attribute_element_uid == elementUId.depend_id\n                        && item.parent_option_id == elementUId.value\n                    ) {\n                        var el = {\n                            'parent_id': item.parent_attribute_element_uid,\n                            'depend_id': item.depend_attribute_element_uid,\n                            'value': item.parent_option_id\n                        };\n                        elements.push(el);\n                    }\n                });\n                return elements;\n            }\n        }\n    }\n);\n","Amasty_CustomerAttributes/js/view/checkout-guest.js":"define(\n    [\n        'jquery',\n        'ko',\n        'underscore',\n        'uiComponent',\n        'Magento_Checkout/js/model/quote',\n        'uiRegistry'\n    ],\n    function (\n        $,\n        ko,\n        _,\n        Component,\n        quote,\n        registry\n\n    ) {\n        return Component.extend({\n            isVisible    : ko.observable(false),\n            dependsToShow: [],\n\n            /**\n             *\n             * @returns {*}\n             */\n            initialize: function () {\n                this._super();\n                var self = this;\n\n                registry.async('checkoutProvider')(function (checkoutProvider) {\n                    if (typeof registry.get('checkoutProvider').get('amcheckout.additional') === undefined) {\n                        checkoutProvider.on('shippingAddress.custom_attributes', function (customerAttributes) {\n                            self.saveCustomerAttributesToQuote(customerAttributes);\n                        }.bind(self));\n                    }\n                });\n\n                return this;\n            },\n            initObservable: function () {\n                this._super();\n\n                if (!_.isUndefined(this.fields)) {\n                    var fieldsetPath = 'checkout.steps.shipping-step.shippingAddress.shipping-address-fieldset';\n\n                    _.each(this.fields, function (value) {\n                        registry.async(fieldsetPath + '.' + value)(function (element) {\n                            if(element && _.isFunction(element.checkDependencies)) {\n                                element.checkDependencies();\n                            }\n                        });\n                    });\n                }\n\n                this.elems.subscribe(function(childElements) {\n                    childElements.map(function(element) {\n                        // var element = registry.get(elementName);\n                        if(element && _.isFunction(element.checkDependencies)) {\n                            element.checkDependencies();\n                        }\n                    }.bind(this));\n                    this.dependsToShow = [];\n                }.bind(this));\n\n                return this;\n            },\n            saveCustomerAttributesToQuote: function (customerAttributes) {\n                var shippingAddress = quote.shippingAddress();\n                if (shippingAddress) {\n                    $.each(customerAttributes, function(index, value) {\n                        if (typeof(value) == 'array') {\n                            customerAttributes[index] = customerAttributes[index].join(',');\n                        }\n                        var element = this.getChild(index);\n                        if (element && !element.visible()) {\n                            customerAttributes[index] = void(0);\n                        }\n                    }.bind(this));\n                    shippingAddress.custom_attributes = $.extend(\n                        {}, shippingAddress.custom_attributes, customerAttributes\n                    );\n                    quote.shippingAddress(shippingAddress);\n                }\n            }\n        });\n    }\n);\n","Amasty_CustomerAttributes/js/view/register.js":"/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine(\n    [\n        'jquery',\n        'ko',\n        'Magento_Ui/js/form/form',\n        'Magento_Customer/js/customer-data'\n    ],\n    function($, ko, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Amasty_CustomerAttributes/register'\n            },\n            visible: function(){\n                return true;\n            },\n            initialize: function() {\n                var self = this;\n                this._super();\n                var a = customerData.reload();\n                var customer = customerData.get('customer');\n            },\n            setPosition: function(element){\n                $(element).appendTo(\"#form-validate\");\n                var loaderContainer = document.getElementById('checkout-loader');\n\n                if (loaderContainer && loaderContainer.parentNode) {\n                    loaderContainer.parentNode.removeChild(loaderContainer);\n                }\n            }\n        });\n    }\n);\n","Amasty_CustomerAttributes/js/view/checkout.js":"define(\n    [\n        'Amasty_CustomerAttributes/js/view/checkout-guest'\n    ],\n    function (\n        Component\n    ) {\n        return Component.extend({\n            defaults: {\n                template: 'Amasty_CustomerAttributes/checkout'\n            }\n        });\n    });\n","Amasty_CustomerAttributes/js/view/edit.js":"/**\n * Copyright \u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine(\n    [\n        'jquery',\n        'ko',\n        'Magento_Ui/js/form/form',\n        'Magento_Customer/js/customer-data',\n        'uiRegistry',\n    ],\n    function($, ko, Component, customerData, registry) {\n        'use strict';\n        var cacheKey = 'customer-attributes';\n\n        var getData = function () {\n            return storage.get(cacheKey)();\n        };\n\n        var saveData = function (checkoutData) {\n            storage.set(cacheKey, checkoutData);\n        };\n\n        return Component.extend({\n            defaults: {\n                template: 'Amasty_CustomerAttributes/edit'\n            },\n            initialize: function() {\n                var self = this;\n                this._super();\n                customerData.setCustomerAttributes = function (data) {\n                    var obj = getData();\n                    obj.customerAttributes = data;\n                    saveData(obj);\n                };\n                customerData.getCustomerAttributes = function () {\n                    return getData().customerAttributes;\n                },\n                registry.async('checkoutProvider')(function (provider) {\n                    var customerAttributes = customerData.getCustomerAttributes();\n                    if (customerAttributes) {\n                        provider.set(\n                            'customerAttributes',\n                            $.extend({}, provider.get('customerAttributes'), shippingAddressData)\n                        );\n                    }\n                    provider.on('customerAttributes', function (customerAttributes) {\n                        customerData.setCustomerAttributes(customerAttributes);\n                    });\n                });\n            },\n            setPosition: function(element){\n                $(element).insertAfter(\"fieldset.fieldset.password\");\n                var loaderContainer = document.getElementById('checkout-loader');\n\n                if (loaderContainer && loaderContainer.parentNode) {\n                    loaderContainer.parentNode.removeChild(loaderContainer);\n                }\n            }\n        });\n    }\n);","Amasty_CustomerAttributes/js/model/custom-attributes-processor.js":"define([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return {\n\n        /**\n         * Adding to attribute data label for attributes with options\n         *\n         * @param {Array} customAttributes\n         * @return {Array}\n         */\n        addAttributeLabels: function (customAttributes) {\n            var attributesConfig = window.checkoutConfig.amastyCustomerAttributeOptionsConfig,\n                attributeConfig;\n\n            if (!_.isEmpty(attributesConfig) && !_.isEmpty(customAttributes)) {\n                customAttributes = this.filterCustomAttributes(customAttributes);\n                _.map(\n                    customAttributes,\n                    function (attributeData) {\n                        if (_.has(attributesConfig, attributeData.attribute_code)) {\n                            attributeConfig = attributesConfig[attributeData.attribute_code];\n                            attributeData.label = this.getAttributeLabel(attributeData.value, attributeConfig);\n                        }\n\n                        return attributeData;\n                    }.bind(this)\n                );\n            }\n\n            return customAttributes;\n        },\n\n        /**\n         * Filter custom attributes from unnecessary data\n         *\n         * @param {Array} customAttributes\n         * @return {Array}\n         */\n        filterCustomAttributes: function (customAttributes) {\n            return _.filter(\n                customAttributes,\n                function (attributeData) {\n                    return !attributeData.attribute_code.includes('prepared-for-send');\n                }\n            );\n        },\n\n        /**\n         *\n         * @param {Array|String} attributeValue\n         * @param {Array} attributeConfig\n         * @return {String}\n         */\n        getAttributeLabel: function (attributeValue, attributeConfig) {\n            var label = '',\n                complexLabels = [];\n\n            if (_.isArray(attributeValue)) {\n                _.each(attributeValue, function (value) {\n                    complexLabels.push(attributeConfig[value]);\n                });\n                label = complexLabels.join(', ');\n            } else {\n                label = attributeConfig[attributeValue];\n            }\n\n            return label;\n        }\n    }\n});\n","Amasty_CustomerAttributes/js/model/new-customer-address-mixin.js":"define([\n    'mage/utils/wrapper',\n    'Amasty_CustomerAttributes/js/model/custom-attributes-processor'\n], function (wrapper, attributeProcessor) {\n    'use strict';\n\n    return function (newAddress) {\n        return wrapper.wrap(newAddress, function (newAddressAction, addressData) {\n\n            if (addressData.custom_attributes) {\n                addressData.custom_attributes = attributeProcessor.addAttributeLabels(addressData.custom_attributes);\n            }\n\n            return newAddressAction(addressData);\n        });\n    };\n});\n","Amasty_CustomerAttributes/js/Temando/shipping-address-renderer-fix.js":"define([\n    'Magento_Checkout/js/view/shipping-information/address-renderer/default'\n], function (defaultRenderer) {\n    'use strict';\n\n    return function (viewComponent) {\n        return defaultRenderer.extend(viewComponent);\n    };\n});\n","Amasty_CustomerAttributes/js/action/set-shipping-information-mixin.js":"define([\n    'jquery',\n    'mage/utils/wrapper',\n    'uiRegistry'\n], function ($, wrapper, registry) {\n    'use strict';\n\n    return function (setShippingInformation) {\n        return wrapper.wrap(\n            setShippingInformation,\n            function (originalAction) {\n                var source = registry.get('checkoutProvider');\n\n                source.set('params.invalid', false);\n                if (source.get('shippingAddress.custom_attributes')) {\n                    source.trigger('shippingAddress.custom_attributes.data.validate');\n                }\n\n                if (source.get('params.invalid')) {\n                    alert('Please add new shipping address and make sure all the required fields are filled in.');\n\n                    return false;\n                }\n\n                return originalAction();\n            }\n        );\n    };\n});\n","Magento_Translation/js/i18n-config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n(function () {\n    'use strict';\n\n    require.config({\n        config: {\n            'Magento_Ui/js/lib/knockout/bindings/i18n': {\n                inlineTranslation: true\n            }\n        }\n    });\n})();\n","Magento_Translation/js/mage-translation-dictionary.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'text!js-translation.json'\n], function (dict) {\n    'use strict';\n\n    return JSON.parse(dict);\n});\n","Magento_Translation/js/add-class.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['jquery'], function ($) {\n    'use strict';\n\n    return function (config, element) {\n        $(element).addClass(config.class);\n    };\n});\n","Amasty_ShopbyLite/js/amShopbyAjax.js":"define([\n    'jquery',\n    'Magento_Ui/js/modal/modal',\n    'productListToolbarForm',\n    'amShopbyFilterAbstract'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.amShopbyAjax', {\n        prevCall: false,\n        $shopbyOverlay: null,\n        cached: [],\n        blockToolbarProcessing: false,\n        response: null,\n        cacheKey: null,\n        isCategorySingleSelect: 0,\n        selectors: {\n            swatchesTooltip: '.swatch-option-tooltip',\n            sidebar: '.sidebar.sidebar-main',\n            filtersBlock: '.block.filter',\n            shopByProducts: '#amasty-shopby-product-list',\n            productsWrapper: '.products.wrapper',\n            pageTitle: '#page-title-heading',\n            pageTitleWrapper: '.page-title-wrapper',\n            breadcrumbs: '.breadcrumbs',\n            categoryView: '.category-view',\n            jsInit: '[data-am-js=\"js-init\"]',\n            pagination: '.toolbar .pages a',\n            overlay: '#amasty-shopby-overlay'\n        },\n        options: {\n            scrollUp: false\n        },\n\n        _create: function () {\n            this.initWidget();\n            this._interceptBackAction();\n        },\n\n        initWidget: function () {\n            var self = this,\n                swatchesTooltip = $(self.selectors.swatchesTooltip);\n\n            $(document).on('amshopby:submit_filters', function (event, eventData) {\n                var data = eventData.data,\n                    clearUrl = self.options.clearUrl,\n                    isSorting = eventData.isSorting,\n                    pushState = !self.options.submitByClick;\n\n                if (typeof data.clearUrl !== 'undefined') {\n                    clearUrl = data.clearUrl;\n                    delete data.clearUrl;\n                }\n                if (self.prevCall) {\n                    self.prevCall.abort();\n                }\n\n                var dataAndUrl = data.slice(0);\n                dataAndUrl.push(clearUrl ? clearUrl : self.options.clearUrl);\n\n                var cacheKey = JSON.stringify(dataAndUrl);\n                $.mage.amShopbyAjax.prototype.cacheKey = cacheKey;\n                if (self.cached[cacheKey]) {\n                    window.history.pushState({url: self.cached[cacheKey].url}, '', self.cached[cacheKey].url);\n                    self.reloadHtml(self.cached[cacheKey]);\n                    self.initAjax();\n                } else {\n                    self.prevCall = self.callAjax(clearUrl, data, pushState, cacheKey, isSorting);\n                }\n            });\n\n            $(document).on('touchstart touchmove scroll', function () {\n                swatchesTooltip.hide();\n            });\n\n            self.initAjax();\n        },\n\n        initAjax: function () {\n            var productListContainer = $(this.selectors.shopByProducts + ' ' + this.selectors.productsWrapper);\n            this.$shopbyOverlay = $(this.selectors.overlay);\n            if (!this.$shopbyOverlay.length) {\n                productListContainer\n                    .append(\n                        \"<div id='\" +\n                        this.selectors.overlay.split('#').join('') +\n                        \"'><div class='loader'></div></div>\"\n                    );\n                this.$shopbyOverlay = $(this.selectors.overlay);\n            }\n\n            this._initAjaxToolbar();\n            this._initAjaxPagination();\n        },\n\n        callAjax: function (clearUrl, data, cacheKey) {\n            var self = this;\n            this.$shopbyOverlay.show();\n\n            data.every(function (item, key) {\n                if (item.name.indexOf('[cat]') != -1) {\n                    if (item.value == self.options.currentCategoryId) {\n                        data.splice(key, 1);\n                    } else {\n                        item.value.split(',').filter(function(element) {\n                            return element != self.options.currentCategoryId\n                        }).join(',');\n                    }\n\n                    return false;\n                }\n            });\n            data.push({name: 'shopbyAjax', value: 1});\n\n            if (!clearUrl) {\n                clearUrl = self.options.clearUrl;\n            }\n\n            self.clearUrl = clearUrl;\n\n            return $.ajax({\n                url: clearUrl,\n                data: data,\n                cache: true,\n\n                success: function (response) {\n                    try {\n                        response = $.parseJSON(response);\n\n                        if (response.isDisplayModePage) {\n                            throw new Error();\n                        }\n\n                        if (cacheKey) {\n                            self.cached[cacheKey] = response;\n                        }\n\n                        if (response.newClearUrl\n                            && (response.newClearUrl.indexOf('?p=') == -1 && response.newClearUrl.indexOf('&p=') == -1)) {\n                            self.options.clearUrl = response.newClearUrl;\n                        }\n\n                        window.history.pushState({url: response.url}, '', response.url);\n                        self.reloadHtml(response);\n                    } catch (e) {\n                        var url = self.clearUrl ? self.clearUrl : self.options.clearUrl;\n                        window.location = (this.url.indexOf('shopbyAjax') == -1) ? this.url : url;\n                    }\n                },\n                error: function (response) {\n                    try {\n                        if (response.getAllResponseHeaders() != '') {\n                            self.options.clearUrl ? window.location = self.options.clearUrl : location.reload();\n                        }\n                    } catch (e) {\n                        window.location = (this.url.indexOf('shopbyAjax') == -1) ? this.url : self.options.clearUrl;\n                    }\n                }\n            });\n        },\n\n        reloadHtml: function (data) {\n            var sidebarBlock = $(this.selectors.sidebar).first(),\n                productsBlock = $(this.selectors.shopByProducts),\n                pageTitle = $(this.selectors.pageTitle),\n                swatchesTooltip = $(this.selectors.swatchesTooltip),\n                categoryViewBlock = $(this.selectors.categoryView),\n                jsInit = $(this.selectors.jsInit),\n                resolveFilterBlock = function () {\n                    var filtersBlock = sidebarBlock.find(this.selectors.filtersBlock).first();\n                    if (!filtersBlock.length) {\n                        if (sidebarBlock.length) {\n                            sidebarBlock.prepend(\n                                '<div class=\\'' +\n                                this.selectors.filtersBlock.split('.').join(' ') +\n                                '\\'></div>'\n                            );\n                        }\n                        filtersBlock = $(this.selectors.filtersBlock).first();\n                    }\n                    return filtersBlock;\n                }.bind(this);\n\n            this.options.currentCategoryId = data.currentCategoryId\n                ? data.currentCategoryId\n                : this.options.currentCategoryId;\n\n\n            resolveFilterBlock().replaceWith(data.navigation);\n            resolveFilterBlock().trigger('contentUpdated');\n\n            if (data.categoryProducts) {\n                if (productsBlock.parent('.search.results').length) {\n                    productsBlock = productsBlock.parent('.search.results');\n                }\n                productsBlock.replaceWith(data.categoryProducts);\n                productsBlock = $(this.selectors.shopByProducts);\n                productsBlock.trigger('contentUpdated');\n\n                if ($.fn.applyBindings != undefined) {\n                    productsBlock.applyBindings();\n                }\n\n            }\n\n            pageTitle.closest(this.selectors.pageTitleWrapper).replaceWith(data.h1);\n            pageTitle.trigger('contentUpdated');\n\n            $(this.selectors.breadcrumbs).replaceWith(data.breadcrumbs);\n            $(this.selectors.breadcrumbs).trigger('contentUpdated');\n\n            $('title').html(data.title);\n\n            if (data.categoryData != '') {\n                if (!categoryViewBlock.length) {\n                    categoryViewBlock = $(\n                        '<div class=\"' +\n                        this.selectors.categoryView.split('.').join(' ') +\n                        '\"></div>'\n                    ).insertAfter('.page.messages');\n                }\n                categoryViewBlock.replaceWith(data.categoryData);\n            }\n\n            swatchesTooltip.hide();\n\n            if (this.$shopbyOverlay) {\n                this.$shopbyOverlay.hide();\n            }\n\n            if (this.options.scrollUp && productsBlock.length) {\n                this.scrollUpAfterAjax(productsBlock);\n            }\n\n            jsInit.first().replaceWith(data.js_init);\n            jsInit = $(this.selectors.jsInit);\n            jsInit.first().trigger('contentUpdated');\n\n            this.afterChangeContentExternal();\n\n            $(document).trigger('amscroll_refresh');\n\n            this.initAjax();\n        },\n\n        /**\n         * Scroll to top of element\n         * @param {jQuery|Object} element\n         */\n        scrollUpAfterAjax: function (element) {\n            $(document).scrollTop(element.offset().top);\n        },\n\n        afterChangeContentExternal: function () {\n            //compatibility with Amasty Scroll extension\n            $(document).trigger('amscroll_refresh');\n\n            //porto theme compatibility\n            var lazyImg = $(\"img.porto-lazyload:not(.porto-lazyload-loaded)\");\n            if (lazyImg.length && typeof $.fn.lazyload == 'function') {\n                lazyImg.lazyload({effect:\"fadeIn\"});\n            }\n        },\n\n        _initAjaxToolbar: function () {\n            if ($.mage.productListToolbarForm) {\n                var self = this;\n                //change page limit\n                $.mage.productListToolbarForm.prototype.changeUrl = function (paramName, paramValue, defaultValue) {\n                    // Workaround to prevent double method call\n                    if (self.blockToolbarProcessing) {\n                        return;\n                    }\n                    self.blockToolbarProcessing = true;\n                    setTimeout(function () {\n                        self.blockToolbarProcessing = false;\n                    }, 300);\n\n                    var decode = window.decodeURIComponent,\n                        urlPaths = this.options.url.split('?'),\n                        urlParams = urlPaths[1] ? urlPaths[1].split('&') : [],\n                        paramData = {};\n\n                    for (var i = 0; i < urlParams.length; i++) {\n                        var parameters = urlParams[i].split('=');\n                        paramData[decode(parameters[0])] = parameters[1] !== undefined\n                            ? decode(parameters[1].replace(/\\+/g, '%20'))\n                            : '';\n                    }\n                    paramData[paramName] = paramValue;\n                    if (paramValue == defaultValue) {\n                        delete paramData[paramName];\n                    }\n                    self.options.clearUrl = self.getNewClearUrl(paramName, paramData[paramName] ? paramData[paramName] : '');\n\n                    //add ajax call\n                    $.mage.amShopbyFilterAbstract.prototype.prepareTriggerAjax(null, null, null, true);\n                };\n            }\n        },\n\n        //change page number\n        _initAjaxPagination: function () {\n            var self = this;\n            $(this.selectors.pagination).unbind('click').bind('click', function (e) {\n                var newUrl = $(this).prop('href'),\n                    updatedUrl = null,\n                    urlPaths = newUrl.split('?'),\n                    urlParams = urlPaths[1].split('&');\n\n                for (var i = 0; i < urlParams.length; i++) {\n                    if (urlParams[i].indexOf(\"p=\") === 0) {\n                        var pageParam = urlParams[i].split('=');\n                        updatedUrl = self.getNewClearUrl(pageParam[0], pageParam[1] > 1 ? pageParam[1] : '');\n                        break;\n                    }\n                }\n\n                if (!updatedUrl) {\n                    updatedUrl = this.href;\n                }\n                updatedUrl = updatedUrl.replace('amp;', '');\n                $.mage.amShopbyFilterAbstract.prototype.prepareTriggerAjax(document, updatedUrl, false, true);\n                $(document).scrollTop($(self.selectors.shopByProducts).offset().top);\n\n                e.stopPropagation();\n                e.preventDefault();\n            });\n        },\n\n        //Update url after change page size or current page.\n        getNewClearUrl: function (param, value) {\n            var urlPaths = this.options.clearUrl.replace(/&amp;/g, '&').split('?'),\n                baseUrl = urlPaths[0],\n                urlParams = urlPaths[1] ? urlPaths[1].split('&') : [param + '=' + value],\n                replaced = false,\n                paramData = {};\n\n            for (var i = 0; i < urlParams.length; i++) {\n                var parameters = urlParams[i].split('=');\n                paramData[parameters[0]] = parameters[1];\n                if (parameters[0] == param) {\n                    if (value != '') {\n                        paramData[parameters[0]] = value;\n                    } else {\n                        delete paramData[parameters[0]];\n                    }\n                    replaced = true;\n                }\n            }\n            if (!replaced && value != '') {\n                paramData[param] = value;\n            }\n\n            paramData = $.param(paramData);\n\n            return window.decodeURIComponent(baseUrl + (paramData.length ? '?' + paramData : ''));\n        },\n\n        _interceptBackAction: function () {\n            if (typeof window.history.replaceState === 'function') {\n                var self = this;\n\n                window.history.replaceState(\n                    {\n                        url: document.URL\n                    },\n                    document.title\n                );\n                setTimeout(function () {\n                    /*\n                     Timeout is a workaround for iPhone\n                     Reproduce scenario is following:\n                     1. Open category\n                     2. Use pagination\n                     3. Click on product\n                     4. Press \"Back\"\n                     Result: Ajax loads the same content right after regular page load\n                     */\n                    window.onpopstate = function (e) {\n                        if (e.state) {\n                            self.callAjax(e.state.url, []);\n                            self.$shopbyOverlay.show();\n                        }\n                    };\n                }, 0);\n            }\n        }\n    });\n\n    return $.mage.amShopbyAjax;\n});\n","Amasty_ShopbyLite/js/jquery.ui.touch-punch.min.js":"/*!\n * jQuery UI Touch Punch 0.2.3\n *\n * Copyright 2011\u20132014, Dave Furfero\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Depends:\n *  jquery.ui.widget.js\n *  jquery.ui.mouse.js\n */\ndefine([\n    \"jquery\",\n], function ($) {\n    !function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent(\"MouseEvents\");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch=\"ontouchend\"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,\"mouseover\"),f(a,\"mousemove\"),f(a,\"mousedown\"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,\"mousemove\"))},b._touchEnd=function(a){e&&(f(a,\"mouseup\"),f(a,\"mouseout\"),this._touchMoved||f(a,\"click\"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),d.call(b)}}}($);\n});\n","Amasty_ShopbyLite/js/amShopby.js":"define([\n    'jquery',\n    'jquery/ui', // Can't be removed because we need jquery ui slider\n    // 'jquery-ui-modules/slider'\n    // 'jquery-ui-modules/widget'\n    //  replace jquery/ui to commented code for magento 2.3.3 and higher\n    'mage/validation',\n    'mage/translate',\n    'Amasty_ShopbyLite/js/jquery.ui.touch-punch.min',\n    'Amasty_ShopbyLite/js/chosen/chosen.jquery'\n], function ($) {\n    'use strict';\n\n    var sliderAlias = 'jquery/ui-modules/widgets/slider';\n\n    $.widget('mage.amShopbyFilterAbstract', {\n        filters: {},\n\n        options: {\n            isAjax: 0\n        },\n\n        getFilter: function () {\n            var filter = {\n                'code': this.element.attr('amshopby-filter-code'),\n                'value': this.element.attr('amshopby-filter-value')\n            };\n\n            return filter;\n        },\n\n        apply: function (link, clearFilter) {\n            try {\n                if ($.mage.amShopbyAjax) {\n                    $.mage.amShopbyAjax.prototype.response = null;\n                }\n\n                this.options.isAjax = $.mage.amShopbyAjax != undefined;\n                var linkParam = clearFilter ? link : null;\n\n                if (this.options.isAjax == true) {\n                    this.prepareTriggerAjax(this.element, linkParam, clearFilter);\n                } else {\n                    window.location = link;\n                }\n            } catch (e) {\n                window.location = link;\n            }\n        },\n\n        prepareTriggerAjax: function (element, clearUrl, clearFilter, isSorting) {\n            var forms = $('form[data-amshopby-filter]');\n\n            if (typeof this.element !== 'undefined' && clearFilter) {\n                var attributeName = this.element.closest('.filter-options-content').find('form').data('amshopby-filter'),\n                    excludedFormSelector = (this.element.closest('div.sidebar').length == 0\n                        ? 'div.catalog-topnav' : 'div.sidebar') + ' form[data-amshopby-filter=' + attributeName + ']';\n\n                forms = forms.not(excludedFormSelector);\n            }\n\n            var existFields = [],\n                savedFilters = [];\n\n            forms.each(function (index, item) {\n                var $item = $(item),\n                    className = '';\n\n                if ($item.closest('[class*=\"am-filter-items\"]').length) {\n                    className = $item.closest('[class*=\"am-filter-items\"]')[0].className;\n                } else if ($item.find('[class*=\"am-filter-items\"]').length) {\n                    className = $item.find('[class*=\"am-filter-items\"]')[0].className;\n                }\n\n                var startPos = className.indexOf('am-filter-items'),\n                    endPos = className.indexOf(' ', startPos + 1) == -1 ? 100 : className.indexOf(' ', startPos + 1),\n                    filterClass = className.substring(startPos, endPos);\n\n                if (filterClass && existFields[filterClass] && filterClass !== 'am-filter-items-attr_price') {\n                    forms[index] = '';\n                } else {\n                    existFields[filterClass] = true;\n                }\n\n                if ($item.hasClass('am_saved_filter_values')) {\n                    savedFilters.push(forms[index]);\n                    forms[index] = '';\n                }\n            });\n\n            var serializeForms = forms.serializeArray(),\n                isPriceExist = false;\n\n            _.each(serializeForms, function (index, item) {\n                if (item.name == 'amshopby[price][]') {\n                    isPriceExist = true;\n\n                    return false;\n                }\n            });\n\n            if (!isPriceExist && savedFilters) {\n                savedFilters.forEach(function (element) {\n                    serializeForms.push($(element).serializeArray()[0]);\n                });\n            }\n\n            var data = this.normalizeData(serializeForms, isSorting, clearFilter);\n\n            data.clearUrl = data.clearUrl ? data.clearUrl : clearUrl;\n            element = element || document;\n            $(element).trigger('amshopby:submit_filters', { data: data, clearFilter: clearFilter, isSorting: isSorting });\n\n            return data;\n        },\n\n        normalizeData: function (data, isSorting, clearFilter) {\n            var normalizedData = [],\n                ajaxOptions = $('body.page-with-filter, body.catalogsearch-result-index, body.cms-index-index').amShopbyAjax('option'),\n                clearUrl;\n\n            _.each(data, function (item) {\n                if (item && item.value.trim() != '' && item.value != '-1') {\n                    var isNormalizeItem = _.find(normalizedData, function (normalizeItem) {\n                        return normalizeItem.name === item.name && normalizeItem.value === item.value\n                            || item.name == 'amshopby[price][]' && normalizeItem.name === item.name;\n                    });\n\n                    if (!isNormalizeItem) {\n                        if (item.name == 'amshopby[price][]') {\n                            item.value = item.value.replace(/[ \\r\\n]/g, '');\n                        }\n\n                        normalizedData.push(item);\n\n                        if (ajaxOptions.isCategorySingleSelect == '1'\n                            && item.name === 'amshopby[cat][]'\n                            && item.value != ajaxOptions.currentCategoryId\n                            && !clearFilter\n                            && !isSorting\n                        ) {\n                            clearUrl = $('*[data-amshopby-filter-request-var=\"cat\"] *[value=\"' + item.value + '\"]')\n                                .parent().attr('href');\n                        }\n                    }\n                }\n            });\n\n            normalizedData = this.groupDataByName(normalizedData);\n            normalizedData.clearUrl = clearUrl;\n\n            return normalizedData;\n        },\n\n        groupDataByName: function (formData, fn) {\n            var hash = Object.create(null);\n\n            return formData.reduce(function (result, currentValue) {\n                if (!hash[currentValue.name]) {\n                    hash[currentValue.name] = {};\n                    hash[currentValue.name].name = currentValue.name;\n                    result.push(hash[currentValue.name]);\n                }\n\n                if (hash[currentValue.name].value) {\n                    hash[currentValue.name].value += ',' + currentValue.value;\n                } else {\n                    hash[currentValue.name].value = currentValue.value;\n                }\n\n                return result;\n            }, []);\n        },\n\n        getSignsCount: function (step, isPrice) {\n            if (step < 1 && step > 0) {\n                return step.toString().length - step.toString().indexOf('.') - 1;\n            }\n\n            return 0;\n        },\n        getFloatNumber: function (size) {\n            if (!size) {\n                size = 2;\n            }\n\n            return 1 / parseInt(this.buildNumber(size));\n        },\n        buildNumber: function (size) {\n            var str = '1';\n\n            for (var i = 1; i <= size; i++) {\n                str += '0';\n            }\n\n            return str;\n        },\n        getFixed: function (value, isPrice) {\n            var fixed = 2;\n\n            if (value) {\n                fixed = this.getSignsCount(this.options.step, isPrice);\n            }\n\n            return fixed;\n        },\n        isPrice: function () {\n            return typeof this.options.code != 'undefined' && this.options.code == 'price';\n        },\n        renderShowButton: function (event, element) {\n            if ($.mage.amShopbyApplyFilters) {\n                $.mage.amShopbyApplyFilters.prototype.renderShowButton(event, element);\n            }\n        }\n    });\n\n    $.widget('mage.amShopbyFilterItemDefault', $.mage.amShopbyFilterAbstract, {\n        options: {},\n        _create: function () {\n            var self = this;\n\n            $(function () {\n                var link = self.element,\n                    parent = link.parents('.item'),\n                    checkbox = link.find('input[type=checkbox], input[type=radio]');\n\n                if (link.find('[name=\"amshopby[cat][]\"]').length && parent) {\n                    parent = $(null);// get only current category item\n                }\n\n                var params = {\n                    parent: parent,\n                    checkbox: checkbox,\n                    link: link\n                };\n\n                checkbox.bind('click', params, function (e) {\n                    var checkbox = $(this),\n                        link = e.data.link,\n                        href = link.prop('href');\n\n                    setTimeout(function () {\n                        checkbox.prop('checked', !checkbox.prop('checked'));\n                        self.triggerSync(checkbox, !checkbox.prop('checked'));\n\n                        if (self.isFinderAndCategory(checkbox[0])) {\n                            location.href = href;\n\n                            return;\n                        }\n\n                        $.mage.amShopbyFilterAbstract.prototype.renderShowButton(e, link);\n                        self.apply(href);\n                    }, 10);\n                    e.stopPropagation();\n                    e.preventDefault();\n                });\n\n                link.bind('click', params, function (e) {\n                    var element = e.data.checkbox,\n                        href = e.data.link.prop('href');\n\n                    element.prop('checked', !element.prop('checked'));\n                    self.triggerSync(element, !element.prop('checked'));\n\n                    if (self.isFinderAndCategory(element[0])) {\n                        location.href = href;\n\n                        return;\n                    }\n\n                    $.mage.amShopbyFilterAbstract.prototype.renderShowButton(e, element);\n                    self.apply(href);\n\n                    e.stopPropagation();\n                    e.preventDefault();\n                });\n\n                parent.bind('click', params, function (e) {\n                    var element = e.data.checkbox,\n                        link = e.data.link;\n\n                    element.prop('checked', !element.prop('checked'));\n                    self.triggerSync(element, !element.prop('checked'));\n                    $.mage.amShopbyFilterAbstract.prototype.renderShowButton(e, element);\n                    self.apply(link.prop('href'));\n\n                    e.stopPropagation();\n                    e.preventDefault();\n\n                    return false;\n                });\n\n                checkbox.on('change', function (e) {\n                    self.markAsSelected($(this));\n                });\n\n                checkbox.on('amshopby:sync_change', function (e) {\n                    self.markAsSelected($(this));\n                });\n\n                self.markAsSelected(checkbox);\n            });\n        },\n        triggerSync: function (element, clearFilter) {\n            element.trigger('change');\n            element.trigger('sync', [ clearFilter ]);\n        },\n        isFinderAndCategory: function (element) {\n            return location.href.indexOf('find=') !== -1\n                && element.type == 'radio'\n                && element.name == 'amshopby[cat][]';\n        },\n        markAsSelected: function (checkbox) {\n            checkbox.closest('form').find('a').each(function () {\n                if (!$(this).find('input').prop('checked')) {\n                    $(this).removeClass('am_shopby_link_selected');\n                } else {\n                    $(this).addClass('am_shopby_link_selected');\n                }\n            });\n        }\n    });\n\n    $.widget('mage.amShopbyFilterSlider', $.mage.amShopbyFilterAbstract, {\n        options: {},\n        slider: null,\n        value: null,\n        display: null,\n\n        _create: function () {\n            var self = this;\n\n            if (!$.ui.slider) {\n                // eslint-disable-next-line global-require\n                require([ sliderAlias ], function (slider) {\n                    $.ui.slider = slider;\n                    self._initWidget();\n                });\n            } else {\n                self._initWidget();\n            }\n        },\n\n        /**\n         * @private\n         * @return {void}\n         */\n        _initWidget: function () {\n            $(function () {\n                this.value = this.element.find('[amshopby-slider-id=\"value\"]');\n                this.slider = this.element.find('[amshopby-slider-id=\"slider\"]');\n                this.display = this.element.find('[amshopby-slider-id=\"display\"]');\n                var fromLabel = this.options.from && this.options.from >= this.options.min\n                        ? this.options.from\n                        : this.options.min,\n                    toLabel = this.options.to && this.options.to <= this.options.max\n                        ? this.options.to\n                        : this.options.max;\n\n                this.slider.slider({\n                    step: this.options.step,\n                    range: true,\n                    min: this.options.min,\n                    max: this.options.max,\n                    values: [fromLabel, toLabel],\n                    slide: this.onSlide.bind(this),\n                    change: this.onChange.bind(this)\n                });\n\n                if (this.options.to) {\n                    this.value.val(fromLabel + '-' + toLabel);\n                } else {\n                    this.value.trigger('change');\n                }\n\n                this.renderLabel(fromLabel, toLabel);\n            }.bind(this));\n        },\n\n        onChange: function (event, ui) {\n            if (this.slider.skipOnChange !== true) {\n                this.setValue(\n                    ui.values[0],\n                    ui.values[1],\n                    true,\n                    jQuery(ui.handle).closest('[data-am-js=\"slider-container\"]').attr('rate')\n                );\n            }\n\n            return true;\n        },\n\n        onSlide: function (event, ui) {\n            var from = ui.values[0],\n                to = ui.values[1];\n\n            this.setValue(from, to, false);\n            this.renderLabel(from, to);\n\n            return true;\n        },\n\n        onSyncChange: function (event, values) {\n            var value = values[0].split('-');\n\n            if (value.length === 2) {\n                var fixed = 2,\n                    from = parseFloat(value[0]).toFixed(fixed),\n                    to = parseFloat(value[1]).toFixed(fixed);\n\n                this.slider.skipOnChange = true;\n\n                this.slider.slider('values', [from, to]);\n                this.setValueWtihoutChange(from, to);\n                this.slider.skipOnChange = false;\n            }\n        },\n        setValue: function (from, to, apply, rate) {\n            var fixed = 2;\n\n            from = parseFloat(from).toFixed(fixed);\n            to = parseFloat(to).toFixed(fixed);\n\n            var newVal = from + '-' + to,\n                changed = this.value.val() != newVal;\n\n            this.value.val(newVal);\n\n            if (changed) {\n                this.value.trigger('change');\n                this.value.trigger('sync');\n            }\n\n            if (apply !== false) {\n                newVal = from + '-' + to;\n                this.value.val(newVal);\n                var linkHref = this.options.url.replace('amshopby_slider_from', from).replace('amshopby_slider_to', to);\n\n                this.apply(linkHref);\n            }\n        },\n        setValueWtihoutChange: function (from, to) {\n            var fixed = this.getSignsCount(this.options.step, 0),\n                newVal = parseFloat(from) + '-' + parseFloat(to);\n\n            this.value.val(newVal);\n        },\n        getLabel: function (from, to) {\n            return this.options.template.replace('{from}', from.toString()).replace('{to}', to.toString());\n        },\n        renderLabel: function (from, to) {\n            var fixed = this.getSignsCount(this.options.step, 0);\n\n            from = parseFloat(from).toFixed(fixed);\n            to = parseFloat(to).toFixed(fixed);\n            this.display.html(this.getLabel(from, to));\n        }\n    });\n\n    $.widget('mage.amShopbyFilterContainer', {\n        options: {},\n\n        _create: function () {\n            var self = this;\n\n            $(function () {\n                var $element = $(self.element[0]),\n                    links = $element.find('[data-am-js=\"shopby-item\"]'),\n                    allClear = $element.siblings('.filter-actions'),\n                    filters = [];\n\n                if (links.length) {\n                    $(links).each(function (index, value) {\n                        var filter = {\n                            attribute: $(value).attr('data-container'),\n                            value: self.escapeHtml($(value).attr('data-value'))\n                        };\n\n                        filters.push(filter);\n\n                        $(value).find('a').on('click', function (e) {\n                            $(this).parent().addClass('am-item-removed');\n                            $.mage.amShopbyFilterAbstract.prototype.renderShowButton(e, this);\n                            self.apply(filter);\n\n                            if (e) {\n                                e.stopPropagation();\n                                e.preventDefault();\n                            }\n                        });\n\n                        if (filters.length) {\n                            $.each(filters, function (index, filter) {\n                                self.checkInForm(filter);\n                            });\n                        }\n                    });\n                }\n            });\n        },\n\n        escapeHtml: function (text) {\n            var map = {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                '\"': '&quot;',\n                \"'\": '&#039;'\n            };\n\n            return text.replace(/[&<>\"']/g, function (m) {\n                return map[m];\n            });\n        },\n\n        apply: function (filter) {\n            var link = $('[data-container=\"' + filter.attribute + '\"][data-value=\"' + filter.value + '\"] .-remove').attr('href');\n\n            try {\n                var self = this,\n\n                    value = filter.value;\n\n                if (filter.attribute == 'price') {\n                    var values = filter.value.split('-'),\n                        fromValue = values[0] ? parseFloat(values[0]).toFixed() : '',\n                        toValue = values[1] ? parseFloat(values[1]).toFixed() : '',\n                        attrSelector = '[data-amshopby-filter=\"attr_' + filter.attribute + '\"]';\n\n                    value = fromValue + '-' + toValue;\n                }\n\n                self.setDefault(filter.attribute, value);\n\n                $(attrSelector).trigger('change');\n                $(attrSelector).trigger('sync', [ true ]);\n\n                if ($.mage.amShopbyAjax != undefined) {\n                    $.mage.amShopbyFilterAbstract.prototype.prepareTriggerAjax(null, null, true);\n                } else {\n                    window.location = link;\n                }\n            } catch (e) {\n                window.location = link;\n            }\n        },\n\n        clearBlock: function () {\n            if (!$('[data-am-js=\"shopby-container\"]').find('li').length) {\n                $('[data-am-js=\"shopby-container\"]').remove();\n                $('.filter-actions').remove();\n            }\n        },\n\n        setDefault: function (name, value) {\n            var valueSelector = '[name=\"amshopby[' + name + '][]\"]',\n                filters = $(valueSelector),\n                self = this;\n\n            filters.each(function (index, filter) {\n                var type = $(filter).prop('tagName');\n\n                switch (type) {\n                    case 'SELECT':\n                        if (name == 'price') {\n                            $(filter).find('option').each(function (index, element) {\n                                if (self.toValidView(element.value.split('-')) == this) {\n                                    element.selected = false;\n                                }\n                            }.bind(value));\n                        } else {\n                            $(filter).find('[value=\"' + value + '\"]').removeAttr('selected', 'selected');\n                        }\n\n                        break;\n                    case 'INPUT':\n                        var selected = '';\n\n                        if ($(filter).attr('type') != 'text' && $(filter).attr('type') != 'hidden') {\n                            selected = $(valueSelector + '[value=\"' + value + '\"]');\n                            selected.removeAttr('checked');\n                            selected.siblings('.swatch-option.selected').removeClass('selected');\n                        } else if (($(filter).attr('type') == 'hidden' && self.isEquals(name, filter.value, value))\n                            || name == 'price'\n                        ) {\n                            filter.value = '';\n                        }\n\n                        break;\n                }\n            });\n        },\n\n        isEquals: function (name, filterValue, value) {\n            var values = value.split('-'),\n                filterValues = filterValue.split('-');\n\n            if (values.length > 1) {\n                filterValue = this.toValidView(filterValues);\n                value = this.toValidView(values);\n            }\n\n            return filterValue == value;\n        },\n\n        toValidView: function (values) {\n            values[0] = values[0] ? parseFloat(values[0]).toFixed() : values[0];\n            values[1] = values[1] ? parseFloat(values[1]).toFixed() : values[1];\n\n            return values[0] + '-' + values[1];\n        },\n\n        sliderDefault: function (name) {\n            var valueSelector = '[name=\"amshopby[' + name + '][]\"]',\n                slider = $(valueSelector).siblings('[amshopby-slider-id=\"slider\"]');\n\n            if (slider.length) {\n                var $parent = $(valueSelector).parent();\n\n                $(slider[0]).slider('values', [$parent.attr('data-min'), $parent.attr('data-max')]);\n                $(slider).siblings('[data-am-js=\"slider-display\"]').text($parent.attr('data-min') + ' - ' + $parent.attr('data-max'));\n            }\n        },\n\n        fromToDefault: function (name) {\n            var range = $('[name=\"amshopby[' + name + '][]\"]').siblings('.range');\n\n            if (range.length) {\n                var from = range.find('[amshopby-fromto-id=\"from\"]'),\n                    to = range.find('[amshopby-fromto-id=\"to\"]'),\n                    digits = $(from).attr('validate-digits-range'),\n                    regexp = /\\[([\\d\\.]+)-([\\d\\.]+)\\]/g,\n                    ranges = regexp.exec(digits);\n\n                $(from).val(ranges[1]);\n                $(to).val(ranges[2]);\n            }\n        },\n\n        checkInForm: function (filter) {\n            var name = filter.attribute,\n                value = filter.value,\n                notExistValue = true;\n\n            $('[name=\"amshopby[' + name + '][]\"]').each(function (index, item) {\n                if (!item.value || item.value == value) {\n                    notExistValue = false;\n                }\n            });\n\n            if (notExistValue) {\n                $('#layered-filter-block').append('<form class=\"am_saved_filter_values\" data-amshopby-filter=\"attr_' + name + '\"><input value=\"' + value + '\" type=\"hidden\" name=\"amshopby[' + name + '][]\"></form>');\n            }\n        }\n    });\n});\n","Amasty_ShopbyLite/js/chosen/chosen.jquery.js":"/*!\nChosen, a Select Box Enhancer for jQuery and Prototype\nby Patrick Filler for Harvest, http://getharvest.com\n\nVersion 1.6.2\nFull source at https://github.com/harvesthq/chosen\nCopyright (c) 2011-2016 Harvest http://getharvest.com\n\nMIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md\nThis file is generated by `grunt build`, do not edit it by hand.\n*/\ndefine([\n  \"jquery\",\n], function (jQuery) {\n(function() {\n  var $, AbstractChosen, Chosen, SelectParser, _ref,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  SelectParser = (function() {\n    function SelectParser() {\n      this.options_index = 0;\n      this.parsed = [];\n    }\n\n    SelectParser.prototype.add_node = function(child) {\n      if (child.nodeName.toUpperCase() === \"OPTGROUP\") {\n        return this.add_group(child);\n      } else {\n        return this.add_option(child);\n      }\n    };\n\n    SelectParser.prototype.add_group = function(group) {\n      var group_position, option, _i, _len, _ref, _results;\n      group_position = this.parsed.length;\n      this.parsed.push({\n        array_index: group_position,\n        group: true,\n        label: this.escapeExpression(group.label),\n        title: group.title ? group.title : void 0,\n        children: 0,\n        disabled: group.disabled,\n        classes: group.className\n      });\n      _ref = group.childNodes;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        option = _ref[_i];\n        _results.push(this.add_option(option, group_position, group.disabled));\n      }\n      return _results;\n    };\n\n    SelectParser.prototype.add_option = function(option, group_position, group_disabled) {\n      if (option.nodeName.toUpperCase() === \"OPTION\") {\n        if (option.text !== \"\") {\n          if (group_position != null) {\n            this.parsed[group_position].children += 1;\n          }\n          this.parsed.push({\n            array_index: this.parsed.length,\n            options_index: this.options_index,\n            value: option.value,\n            text: option.text,\n            html: option.innerHTML,\n            title: option.title ? option.title : void 0,\n            selected: option.selected,\n            disabled: group_disabled === true ? group_disabled : option.disabled,\n            group_array_index: group_position,\n            group_label: group_position != null ? this.parsed[group_position].label : null,\n            classes: option.className,\n            style: option.style.cssText\n          });\n        } else {\n          this.parsed.push({\n            array_index: this.parsed.length,\n            options_index: this.options_index,\n            empty: true\n          });\n        }\n        return this.options_index += 1;\n      }\n    };\n\n    SelectParser.prototype.escapeExpression = function(text) {\n      var map, unsafe_chars;\n      if ((text == null) || text === false) {\n        return \"\";\n      }\n      if (!/[\\&\\<\\>\\\"\\'\\`]/.test(text)) {\n        return text;\n      }\n      map = {\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': \"&quot;\",\n        \"'\": \"&#x27;\",\n        \"`\": \"&#x60;\"\n      };\n      unsafe_chars = /&(?!\\w+;)|[\\<\\>\\\"\\'\\`]/g;\n      return text.replace(unsafe_chars, function(chr) {\n        return map[chr] || \"&amp;\";\n      });\n    };\n\n    return SelectParser;\n\n  })();\n\n  SelectParser.select_to_array = function(select) {\n    var child, parser, _i, _len, _ref;\n    parser = new SelectParser();\n    _ref = select.childNodes;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      child = _ref[_i];\n      parser.add_node(child);\n    }\n    return parser.parsed;\n  };\n\n  AbstractChosen = (function() {\n    function AbstractChosen(form_field, options) {\n      this.form_field = form_field;\n      this.options = options != null ? options : {};\n      if (!AbstractChosen.browser_is_supported()) {\n        return;\n      }\n      this.is_multiple = this.form_field.multiple;\n      this.set_default_text();\n      this.set_default_values();\n      this.setup();\n      this.set_up_html();\n      this.register_observers();\n      this.on_ready();\n    }\n\n    AbstractChosen.prototype.set_default_values = function() {\n      var _this = this;\n      this.click_test_action = function(evt) {\n        return _this.test_active_click(evt);\n      };\n      this.activate_action = function(evt) {\n        return _this.activate_field(evt);\n      };\n      this.active_field = false;\n      this.mouse_on_container = false;\n      this.results_showing = false;\n      this.result_highlighted = null;\n      this.allow_single_deselect = (this.options.allow_single_deselect != null) && (this.form_field.options[0] != null) && this.form_field.options[0].text === \"\" ? this.options.allow_single_deselect : false;\n      this.disable_search_threshold = this.options.disable_search_threshold || 0;\n      this.disable_search = this.options.disable_search || false;\n      this.enable_split_word_search = this.options.enable_split_word_search != null ? this.options.enable_split_word_search : true;\n      this.group_search = this.options.group_search != null ? this.options.group_search : true;\n      this.search_contains = this.options.search_contains || false;\n      this.single_backstroke_delete = this.options.single_backstroke_delete != null ? this.options.single_backstroke_delete : true;\n      this.max_selected_options = this.options.max_selected_options || Infinity;\n      this.inherit_select_classes = this.options.inherit_select_classes || false;\n      this.display_selected_options = this.options.display_selected_options != null ? this.options.display_selected_options : true;\n      this.display_disabled_options = this.options.display_disabled_options != null ? this.options.display_disabled_options : true;\n      this.include_group_label_in_selected = this.options.include_group_label_in_selected || false;\n      this.max_shown_results = this.options.max_shown_results || Number.POSITIVE_INFINITY;\n      return this.case_sensitive_search = this.options.case_sensitive_search || false;\n    };\n\n    AbstractChosen.prototype.set_default_text = function() {\n      if (this.form_field.getAttribute(\"data-placeholder\")) {\n        this.default_text = this.form_field.getAttribute(\"data-placeholder\");\n      } else if (this.is_multiple) {\n        this.default_text = this.options.placeholder_text_multiple || this.options.placeholder_text || AbstractChosen.default_multiple_text;\n      } else {\n        this.default_text = this.options.placeholder_text_single || this.options.placeholder_text || AbstractChosen.default_single_text;\n      }\n      return this.results_none_found = this.form_field.getAttribute(\"data-no_results_text\") || this.options.no_results_text || AbstractChosen.default_no_result_text;\n    };\n\n    AbstractChosen.prototype.choice_label = function(item) {\n      if (this.include_group_label_in_selected && (item.group_label != null)) {\n        return \"<b class='group-name'>\" + item.group_label + \"</b>\" + item.html;\n      } else {\n        return item.html;\n      }\n    };\n\n    AbstractChosen.prototype.mouse_enter = function() {\n      return this.mouse_on_container = true;\n    };\n\n    AbstractChosen.prototype.mouse_leave = function() {\n      return this.mouse_on_container = false;\n    };\n\n    AbstractChosen.prototype.input_focus = function(evt) {\n      var _this = this;\n      if (this.is_multiple) {\n        if (!this.active_field) {\n          return setTimeout((function() {\n            return _this.container_mousedown();\n          }), 50);\n        }\n      } else {\n        if (!this.active_field) {\n          return this.activate_field();\n        }\n      }\n    };\n\n    AbstractChosen.prototype.input_blur = function(evt) {\n      var _this = this;\n      if (!this.mouse_on_container) {\n        this.active_field = false;\n        return setTimeout((function() {\n          return _this.blur_test();\n        }), 100);\n      }\n    };\n\n    AbstractChosen.prototype.results_option_build = function(options) {\n      var content, data, data_content, shown_results, _i, _len, _ref;\n      content = '';\n      shown_results = 0;\n      _ref = this.results_data;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        data = _ref[_i];\n        data_content = '';\n        if (data.group) {\n          data_content = this.result_add_group(data);\n        } else {\n          data_content = this.result_add_option(data);\n        }\n        if (data_content !== '') {\n          shown_results++;\n          content += data_content;\n        }\n        if (options != null ? options.first : void 0) {\n          if (data.selected && this.is_multiple) {\n            this.choice_build(data);\n          } else if (data.selected && !this.is_multiple) {\n            this.single_set_selected_text(this.choice_label(data));\n          }\n        }\n        if (shown_results >= this.max_shown_results) {\n          break;\n        }\n      }\n      return content;\n    };\n\n    AbstractChosen.prototype.result_add_option = function(option) {\n      var classes, option_el;\n      if (!option.search_match) {\n        return '';\n      }\n      if (!this.include_option_in_results(option)) {\n        return '';\n      }\n      classes = [];\n      if (!option.disabled && !(option.selected && this.is_multiple)) {\n        classes.push(\"active-result\");\n      }\n      if (option.disabled && !(option.selected && this.is_multiple)) {\n        classes.push(\"disabled-result\");\n      }\n      if (option.selected) {\n        classes.push(\"result-selected\");\n      }\n      if (option.group_array_index != null) {\n        classes.push(\"group-option\");\n      }\n      if (option.classes !== \"\") {\n        classes.push(option.classes);\n      }\n      option_el = document.createElement(\"li\");\n      option_el.className = classes.join(\" \");\n      option_el.style.cssText = option.style;\n      option_el.setAttribute(\"data-option-array-index\", option.array_index);\n      option_el.innerHTML = option.search_text;\n      if (option.title) {\n        option_el.title = option.title;\n      }\n      return this.outerHTML(option_el);\n    };\n\n    AbstractChosen.prototype.result_add_group = function(group) {\n      var classes, group_el;\n      if (!(group.search_match || group.group_match)) {\n        return '';\n      }\n      if (!(group.active_options > 0)) {\n        return '';\n      }\n      classes = [];\n      classes.push(\"group-result\");\n      if (group.classes) {\n        classes.push(group.classes);\n      }\n      group_el = document.createElement(\"li\");\n      group_el.className = classes.join(\" \");\n      group_el.innerHTML = group.search_text;\n      if (group.title) {\n        group_el.title = group.title;\n      }\n      return this.outerHTML(group_el);\n    };\n\n    AbstractChosen.prototype.results_update_field = function() {\n      this.set_default_text();\n      if (!this.is_multiple) {\n        this.results_reset_cleanup();\n      }\n      this.result_clear_highlight();\n      this.results_build();\n      if (this.results_showing) {\n        return this.winnow_results();\n      }\n    };\n\n    AbstractChosen.prototype.reset_single_select_options = function() {\n      var result, _i, _len, _ref, _results;\n      _ref = this.results_data;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        result = _ref[_i];\n        if (result.selected) {\n          _results.push(result.selected = false);\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    AbstractChosen.prototype.results_toggle = function() {\n      if (this.results_showing) {\n        return this.results_hide();\n      } else {\n        return this.results_show();\n      }\n    };\n\n    AbstractChosen.prototype.results_search = function(evt) {\n      if (this.results_showing) {\n        return this.winnow_results();\n      } else {\n        return this.results_show();\n      }\n    };\n\n    AbstractChosen.prototype.winnow_results = function() {\n      var escapedSearchText, option, regex, results, results_group, searchText, startpos, text, zregex, _i, _len, _ref;\n      this.no_results_clear();\n      results = 0;\n      searchText = this.get_search_text();\n      escapedSearchText = searchText.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n      zregex = new RegExp(escapedSearchText, 'i');\n      regex = this.get_search_regex(escapedSearchText);\n      _ref = this.results_data;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        option = _ref[_i];\n        option.search_match = false;\n        results_group = null;\n        if (this.include_option_in_results(option)) {\n          if (option.group) {\n            option.group_match = false;\n            option.active_options = 0;\n          }\n          if ((option.group_array_index != null) && this.results_data[option.group_array_index]) {\n            results_group = this.results_data[option.group_array_index];\n            if (results_group.active_options === 0 && results_group.search_match) {\n              results += 1;\n            }\n            results_group.active_options += 1;\n          }\n          option.search_text = option.group ? option.label : option.html;\n          if (!(option.group && !this.group_search)) {\n            option.search_match = this.search_string_match(option.search_text, regex);\n            if (option.search_match && !option.group) {\n              results += 1;\n            }\n            if (option.search_match) {\n              if (searchText.length) {\n                startpos = option.search_text.search(zregex);\n                text = option.search_text.substr(0, startpos + searchText.length) + '</em>' + option.search_text.substr(startpos + searchText.length);\n                option.search_text = text.substr(0, startpos) + '<em>' + text.substr(startpos);\n              }\n              if (results_group != null) {\n                results_group.group_match = true;\n              }\n            } else if ((option.group_array_index != null) && this.results_data[option.group_array_index].search_match) {\n              option.search_match = true;\n            }\n          }\n        }\n      }\n      this.result_clear_highlight();\n      if (results < 1 && searchText.length) {\n        this.update_results_content(\"\");\n        return this.no_results(searchText);\n      } else {\n        this.update_results_content(this.results_option_build());\n        return this.winnow_results_set_highlight();\n      }\n    };\n\n    AbstractChosen.prototype.get_search_regex = function(escaped_search_string) {\n      var regex_anchor, regex_flag;\n      regex_anchor = this.search_contains ? \"\" : \"^\";\n      regex_flag = this.case_sensitive_search ? \"\" : \"i\";\n      return new RegExp(regex_anchor + escaped_search_string, regex_flag);\n    };\n\n    AbstractChosen.prototype.search_string_match = function(search_string, regex) {\n      var part, parts, _i, _len;\n      if (regex.test(search_string)) {\n        return true;\n      } else if (this.enable_split_word_search && (search_string.indexOf(\" \") >= 0 || search_string.indexOf(\"[\") === 0)) {\n        parts = search_string.replace(/\\[|\\]/g, \"\").split(\" \");\n        if (parts.length) {\n          for (_i = 0, _len = parts.length; _i < _len; _i++) {\n            part = parts[_i];\n            if (regex.test(part)) {\n              return true;\n            }\n          }\n        }\n      }\n    };\n\n    AbstractChosen.prototype.choices_count = function() {\n      var option, _i, _len, _ref;\n      if (this.selected_option_count != null) {\n        return this.selected_option_count;\n      }\n      this.selected_option_count = 0;\n      _ref = this.form_field.options;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        option = _ref[_i];\n        if (option.selected) {\n          this.selected_option_count += 1;\n        }\n      }\n      return this.selected_option_count;\n    };\n\n    AbstractChosen.prototype.choices_click = function(evt) {\n      evt.preventDefault();\n      if (!(this.results_showing || this.is_disabled)) {\n        return this.results_show();\n      }\n    };\n\n    AbstractChosen.prototype.keyup_checker = function(evt) {\n      var stroke, _ref;\n      stroke = (_ref = evt.which) != null ? _ref : evt.keyCode;\n      this.search_field_scale();\n      switch (stroke) {\n        case 8:\n          if (this.is_multiple && this.backstroke_length < 1 && this.choices_count() > 0) {\n            return this.keydown_backstroke();\n          } else if (!this.pending_backstroke) {\n            this.result_clear_highlight();\n            return this.results_search();\n          }\n          break;\n        case 13:\n          evt.preventDefault();\n          if (this.results_showing) {\n            return this.result_select(evt);\n          }\n          break;\n        case 27:\n          if (this.results_showing) {\n            this.results_hide();\n          }\n          return true;\n        case 9:\n        case 38:\n        case 40:\n        case 16:\n        case 91:\n        case 17:\n        case 18:\n          break;\n        default:\n          return this.results_search();\n      }\n    };\n\n    AbstractChosen.prototype.clipboard_event_checker = function(evt) {\n      var _this = this;\n      return setTimeout((function() {\n        return _this.results_search();\n      }), 50);\n    };\n\n    AbstractChosen.prototype.container_width = function() {\n      if (this.options.width != null) {\n        return this.options.width;\n      } else {\n        return \"\" + this.form_field.offsetWidth + \"px\";\n      }\n    };\n\n    AbstractChosen.prototype.include_option_in_results = function(option) {\n      if (this.is_multiple && (!this.display_selected_options && option.selected)) {\n        return false;\n      }\n      if (!this.display_disabled_options && option.disabled) {\n        return false;\n      }\n      if (option.empty) {\n        return false;\n      }\n      return true;\n    };\n\n    AbstractChosen.prototype.search_results_touchstart = function(evt) {\n      this.touch_started = true;\n      return this.search_results_mouseover(evt);\n    };\n\n    AbstractChosen.prototype.search_results_touchmove = function(evt) {\n      this.touch_started = false;\n      return this.search_results_mouseout(evt);\n    };\n\n    AbstractChosen.prototype.search_results_touchend = function(evt) {\n      if (this.touch_started) {\n        return this.search_results_mouseup(evt);\n      }\n    };\n\n    AbstractChosen.prototype.outerHTML = function(element) {\n      var tmp;\n      if (element.outerHTML) {\n        return element.outerHTML;\n      }\n      tmp = document.createElement(\"div\");\n      tmp.appendChild(element);\n      return tmp.innerHTML;\n    };\n\n    AbstractChosen.browser_is_supported = function() {\n      if (\"Microsoft Internet Explorer\" === window.navigator.appName) {\n        return document.documentMode >= 8;\n      }\n      if (/iP(od|hone)/i.test(window.navigator.userAgent) || /IEMobile/i.test(window.navigator.userAgent) || /Windows Phone/i.test(window.navigator.userAgent) || /BlackBerry/i.test(window.navigator.userAgent) || /BB10/i.test(window.navigator.userAgent) || /Android.*Mobile/i.test(window.navigator.userAgent)) {\n        return false;\n      }\n      return true;\n    };\n\n    AbstractChosen.default_multiple_text = \"Select Some Options\";\n\n    AbstractChosen.default_single_text = \"Select an Option\";\n\n    AbstractChosen.default_no_result_text = \"No results match\";\n\n    return AbstractChosen;\n\n  })();\n\n  $ = jQuery;\n\n  $.fn.extend({\n    chosen: function(options) {\n      if (!AbstractChosen.browser_is_supported()) {\n        return this;\n      }\n      return this.each(function(input_field) {\n        var $this, chosen;\n        $this = $(this);\n        chosen = $this.data('chosen');\n        if (options === 'destroy') {\n          if (chosen instanceof Chosen) {\n            chosen.destroy();\n          }\n          return;\n        }\n        if (!(chosen instanceof Chosen)) {\n          $this.data('chosen', new Chosen(this, options));\n        }\n      });\n    }\n  });\n\n  Chosen = (function(_super) {\n    __extends(Chosen, _super);\n\n    function Chosen() {\n      _ref = Chosen.__super__.constructor.apply(this, arguments);\n      return _ref;\n    }\n\n    Chosen.prototype.setup = function() {\n      this.form_field_jq = $(this.form_field);\n      this.current_selectedIndex = this.form_field.selectedIndex;\n      return this.is_rtl = this.form_field_jq.hasClass(\"chosen-rtl\");\n    };\n\n    Chosen.prototype.set_up_html = function() {\n      var container_classes, container_props;\n      container_classes = [\"chosen-container\"];\n      container_classes.push(\"chosen-container-\" + (this.is_multiple ? \"multi\" : \"single\"));\n      if (this.inherit_select_classes && this.form_field.className) {\n        container_classes.push(this.form_field.className);\n      }\n      if (this.is_rtl) {\n        container_classes.push(\"chosen-rtl\");\n      }\n      container_props = {\n        'class': container_classes.join(' '),\n        'style': \"width: \" + (this.container_width()) + \";\",\n        'title': this.form_field.title\n      };\n      if (this.form_field.id.length) {\n        container_props.id = this.form_field.id.replace(/[^\\w]/g, '_') + \"_chosen\";\n      }\n      this.container = $(\"<div />\", container_props);\n      if (this.is_multiple) {\n        this.container.html('<ul class=\"chosen-choices\"><li class=\"search-field\"><input type=\"text\" value=\"' + this.default_text + '\" class=\"default\" autocomplete=\"off\" style=\"width:25px;\" /></li></ul><div class=\"chosen-drop\"><ul class=\"chosen-results\"></ul></div>');\n      } else {\n        this.container.html('<a class=\"chosen-single chosen-default\"><span>' + this.default_text + '</span><div><b></b></div></a><div class=\"chosen-drop\"><div class=\"chosen-search\"><input type=\"text\" autocomplete=\"off\" /></div><ul class=\"chosen-results\"></ul></div>');\n      }\n      this.form_field_jq.hide().after(this.container);\n      this.dropdown = this.container.find('div.chosen-drop').first();\n      this.search_field = this.container.find('input').first();\n      this.search_results = this.container.find('ul.chosen-results').first();\n      this.search_field_scale();\n      this.search_no_results = this.container.find('li.no-results').first();\n      if (this.is_multiple) {\n        this.search_choices = this.container.find('ul.chosen-choices').first();\n        this.search_container = this.container.find('li.search-field').first();\n      } else {\n        this.search_container = this.container.find('div.chosen-search').first();\n        this.selected_item = this.container.find('.chosen-single').first();\n      }\n      this.results_build();\n      this.set_tab_index();\n      return this.set_label_behavior();\n    };\n\n    Chosen.prototype.on_ready = function() {\n      return this.form_field_jq.trigger(\"chosen:ready\", {\n        chosen: this\n      });\n    };\n\n    Chosen.prototype.register_observers = function() {\n      var _this = this;\n      this.container.bind('touchstart.chosen', function(evt) {\n        _this.container_mousedown(evt);\n        return evt.preventDefault();\n      });\n      this.container.bind('touchend.chosen', function(evt) {\n        _this.container_mouseup(evt);\n        return evt.preventDefault();\n      });\n      this.container.bind('mousedown.chosen', function(evt) {\n        _this.container_mousedown(evt);\n      });\n      this.container.bind('mouseup.chosen', function(evt) {\n        _this.container_mouseup(evt);\n      });\n      this.container.bind('mouseenter.chosen', function(evt) {\n        _this.mouse_enter(evt);\n      });\n      this.container.bind('mouseleave.chosen', function(evt) {\n        _this.mouse_leave(evt);\n      });\n      this.search_results.bind('mouseup.chosen', function(evt) {\n        _this.search_results_mouseup(evt);\n      });\n      this.search_results.bind('mouseover.chosen', function(evt) {\n        _this.search_results_mouseover(evt);\n      });\n      this.search_results.bind('mouseout.chosen', function(evt) {\n        _this.search_results_mouseout(evt);\n      });\n      this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen', function(evt) {\n        _this.search_results_mousewheel(evt);\n      });\n      this.search_results.bind('touchstart.chosen', function(evt) {\n        _this.search_results_touchstart(evt);\n      });\n      this.search_results.bind('touchmove.chosen', function(evt) {\n        _this.search_results_touchmove(evt);\n      });\n      this.search_results.bind('touchend.chosen', function(evt) {\n        _this.search_results_touchend(evt);\n      });\n      this.form_field_jq.bind(\"chosen:updated.chosen\", function(evt) {\n        _this.results_update_field(evt);\n      });\n      this.form_field_jq.bind(\"chosen:activate.chosen\", function(evt) {\n        _this.activate_field(evt);\n      });\n      this.form_field_jq.bind(\"chosen:open.chosen\", function(evt) {\n        _this.container_mousedown(evt);\n      });\n      this.form_field_jq.bind(\"chosen:close.chosen\", function(evt) {\n        _this.input_blur(evt);\n      });\n      this.search_field.bind('blur.chosen', function(evt) {\n        _this.input_blur(evt);\n      });\n      this.search_field.bind('keyup.chosen', function(evt) {\n        _this.keyup_checker(evt);\n      });\n      this.search_field.bind('keydown.chosen', function(evt) {\n        _this.keydown_checker(evt);\n      });\n      this.search_field.bind('focus.chosen', function(evt) {\n        _this.input_focus(evt);\n      });\n      this.search_field.bind('cut.chosen', function(evt) {\n        _this.clipboard_event_checker(evt);\n      });\n      this.search_field.bind('paste.chosen', function(evt) {\n        _this.clipboard_event_checker(evt);\n      });\n      if (this.is_multiple) {\n        return this.search_choices.bind('click.chosen', function(evt) {\n          _this.choices_click(evt);\n        });\n      } else {\n        return this.container.bind('click.chosen', function(evt) {\n          evt.preventDefault();\n        });\n      }\n    };\n\n    Chosen.prototype.destroy = function() {\n      $(this.container[0].ownerDocument).unbind(\"click.chosen\", this.click_test_action);\n      if (this.search_field[0].tabIndex) {\n        this.form_field_jq[0].tabIndex = this.search_field[0].tabIndex;\n      }\n      this.container.remove();\n      this.form_field_jq.removeData('chosen');\n      return this.form_field_jq.show();\n    };\n\n    Chosen.prototype.search_field_disabled = function() {\n      this.is_disabled = this.form_field_jq[0].disabled;\n      if (this.is_disabled) {\n        this.container.addClass('chosen-disabled');\n        this.search_field[0].disabled = true;\n        if (!this.is_multiple) {\n          this.selected_item.unbind(\"focus.chosen\", this.activate_action);\n        }\n        return this.close_field();\n      } else {\n        this.container.removeClass('chosen-disabled');\n        this.search_field[0].disabled = false;\n        if (!this.is_multiple) {\n          return this.selected_item.bind(\"focus.chosen\", this.activate_action);\n        }\n      }\n    };\n\n    Chosen.prototype.container_mousedown = function(evt) {\n      if (!this.is_disabled) {\n        if (evt && evt.type === \"mousedown\" && !this.results_showing) {\n          evt.preventDefault();\n        }\n        if (!((evt != null) && ($(evt.target)).hasClass(\"search-choice-close\"))) {\n          if (!this.active_field) {\n            if (this.is_multiple) {\n              this.search_field.val(\"\");\n            }\n            $(this.container[0].ownerDocument).bind('click.chosen', this.click_test_action);\n            this.results_show();\n          } else if (!this.is_multiple && evt && (($(evt.target)[0] === this.selected_item[0]) || $(evt.target).parents(\"a.chosen-single\").length)) {\n            evt.preventDefault();\n            this.results_toggle();\n          }\n          return this.activate_field();\n        }\n      }\n    };\n\n    Chosen.prototype.container_mouseup = function(evt) {\n      if (evt.target.nodeName === \"ABBR\" && !this.is_disabled) {\n        return this.results_reset(evt);\n      }\n    };\n\n    Chosen.prototype.search_results_mousewheel = function(evt) {\n      var delta;\n      if (evt.originalEvent) {\n        delta = evt.originalEvent.deltaY || -evt.originalEvent.wheelDelta || evt.originalEvent.detail;\n      }\n      if (delta != null) {\n        evt.preventDefault();\n        if (evt.type === 'DOMMouseScroll') {\n          delta = delta * 40;\n        }\n        return this.search_results.scrollTop(delta + this.search_results.scrollTop());\n      }\n    };\n\n    Chosen.prototype.blur_test = function(evt) {\n      if (!this.active_field && this.container.hasClass(\"chosen-container-active\")) {\n        return this.close_field();\n      }\n    };\n\n    Chosen.prototype.close_field = function() {\n      $(this.container[0].ownerDocument).unbind(\"click.chosen\", this.click_test_action);\n      this.active_field = false;\n      this.results_hide();\n      this.container.removeClass(\"chosen-container-active\");\n      this.clear_backstroke();\n      this.show_search_field_default();\n      return this.search_field_scale();\n    };\n\n    Chosen.prototype.activate_field = function() {\n      this.container.addClass(\"chosen-container-active\");\n      this.active_field = true;\n      this.search_field.val(this.search_field.val());\n      return this.search_field.focus();\n    };\n\n    Chosen.prototype.test_active_click = function(evt) {\n      var active_container;\n      active_container = $(evt.target).closest('.chosen-container');\n      if (active_container.length && this.container[0] === active_container[0]) {\n        return this.active_field = true;\n      } else {\n        return this.close_field();\n      }\n    };\n\n    Chosen.prototype.results_build = function() {\n      this.parsing = true;\n      this.selected_option_count = null;\n      this.results_data = SelectParser.select_to_array(this.form_field);\n      if (this.is_multiple) {\n        this.search_choices.find(\"li.search-choice\").remove();\n      } else if (!this.is_multiple) {\n        this.single_set_selected_text();\n        if (this.disable_search || this.form_field.options.length <= this.disable_search_threshold) {\n          this.search_field[0].readOnly = true;\n          this.container.addClass(\"chosen-container-single-nosearch\");\n        } else {\n          this.search_field[0].readOnly = false;\n          this.container.removeClass(\"chosen-container-single-nosearch\");\n        }\n      }\n      this.update_results_content(this.results_option_build({\n        first: true\n      }));\n      this.search_field_disabled();\n      this.show_search_field_default();\n      this.search_field_scale();\n      return this.parsing = false;\n    };\n\n    Chosen.prototype.result_do_highlight = function(el) {\n      var high_bottom, high_top, maxHeight, visible_bottom, visible_top;\n      if (el.length) {\n        this.result_clear_highlight();\n        this.result_highlight = el;\n        this.result_highlight.addClass(\"highlighted\");\n        maxHeight = parseInt(this.search_results.css(\"maxHeight\"), 10);\n        visible_top = this.search_results.scrollTop();\n        visible_bottom = maxHeight + visible_top;\n        high_top = this.result_highlight.position().top + this.search_results.scrollTop();\n        high_bottom = high_top + this.result_highlight.outerHeight();\n        if (high_bottom >= visible_bottom) {\n          return this.search_results.scrollTop((high_bottom - maxHeight) > 0 ? high_bottom - maxHeight : 0);\n        } else if (high_top < visible_top) {\n          return this.search_results.scrollTop(high_top);\n        }\n      }\n    };\n\n    Chosen.prototype.result_clear_highlight = function() {\n      if (this.result_highlight) {\n        this.result_highlight.removeClass(\"highlighted\");\n      }\n      return this.result_highlight = null;\n    };\n\n    Chosen.prototype.results_show = function() {\n      if (this.is_multiple && this.max_selected_options <= this.choices_count()) {\n        this.form_field_jq.trigger(\"chosen:maxselected\", {\n          chosen: this\n        });\n        return false;\n      }\n      this.container.addClass(\"chosen-with-drop\");\n      this.results_showing = true;\n      this.search_field.focus();\n      this.search_field.val(this.search_field.val());\n      this.winnow_results();\n      return this.form_field_jq.trigger(\"chosen:showing_dropdown\", {\n        chosen: this\n      });\n    };\n\n    Chosen.prototype.update_results_content = function(content) {\n      return this.search_results.html(content);\n    };\n\n    Chosen.prototype.results_hide = function() {\n      if (this.results_showing) {\n        this.result_clear_highlight();\n        this.container.removeClass(\"chosen-with-drop\");\n        this.form_field_jq.trigger(\"chosen:hiding_dropdown\", {\n          chosen: this\n        });\n      }\n      return this.results_showing = false;\n    };\n\n    Chosen.prototype.set_tab_index = function(el) {\n      var ti;\n      if (this.form_field.tabIndex) {\n        ti = this.form_field.tabIndex;\n        this.form_field.tabIndex = -1;\n        return this.search_field[0].tabIndex = ti;\n      }\n    };\n\n    Chosen.prototype.set_label_behavior = function() {\n      var _this = this;\n      this.form_field_label = this.form_field_jq.parents(\"label\");\n      if (!this.form_field_label.length && this.form_field.id.length) {\n        this.form_field_label = $(\"label[for='\" + this.form_field.id + \"']\");\n      }\n      if (this.form_field_label.length > 0) {\n        return this.form_field_label.bind('click.chosen', function(evt) {\n          if (_this.is_multiple) {\n            return _this.container_mousedown(evt);\n          } else {\n            return _this.activate_field();\n          }\n        });\n      }\n    };\n\n    Chosen.prototype.show_search_field_default = function() {\n      if (this.is_multiple && this.choices_count() < 1 && !this.active_field) {\n        this.search_field.val(this.default_text);\n        return this.search_field.addClass(\"default\");\n      } else {\n        this.search_field.val(\"\");\n        return this.search_field.removeClass(\"default\");\n      }\n    };\n\n    Chosen.prototype.search_results_mouseup = function(evt) {\n      var target;\n      target = $(evt.target).hasClass(\"active-result\") ? $(evt.target) : $(evt.target).parents(\".active-result\").first();\n      if (target.length) {\n        this.result_highlight = target;\n        this.result_select(evt);\n        return this.search_field.focus();\n      }\n    };\n\n    Chosen.prototype.search_results_mouseover = function(evt) {\n      var target;\n      target = $(evt.target).hasClass(\"active-result\") ? $(evt.target) : $(evt.target).parents(\".active-result\").first();\n      if (target) {\n        return this.result_do_highlight(target);\n      }\n    };\n\n    Chosen.prototype.search_results_mouseout = function(evt) {\n      if ($(evt.target).hasClass(\"active-result\" || $(evt.target).parents('.active-result').first())) {\n        return this.result_clear_highlight();\n      }\n    };\n\n    Chosen.prototype.choice_build = function(item) {\n      var choice, close_link,\n        _this = this;\n      choice = $('<li />', {\n        \"class\": \"search-choice\"\n      }).html(\"<span>\" + (this.choice_label(item)) + \"</span>\");\n      if (item.disabled) {\n        choice.addClass('search-choice-disabled');\n      } else {\n        close_link = $('<a />', {\n          \"class\": 'search-choice-close',\n          'data-option-array-index': item.array_index\n        });\n        close_link.bind('click.chosen', function(evt) {\n          return _this.choice_destroy_link_click(evt);\n        });\n        choice.append(close_link);\n      }\n      return this.search_container.before(choice);\n    };\n\n    Chosen.prototype.choice_destroy_link_click = function(evt) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      if (!this.is_disabled) {\n        return this.choice_destroy($(evt.target));\n      }\n    };\n\n    Chosen.prototype.choice_destroy = function(link) {\n      if (this.result_deselect(link[0].getAttribute(\"data-option-array-index\"))) {\n        this.show_search_field_default();\n        if (this.is_multiple && this.choices_count() > 0 && this.search_field.val().length < 1) {\n          this.results_hide();\n        }\n        link.parents('li').first().remove();\n        return this.search_field_scale();\n      }\n    };\n\n    Chosen.prototype.results_reset = function() {\n      this.reset_single_select_options();\n      this.form_field.options[0].selected = true;\n      this.single_set_selected_text();\n      this.show_search_field_default();\n      this.results_reset_cleanup();\n      this.form_field_jq.trigger(\"change\");\n      if (this.active_field) {\n        return this.results_hide();\n      }\n    };\n\n    Chosen.prototype.results_reset_cleanup = function() {\n      this.current_selectedIndex = this.form_field.selectedIndex;\n      return this.selected_item.find(\"abbr\").remove();\n    };\n\n    Chosen.prototype.result_select = function(evt) {\n      var high, item;\n      if (this.result_highlight) {\n        high = this.result_highlight;\n        this.result_clear_highlight();\n        if (this.is_multiple && this.max_selected_options <= this.choices_count()) {\n          this.form_field_jq.trigger(\"chosen:maxselected\", {\n            chosen: this\n          });\n          return false;\n        }\n        if (this.is_multiple) {\n          high.removeClass(\"active-result\");\n        } else {\n          this.reset_single_select_options();\n        }\n        high.addClass(\"result-selected\");\n        item = this.results_data[high[0].getAttribute(\"data-option-array-index\")];\n        item.selected = true;\n        this.form_field.options[item.options_index].selected = true;\n        this.selected_option_count = null;\n        if (this.is_multiple) {\n          this.choice_build(item);\n        } else {\n          this.single_set_selected_text(this.choice_label(item));\n        }\n        if (!((evt.metaKey || evt.ctrlKey) && this.is_multiple)) {\n          this.results_hide();\n        }\n        this.show_search_field_default();\n        if (this.is_multiple || this.form_field.selectedIndex !== this.current_selectedIndex) {\n          this.form_field_jq.trigger(\"change\", {\n            'selected': this.form_field.options[item.options_index].value\n          });\n        }\n        this.current_selectedIndex = this.form_field.selectedIndex;\n        evt.preventDefault();\n        return this.search_field_scale();\n      }\n    };\n\n    Chosen.prototype.single_set_selected_text = function(text) {\n      if (text == null) {\n        text = this.default_text;\n      }\n      if (text === this.default_text) {\n        this.selected_item.addClass(\"chosen-default\");\n      } else {\n        this.single_deselect_control_build();\n        this.selected_item.removeClass(\"chosen-default\");\n      }\n      return this.selected_item.find(\"span\").html(text);\n    };\n\n    Chosen.prototype.result_deselect = function(pos) {\n      var result_data;\n      result_data = this.results_data[pos];\n      if (!this.form_field.options[result_data.options_index].disabled) {\n        result_data.selected = false;\n        this.form_field.options[result_data.options_index].selected = false;\n        this.selected_option_count = null;\n        this.result_clear_highlight();\n        if (this.results_showing) {\n          this.winnow_results();\n        }\n        this.form_field_jq.trigger(\"change\", {\n          deselected: this.form_field.options[result_data.options_index].value\n        });\n        this.search_field_scale();\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    Chosen.prototype.single_deselect_control_build = function() {\n      if (!this.allow_single_deselect) {\n        return;\n      }\n      if (!this.selected_item.find(\"abbr\").length) {\n        this.selected_item.find(\"span\").first().after(\"<abbr class=\\\"search-choice-close\\\"></abbr>\");\n      }\n      return this.selected_item.addClass(\"chosen-single-with-deselect\");\n    };\n\n    Chosen.prototype.get_search_text = function() {\n      return $('<div/>').text($.trim(this.search_field.val())).html();\n    };\n\n    Chosen.prototype.winnow_results_set_highlight = function() {\n      var do_high, selected_results;\n      selected_results = !this.is_multiple ? this.search_results.find(\".result-selected.active-result\") : [];\n      do_high = selected_results.length ? selected_results.first() : this.search_results.find(\".active-result\").first();\n      if (do_high != null) {\n        return this.result_do_highlight(do_high);\n      }\n    };\n\n    Chosen.prototype.no_results = function(terms) {\n      var no_results_html;\n      no_results_html = $('<li class=\"no-results\">' + this.results_none_found + ' \"<span></span>\"</li>');\n      no_results_html.find(\"span\").first().html(terms);\n      this.search_results.append(no_results_html);\n      return this.form_field_jq.trigger(\"chosen:no_results\", {\n        chosen: this\n      });\n    };\n\n    Chosen.prototype.no_results_clear = function() {\n      return this.search_results.find(\".no-results\").remove();\n    };\n\n    Chosen.prototype.keydown_arrow = function() {\n      var next_sib;\n      if (this.results_showing && this.result_highlight) {\n        next_sib = this.result_highlight.nextAll(\"li.active-result\").first();\n        if (next_sib) {\n          return this.result_do_highlight(next_sib);\n        }\n      } else {\n        return this.results_show();\n      }\n    };\n\n    Chosen.prototype.keyup_arrow = function() {\n      var prev_sibs;\n      if (!this.results_showing && !this.is_multiple) {\n        return this.results_show();\n      } else if (this.result_highlight) {\n        prev_sibs = this.result_highlight.prevAll(\"li.active-result\");\n        if (prev_sibs.length) {\n          return this.result_do_highlight(prev_sibs.first());\n        } else {\n          if (this.choices_count() > 0) {\n            this.results_hide();\n          }\n          return this.result_clear_highlight();\n        }\n      }\n    };\n\n    Chosen.prototype.keydown_backstroke = function() {\n      var next_available_destroy;\n      if (this.pending_backstroke) {\n        this.choice_destroy(this.pending_backstroke.find(\"a\").first());\n        return this.clear_backstroke();\n      } else {\n        next_available_destroy = this.search_container.siblings(\"li.search-choice\").last();\n        if (next_available_destroy.length && !next_available_destroy.hasClass(\"search-choice-disabled\")) {\n          this.pending_backstroke = next_available_destroy;\n          if (this.single_backstroke_delete) {\n            return this.keydown_backstroke();\n          } else {\n            return this.pending_backstroke.addClass(\"search-choice-focus\");\n          }\n        }\n      }\n    };\n\n    Chosen.prototype.clear_backstroke = function() {\n      if (this.pending_backstroke) {\n        this.pending_backstroke.removeClass(\"search-choice-focus\");\n      }\n      return this.pending_backstroke = null;\n    };\n\n    Chosen.prototype.keydown_checker = function(evt) {\n      var stroke, _ref1;\n      stroke = (_ref1 = evt.which) != null ? _ref1 : evt.keyCode;\n      this.search_field_scale();\n      if (stroke !== 8 && this.pending_backstroke) {\n        this.clear_backstroke();\n      }\n      switch (stroke) {\n        case 8:\n          this.backstroke_length = this.search_field.val().length;\n          break;\n        case 9:\n          if (this.results_showing && !this.is_multiple) {\n            this.result_select(evt);\n          }\n          this.mouse_on_container = false;\n          break;\n        case 13:\n          if (this.results_showing) {\n            evt.preventDefault();\n          }\n          break;\n        case 32:\n          if (this.disable_search) {\n            evt.preventDefault();\n          }\n          break;\n        case 38:\n          evt.preventDefault();\n          this.keyup_arrow();\n          break;\n        case 40:\n          evt.preventDefault();\n          this.keydown_arrow();\n          break;\n      }\n    };\n\n    Chosen.prototype.search_field_scale = function() {\n      var div, f_width, h, style, style_block, styles, w, _i, _len;\n      if (this.is_multiple) {\n        h = 0;\n        w = 0;\n        style_block = \"position:absolute; left: -1000px; top: -1000px; display:none;\";\n        styles = ['font-size', 'font-style', 'font-weight', 'font-family', 'line-height', 'text-transform', 'letter-spacing'];\n        for (_i = 0, _len = styles.length; _i < _len; _i++) {\n          style = styles[_i];\n          style_block += style + \":\" + this.search_field.css(style) + \";\";\n        }\n        div = $('<div />', {\n          'style': style_block\n        });\n        div.text(this.search_field.val());\n        $('body').append(div);\n        w = div.width() + 25;\n        div.remove();\n        f_width = this.container.outerWidth();\n        if (w > f_width - 10) {\n          w = f_width - 10;\n        }\n        return this.search_field.css({\n          'width': w + 'px'\n        });\n      }\n    };\n\n    return Chosen;\n\n  })(AbstractChosen);\n\n}).call(this);\n\n\n});\n","Amasty_CustomTabs/js/scroll-to-tabs.js":"/**\n *   Scroll to tabs widget\n */\n\ndefine([\n    'jquery',\n    'domReady!'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.scrollToTabs', {\n        options: {\n            scrollToTabs: true,\n            scrollToTabsDuration: 300,\n            offsetTop: 30\n        },\n\n        /**\n         * Widget initialization\n         * @private\n         *\n         * @returns {void}\n         */\n        _create: function () {\n            if (this.options.scrollToTabs) {\n                this._scrollToTabs();\n            }\n        },\n\n        /**\n         * @private\n         * @returns {void}\n         */\n        _scrollToTabs: function () {\n            var $element;\n\n            if (!window.location.hash) {\n                return;\n            }\n\n            $element = $('[href=\"' + location.hash + '\"]');\n\n            if ($element.length) {\n                $('html, body').stop().animate({\n                    scrollTop: $element.offset().top - this.options.offsetTop\n                }, this.options.scrollToTabsDuration, function() {\n                    $element.trigger('click');\n                });\n            }\n        }\n    });\n\n    return $.mage.scrollToTabs;\n});\n","Amasty_CustomTabs/js/collapsible-mixin.js":"/**\n * Mage collapsible mixin\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    return function (widget) {\n        $.widget('mage.collapsible', widget, {\n            options: {\n                selectors: {\n                    accordionView: '.amtabs-accordion-view',\n                    title: '[data-amtheme-js=\"item-title\"]'\n                }\n            },\n\n            _open: function () {\n                this._super();\n\n                if (this.element.parents(this.options.selectors.accordionView).length\n                    && this.element.has(this.options.selectors.title)) {\n                    this._scrollToTopIfNotVisible();\n                }\n            }\n        });\n\n        return $.mage.collapsible;\n    };\n});\n","Amasty_CustomTabs/js/process-reviews.js":"define([\n    'jquery',\n    'mage/utils/wrapper'\n], function ($, wrapper) {\n    'use strict';\n\n    return function (widget) {\n        return wrapper.wrap(widget, function (originalFunction, config, element) {\n            var reviewTab = $(config.reviewsTabSelector);\n\n            originalFunction(config, element);\n\n            /**\n             * @param {String} url\n             * @param {*} fromPages\n             */\n            $('.product-reviews-summary .reviews-actions .action').not('.-no-js-scroll').click(function (event) {\n                event.preventDefault();\n                var regexp = /^.*?(#|$)/,\n                    anchor = $(this).attr('href').replace(regexp, '');\n                $('.product[role=\"tablist\"] [data-role=\"content\"]').each(function (index) {\n                    var linkElement = $(this).find('#' + anchor + ', [data-role=\"product-review\"]');\n                    if (linkElement.length > 0) {\n                        $('.product[role=\"tablist\"]').tabs('activate', index);\n                        animation(linkElement);\n                        return;\n                    }\n                });\n            });\n\n            function animation(element) {\n                $('html, body').animate({\n                    scrollTop: element.offset().top - 50\n                }, 300);\n            }\n\n            if (reviewTab.parents('.amtabs-open').length) {\n                reviewTab.trigger('beforeOpen');\n            }\n        });\n    }\n});\n","Amasty_CustomTabs/js/tabs-mixin.js":"/**\n * Mage tabs mixin\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    return function (widget) {\n        $.widget('mage.tabs', widget, {\n            options: {\n                accordionOpenViewClass: 'amtabs-open'\n            },\n\n            /**\n             * @private\n             * @inheritDoc\n             *\n             * @return {void}\n             */\n            _create: function () {\n                this.isAccordion = this.element.hasClass(this.options.accordionOpenViewClass);\n\n                if (this.isAccordion) {\n                    this.options.collapsible = true;\n                }\n\n                this._super();\n            },\n\n            /**\n             * @private\n             *\n             * @return {void}\n             */\n            _callCollapsible: function () {\n                var self = this,\n                    disabled = false,\n                    active = false;\n\n                if (!this.isAccordion) {\n                    this._super();\n\n                    return;\n                }\n\n                $.each(this.collapsibles, function (i) {\n                    disabled = active = false;\n                    active = true;\n\n                    self._instantiateCollapsible(this, i, active, disabled);\n                });\n            },\n\n            _handleDeepLinking: function () {\n                if (!this.isAccordion) {\n                    this._super();\n                }\n            },\n\n            /**\n             * @private\n             *\n             * @return {void}\n             */\n            _closeOthers: function () {\n                if (!this.isAccordion) {\n                    this._super();\n\n                    return;\n                }\n\n                $.each(this.collapsibles, function () {\n                    $(this).on('beforeOpen', function () {\n                        var section = $(this);\n\n                        section.addClass('allow').prevAll().addClass('allow');\n                        section.nextAll().removeClass('allow');\n                    });\n                });\n            }\n        });\n\n        return $.mage.tabs;\n    };\n});\n","Amasty_CustomTabs/js/related-products.js":"define([\n    'jquery',\n    'relatedProducts'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.amRelatedProducts', $.mage.relatedProducts, {\n        _create: function () {\n            this.element.find('[role=\"select-all\"]').off('click');\n            this.element.find('.checkbox.related')\n                .removeClass('related')\n                .addClass('am-tab-related');\n            this._super();\n        }\n    });\n\n    return $.mage.amRelatedProducts;\n});\n","Amasty_CustomTabs/js/grid/columns/checkbox.js":"define([\n    'underscore',\n    'mage/translate',\n    'Magento_Ui/js/grid/columns/column',\n    'jquery'\n], function (_, $t, Column, jQuery) {\n    'use strict';\n\n    return Column.extend({\n        defaults: {\n            bodyTmpl: 'Amasty_CustomTabs/grid/cells/checkbox',\n            draggable: false,\n            sortable: false\n        },\n\n        /**\n         * Remove disable class from Insert Attribute button after Attribute has been chosen.\n         *\n         * @return {Boolean}\n         */\n        selectAttribute: function () {\n            if (jQuery('#insert_attribute').hasClass('disabled')) {\n                jQuery('#insert_attribute').removeClass('disabled');\n            }\n\n            return true;\n        }\n    });\n});\n","Amasty_CustomTabs/js/wysiwyg/tiny_mce/plugins/editor_plugin.js":"/* global tinymce, varienGlobalEvents, Base64 */\n/* eslint-disable strict */\ndefine('customTabEditorPlugin', [\n    'Amasty_CustomTabs/js/variable/attribute-directive-generator',\n    'wysiwygAdapter',\n    'jquery'\n], function (attributeDirectiveGenerator, wysiwyg, jQuery) {\n    return function (config) {\n        tinymce.create('tinymce.plugins.amcustomtabs_attribute', {\n\n            /**\n             * Initialize editor plugin.\n             *\n             * @param {tinymce.editor} editor - Editor instance that the plugin is initialized in.\n             * @param {String} url - Absolute URL to where the plugin is located.\n             */\n            init: function (editor, url) {\n                var self = this;\n\n                /**\n                 * Add new command to open attributes selector slideout.\n                 */\n                editor.addCommand('openAttributesSlideout', function (commandConfig) {\n                    var selectedElement;\n\n                    if (commandConfig) {\n                        selectedElement = commandConfig.selectedElement;\n                    } else {\n                        selectedElement = tinymce.activeEditor.selection.getNode();\n                    }\n                    AmastyProductTabsAttributePlugin.setEditor(editor);\n                    AmastyProductTabsAttributePlugin.loadChooser(\n                        config.url,\n                        wysiwyg.getId(),\n                        selectedElement\n                    );\n                });\n\n                /**\n                 * Add button to the editor toolbar.\n                 */\n                editor.addButton('amcustomtabs_attribute', {\n                    title: jQuery.mage.__('Insert Attribute'),\n                    tooltip: jQuery.mage.__('Insert Attribute'),\n                    cmd: 'openAttributesSlideout',\n                    image: url + '/img/icon.png',\n\n                    /**\n                     * Highlight or dismiss Insert Attribute button when attribute is selected or deselected.\n                     */\n                    onPostRender: function () {\n                        var _this = this,\n\n                        /**\n                         * Toggle active state of Insert Attribute button.\n                         *\n                         * @param {Object} e\n                         */\n                        toggleAttributeButton = function (e) {\n                            _this.active(false);\n\n                            if (jQuery(e.target).hasClass('amcustomtabs-attribute')) {\n                                _this.active(true);\n                            }\n                        };\n\n                        editor.on('click', toggleAttributeButton);\n                        editor.on('change', toggleAttributeButton);\n                    }\n                });\n\n                /**\n                 * Double click handler on the editor to handle dbl click on attribute placeholder.\n                 */\n                editor.on('dblclick', function (evt) {\n                    if (jQuery(evt.target).hasClass('amcustomtabs-attribute')) {\n                        editor.selection.collapse(false);\n                        editor.execCommand('openAttributesSlideout', {\n                            ui: true,\n                            selectedElement: evt.target\n                        });\n                    }\n                });\n\n                /**\n                 * Attach event handler for when wysiwyg editor is about to encode its content\n                 */\n                varienGlobalEvents.attachEventHandler('wysiwygEncodeContent', function (content) {\n                    content = self.encodeAttributes(content);\n\n                    return content;\n                });\n\n                /**\n                 * Attach event handler for when wysiwyg editor is about to decode its content\n                 */\n                varienGlobalEvents.attachEventHandler('wysiwygDecodeContent', function (content) {\n                    content = self.decodeAttributes(content);\n\n                    return content;\n                });\n            },\n\n            /**\n             * Encode attributes in content\n             *\n             * @param {String} content\n             * @returns {*}\n             */\n            encodeAttributes: function (content) {\n                content = content.gsub(/\\{\\{amcustomtabs_attribute code=\\\"([^\\\"]+)\\\"\\}\\}/i, function (match) {\n                    var path = match[1],\n                        amAttributes,\n                        imageHtml;\n\n                    amAttributes = JSON.parse(config.placeholders);\n\n                    if (amAttributes[match[1]]) {\n                        imageHtml = '<span id=\"%id\" class=\"amcustomtabs-attribute magento-placeholder mceNonEditable\">' +\n                            '%s</span>';\n                        imageHtml = imageHtml.replace('%s', amAttributes[match[1]]['label']);\n                    } else {\n                        imageHtml = '<span id=\"%id\" class=\"' +\n                            'amcustomtabs-attribute magento-placeholder magento-placeholder-error ' +\n                            'mceNonEditable' +\n                            '\">' +\n                            'Not found' +\n                            '</span>';\n                    }\n\n                    return imageHtml.replace('%id', Base64.idEncode(path));\n                });\n\n                return content;\n            },\n\n            /**\n             * Decode attributes in content.\n             *\n             * @param {String} content\n             * @returns {String}\n             */\n            decodeAttributes: function (content) {\n                var doc = (new DOMParser()).parseFromString(content.replace(/&quot;/g, '&amp;quot;'), 'text/html');\n\n                [].forEach.call(doc.querySelectorAll('span.amcustomtabs-attribute'), function (el) {\n                    var $el = jQuery(el);\n\n                    $el.replaceWith(\n                        attributeDirectiveGenerator.processConfig(\n                            Base64.idDecode(\n                                $el.attr('id')\n                            )\n                        )\n                    );\n                });\n\n                return doc.body ? doc.body.innerHTML.replace(/&amp;quot;/g, '&quot;') : content;\n            },\n\n            /**\n             * @return {Object}\n             */\n            getInfo: function () {\n                return {\n                    longname: 'Amasty Product Tab Attribute Manager Plugin',\n                    author: 'Amasty Team',\n                    authorurl: 'http://amasty.com',\n                    infourl: 'http://amasty.com',\n                    version: '1.0'\n                };\n            }\n        });\n\n        /**\n         * Register plugin\n         */\n        tinymce.PluginManager.add('amcustomtabs_attribute', tinymce.plugins.amcustomtabs_attribute);\n    };\n});\n","Amasty_CustomTabs/js/components/grid-sizes.js":"/**\n * Table Sizes Component (For demo)\n *\n * @return widget with methods which help's in the implementation user interface\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    $.widget('am.gridSizes', {\n        options: {\n            cellSelect: '.amtab-cell',\n            lineSelect: '.amtab-table-line',\n            hoverlineClass: '-amtab-hoverline',\n            activeClass: '-active'\n        },\n\n        _create: function () {\n            var self = this,\n                lines = self.element.find(self.options.lineSelect);\n\n            lines.find(self.options.cellSelect).click(function (e) {\n                self._gridHighlight(e)\n            });\n        },\n\n        /**\n         * Method's for Highlighting cells in table like a coordinate grid\n         */\n        _gridHighlight: function (e) {\n            var self = this;\n\n            self._clearTable();\n            self.targetElem = {\n                    node: $(e.target).addClass(self.options.activeClass),\n                    position: null\n                };\n\n            self._highlightRow();\n            self._highlightColumn();\n        },\n\n        _highlightRow: function () {\n            var self = this,\n                targetLine = self.targetElem.node.closest(self.options.lineSelect);\n\n            targetLine.addClass(self.options.activeClass);\n            targetLine.children().each(function (i) {\n                var elem = $(this);\n\n                if (elem.hasClass(self.options.activeClass)) {\n                    self.targetElem.position = i;\n\n                    return false;\n                }\n\n                elem.addClass(self.options.hoverlineClass);\n            });\n        },\n\n        _highlightColumn: function () {\n            var self = this;\n\n            self.element.children().each(function () {\n                var elem = $(this);\n\n                if (elem.hasClass(self.options.activeClass)) {\n                    return false;\n                }\n\n\n\n                elem.children().eq(self.targetElem.position).addClass(self.options.hoverlineClass);\n            });\n        },\n\n        _clearTable: function () {\n            var self = this;\n\n            self.element.find('.' + self.options.hoverlineClass).removeClass(self.options.hoverlineClass);\n            self.element.find('.' + self.options.activeClass).removeClass(self.options.activeClass);\n        }\n    });\n\n    return $.am.gridSizes;\n});\n","ClassyLlama_AvaTax/js/load-sdk.js":"define(['jquery'], function (jQuery) {\n    return function (container, params, sdkUrl, token, customerId) {\n        return jQuery.Deferred(function (defer) {\n            require([sdkUrl], function () {\n                if (typeof params !== 'object') {\n                    params = {};\n                }\n\n                params.token = token;\n                params.customer_number = customerId;\n\n                window.GenCert.init(container, params);\n                defer.resolve(window.GenCert);\n            });\n        });\n    }\n});\n","ClassyLlama_AvaTax/js/addressValidation.js":"/**\n * @category    ClassyLlama\n * @copyright   Copyright (c) 2017 Classy Llama Studios, LLC\n */\ndefine([\n    'jquery',\n    'jquery/ui',\n    'validation'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.addressValidation', {\n        options: {\n            selectors: {\n                button: '[data-action=save-address]'\n            }\n        },\n\n        /**\n         * Validation creation\n         * @protected\n         */\n        _create: function () {\n            var button = $(this.options.selectors.button, this.element);\n\n            this.element.validation({\n\n                /**\n                 * Submit Handler\n                 * @param {Element} form - address form\n                 */\n                submitHandler: function (form) {\n\n                    button.attr('disabled', true);\n                    // BEGIN EDIT - Add conditional to form submit\n                    if (!$(form).data('avataxAddressValidationEnabled')) {\n                        // Store is not using AvaTax address validation, submit form natively\n                        form.submit();\n                    }\n                    // END EDIT\n                }\n            });\n        }\n    });\n\n    return $.mage.addressValidation;\n});\n","ClassyLlama_AvaTax/js/delete-certificate.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(['jquery', 'mage/translate', 'Magento_Ui/js/modal/confirm'], function ($, $t, confirm) {\n\n    return function (options, element) {\n        $(element).click(function() {\n            confirm({\n                title: $t('Invalidate Certificate'),\n                content: $t('Are you sure you\u2019d like to invalidate this certificate?'),\n                actions: {\n                    confirm: function() {\n                        //make unlink request.\n                        window.location = options.unlinkUrl;\n                    }\n                }\n            });\n        });\n    };\n});\n","ClassyLlama_AvaTax/js/customer-account-add-exemption.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\ndefine(['ClassyLlama_AvaTax/js/certificates-sdk'], function (certificatesSdk) {\n    'use strict';\n\n    return function (addExemptionComponent) {\n        addExemptionComponent.prototype.renderSdk = function (element) {\n            certificatesSdk(element, this.sdkParameters).then(this.onSdkLoad);\n        };\n\n        return addExemptionComponent;\n    };\n});\n","ClassyLlama_AvaTax/js/multishipping-address-validation.js":"/**\n * @category    ClassyLlama\n * @copyright   Copyright (c) 2017 Classy Llama Studios, LLC\n */\ndefine([\n    'jquery',\n    'ClassyLlama_AvaTax/js/action/multishipping-save-address',\n    'jquery/ui',\n    'validation'\n], function ($, multishippingSaveAddressAction) {\n    'use strict';\n\n    $.widget('mage.multishippingAddressValidation', {\n        options: {\n            selectors: {\n                validAddressRadioSelector: '.validAddress',\n                originalAddressRadioSelector: '.originalAddress',\n                originalAddressTextSelector: \".originalAddressText\",\n                validAddressTextSelector: \".validAddressText\",\n                errorMessageContainerSelector: '.errorMessageContainer',\n                addressOptionSelector: '.addressOption',\n                addressRadioGroupName: 'addressToUse',\n                selectedAddressClass: 'selected',\n                addressValidationFormSelector: '.validateAddressForm',\n                validationForm: '.address-validation-multicheckout',\n                checkoutValidateAddressBlock: '.checkout-validate-address',\n                editAddressLink: '.edit-address',\n            }\n        },\n\n        /**\n         * Validation creation\n         * @protected\n         */\n        _create: function () {\n            var self = this;\n            self.toogleRadioButton();\n            $(self.options.selectors.validationForm).find('input.av-radiobutton:radio[checked=checked]').trigger(\"change\");\n            $(self.options.selectors.editAddressLink).on('click', function () {\n                location.href = $(this).parents('.block').find(\".box-shipping-address a.action.edit\").attr('href');\n            })\n        },\n\n        toogleRadioButton: function () {\n            var self = this;\n            $(self.options.selectors.validationForm).find('input.av-radiobutton:radio').on('change', function () {\n                $(this).parents(self.options.selectors.checkoutValidateAddressBlock)\n                    .find(\".selected\")\n                    .removeClass(self.options.selectors.selectedAddressClass)\n                    .parent()\n                    .find('input.av-radiobutton:checked')\n                    .parents(self.options.selectors.addressOptionSelector)\n                    .addClass(self.options.selectors.selectedAddressClass);\n\n                multishippingSaveAddressAction(JSON.parse(this.dataset.address));\n            });\n        }\n    });\n\n    return $.mage.multishippingAddressValidation;\n});\n","ClassyLlama_AvaTax/js/certificates-sdk.js":"define(['ClassyLlama_AvaTax/js/action/get-sdk-token', 'ClassyLlama_AvaTax/js/load-sdk'], function (sdkToken, loadSdk) {\n    return function (container, params) {\n        return sdkToken().then(function (sdkUrl, token, customerId) {\n            return loadSdk(container, params, sdkUrl, token, customerId);\n        });\n    }\n});\n","ClassyLlama_AvaTax/js/action/account-add-exemption.js":"define(['jquery', 'uiComponent', 'Magento_Ui/js/modal/modal', 'mage/translate'], function (jQuery, Component, modal, $t) {\n    return Component.extend({\n        defaults: {\n            template: 'ClassyLlama_AvaTax/action/account-add-exemption',\n            exemptionZone: '',\n            availableExemptionZones: [],\n            showSdkView: false,\n            certificateUploadSuccess: false,\n            sdkParameters: {}\n        },\n\n        initialize: function initialize() {\n            this._super();\n\n            this.observe(['showSdkView', 'exemptionZone', 'certificateUploadSuccess']);\n            this.optionsCaption = $t('Select an Exemption Zone');\n            this.onCertificateComplete = this.onCertificateComplete.bind(this);\n            this.onSdkLoad = this.onSdkLoad.bind(this);\n\n            /**\n             * Possible SDK parameters:\n             * - submit_to_stack. Sends the new document to be validated in CertCapture. New certificates are automatically\n             *              validated, unless this behavior is altered using the \"submit_to_stack\". Default is false.\n             * - preview. Allows user to quickly view their new certificate so they can save or print it. Certificate is\n             *              not generated in CertCapture. Default is false.\n             * - customer_list. Appends a page to the generated file that includes \"Customer Number\", \"Customer Name\",\n             *              and \"Customer Address\" of each customer associated with the certificate. Must be called at\n             *              initialization of GenCert API. Default is false.\n             * - upload_only. Disables the ability to complete documents by submitting information to form fields.\n             *              Customers can only upload prefilled documents. Default is false.\n             * - fill_only. Disables the upload of prefilled documents. Customers can only complete documents by\n             *              submitting information to form fields.\n             * - show_files. Displays a download link after document submission.\n             * - edit_purchaser. Allows the customer to edit their information on return visits. To allow customers\n             *              to edit their existing information, use edit_purchaser:true. Default is false.\n             *\n             *  Callback functions (https://app.certcapture.com/gencert2/js):\n             *  - onUpload. Called when a document is uploaded. Access the generated certificate id with \"GenCert.certificateIds\".\n             *  - onCancel. Used to reinitialize GenCert or provide user navigation\n             *  - onManualSubmit. Used to reinitialize GenCert or navigate the user elsewhere. This occurs when nexus\n             *              (exemption matrix) is set to manually collect a document. The user can upload a form when this happens.\n             *  - onInit. After constructor has finished loading\n             *  - beforeShow. Called before the form is shown\n             *  - afterShow. Called after the form is shown\n             *  - beforeValidate. Before form validation\n             *  - onValidateSuccess. After form validation success, before submit\n             *  - onValidateFailure. After form validation failure\n             *  - onCertSuccess. After submission, when certificate is successful.  Access the generated certificate id\n             *              with \"GenCert.certificateIds\"\n             *  - onCertFailure. After submission, when certificate is failure\n             *  - onCancel. User cancels the certificate generation process\n             *  - onNotNeeded. Called when a Zone that does not charge sales tax is chosen\n             *  - onSaveCustomer.\n             *  - onSaveSignature.\n             */\n\n            this.sdkParameters = jQuery.extend({\n                // Include if cert is a renewal?\n                upload: true,\n                submit_to_stack: Boolean(Number(this.certificatesAutoValidationDisabled)),\n\n                onCertSuccess: this.onCertificateComplete,\n                onManualSubmit: this.onCertificateComplete,\n                onUpload: this.onCertificateComplete\n            }, this.sdkParameters);\n\n            return this;\n        },\n\n        setModalElement: function setModalElement(element) {\n            this.modalElement = element;\n            modal(\n                {\n                    'type': 'popup',\n                    'modalClass': 'account-add-exemption-modal',\n                    'responsive': true,\n                    'innerScroll': true,\n                    'buttons': []\n                },\n                jQuery(this.modalElement)\n            );\n\n            jQuery(this.modalElement).on('modalclosed', function () {\n                this.exemptionZone('');\n                this.showSdkView(false);\n\n                if (this.certificateUploadSuccess() === true) {\n                    window.location.reload();\n                }\n            }.bind(this));\n        },\n\n        onCertificateComplete: function onCertificateComplete() {\n            this.certificateUploadSuccess(true);\n        },\n\n        onSdkLoad: function onSdkLoad(GenCert) {\n            GenCert.setShipZone(this.exemptionZone());\n            GenCert.show();\n        },\n\n        renderSdk: function renderSdk(element) {\n            // This should be implemented through a mixin at the frontend or adminhtml area level\n            throw new Error('Must be implemented');\n        },\n\n        addExemption: function addExemption() {\n            jQuery(this.modalElement).modal('openModal');\n        },\n\n        closeModal: function addExemption() {\n            jQuery(this.modalElement).modal('closeModal');\n        },\n\n        proceedToSdk: function proceedToSdk() {\n            if (this.exemptionZone() === '' || this.exemptionZone() === void(0)) {\n                return;\n            }\n\n            this.showSdkView(true);\n        }\n    });\n});\n","ClassyLlama_AvaTax/js/action/get-sdk-token.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(['jquery', 'mage/storage', 'Magento_Customer/js/model/customer'], function (jQuery, storage, customerModel) {\n    'use strict';\n\n    // Grab a new token 5 minutes before the previous one expires to ensure our requests will have a valid token\n    var expirationBuffer = 5 * 60 * 1000;\n    var avaTaxTokenStorageKey = 'avatax-token';\n    var requiredInfo = [\n        'token',\n        'customer',\n        'expires',\n        'sdk_url'\n    ];\n\n    return function getSdkToken() {\n        var tokenInfo = window.localStorage.getItem(avaTaxTokenStorageKey);\n\n        if (tokenInfo !== null) {\n            tokenInfo = JSON.parse(tokenInfo);\n\n            // Ensure that tokens do not get reused across sessions\n            if(!customerModel.isLoggedIn() || customerModel.customerData.id !== tokenInfo.customer_id) {\n                tokenInfo = false;\n            }\n\n            if (tokenInfo !== false && tokenInfo.expires * 1000 > Date.now() + expirationBuffer) {\n                return jQuery.Deferred().resolve(tokenInfo.sdk_url, tokenInfo.token);\n            }\n\n            window.localStorage.removeItem(avaTaxTokenStorageKey)\n        }\n\n        return storage.get('rest/V1/avatax/token').then(\n            function (response) {\n                // If we don't have token info, return early\n                if (!requiredInfo.every(function (key) {return response.hasOwnProperty(key);})) {\n                    return jQuery.Deferred().reject();\n                }\n\n                // Cache the token in local storage\n                window.localStorage.setItem(avaTaxTokenStorageKey, JSON.stringify(response));\n\n                return jQuery.Deferred().resolve(response.sdk_url, response.token, response.customer);\n            }\n        );\n    }\n});\n","ClassyLlama_AvaTax/js/action/set-customer-address.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'mage/storage',\n        'Magento_Ui/js/modal/alert',\n        'ClassyLlama_AvaTax/js/model/address-model',\n        'ClassyLlama_AvaTax/js/model/url-builder'\n    ],\n    function (\n        $,\n        storage,\n        alert,\n        addressModel,\n        urlBuilder\n    ) {\n        'use strict';\n        return function () {\n            var serviceUrl;\n            var payload = {\n                address: addressModel.originalAddress()\n            };\n\n            serviceUrl = urlBuilder.createUrl('/carts/mine/validate-address', {});\n\n            return storage.post(\n                serviceUrl,\n                JSON.stringify(payload)\n            ).done(\n                function (response) {\n                    return response;\n                }\n            ).fail(\n                function (response) {\n                    var messageObject = JSON.parse(response.responseText);\n                    alert({\n                        title: $.mage.__('Error'),\n                        content: messageObject.message\n                    });\n                }\n            );\n        }\n    }\n);\n","ClassyLlama_AvaTax/js/action/multishipping-save-address.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'mage/storage',\n        'Magento_Ui/js/modal/alert',\n        'ClassyLlama_AvaTax/js/model/url-builder',\n        'ClassyLlama_AvaTax/js/model/multishipping-save-address',\n    ],\n    function (\n        $,\n        storage,\n        alert,\n        urlBuilder,\n        multishippingSaveAddressService,\n    ) {\n        'use strict';\n        return function (address) {\n            var serviceUrl = urlBuilder.createUrl('/multishipping/save-address', {}),\n\n                payload = {\n                    address: address,\n                };\n\n            return multishippingSaveAddressService(serviceUrl, payload);\n\n        }\n    }\n);\n","ClassyLlama_AvaTax/js/action/set-shipping-address.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/resource-url-manager',\n        'mage/storage',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'ClassyLlama_AvaTax/js/view/update-address',\n        'ClassyLlama_AvaTax/js/model/address-model'\n    ],\n    function (\n        $,\n        quote,\n        resourceUrlManager,\n        storage,\n        paymentService,\n        methodConverter,\n        errorProcessor,\n        fullScreenLoader,\n        updateAddress,\n        addressModel\n    ) {\n        'use strict';\n        return function (validSelected) {\n            var payload;\n\n            if (validSelected) {\n                updateAddress(addressModel.validAddress(), false);\n            } else {\n                updateAddress(addressModel.originalAddress(), false);\n            }\n\n            payload = {\n                addressInformation: {\n                    extension_attributes: {\n                        should_validate_address: validSelected\n                    },\n                    // Since the updateAddress method above changes the shippingAddress, quote.shippingAddress()\n                    // will return whichever option the user has submitted.\n                    shipping_address: quote.shippingAddress(),\n                    billing_address: quote.billingAddress(),\n                    shipping_method_code: quote.shippingMethod().method_code,\n                    shipping_carrier_code: quote.shippingMethod().carrier_code\n                }\n            };\n\n            fullScreenLoader.startLoader();\n\n            return storage.post(\n                resourceUrlManager.getUrlForSetShippingInformation(quote),\n                JSON.stringify(payload)\n            ).done(\n                function (response) {\n                    quote.setTotals(response.totals);\n                    paymentService.setPaymentMethods(methodConverter(response.payment_methods));\n                    fullScreenLoader.stopLoader();\n                }\n            ).fail(\n                function (response) {\n                    errorProcessor.process(response);\n                    fullScreenLoader.stopLoader();\n                }\n            );\n        }\n    }\n);\n","ClassyLlama_AvaTax/js/action/set-billing-address.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'mage/storage',\n        'Magento_Ui/js/modal/alert',\n        'ClassyLlama_AvaTax/js/model/address-model',\n        'ClassyLlama_AvaTax/js/model/url-builder',\n        'mage/url',\n    ],\n    function (\n        $,\n        storage,\n        alert,\n        addressModel,\n        urlBuilder,\n        mageUrl\n    ) {\n        'use strict';\n        return function () {\n            var serviceUrl = urlBuilder.createUrl('/carts/billing-validate-address', {}),\n                payload = {\n                    address: addressModel.originalAddress()\n                };\n\n            return $.ajax({\n                url: mageUrl.build(serviceUrl),\n                type: 'POST',\n                data: JSON.stringify(payload),\n                async: false,\n                global: true,\n                contentType: 'application/json'\n            }).done(\n                function (response) {\n                    return response;\n                }\n            ).fail(\n                function (response) {\n                    var messageObject = JSON.parse(response.responseText);\n                    alert({\n                        title: $.mage.__('Error'),\n                        content: messageObject.message\n                    });\n                }\n            );\n\n        }\n    }\n);\n","ClassyLlama_AvaTax/js/model/address-model.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    ['ko'],\n    function (ko) {\n        'use strict';\n        var originalAddress = ko.observable(null);\n        var validAddress = ko.observable(null);\n        var selectedAddress = ko.observable(null);\n        var error = ko.observable(null);\n        var isDifferent = ko.observable(null);\n        return {\n            originalAddress: originalAddress,\n            validAddress: validAddress,\n            selectedAddress: selectedAddress,\n            error: error,\n            isDifferent: isDifferent,\n            resetValues: function () {\n                this.originalAddress(null);\n                this.validAddress(null);\n                this.selectedAddress(null);\n                this.error(null);\n                this.isDifferent(null);\n            }\n        };\n    }\n);\n","ClassyLlama_AvaTax/js/model/billingAddressValidation.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'ClassyLlama_AvaTax/js/view/address-validation-form',\n        'ClassyLlama_AvaTax/js/model/address-model',\n        'ClassyLlama_AvaTax/js/model/address-converter',\n        'ClassyLlama_AvaTax/js/action/set-billing-address',\n        'Magento_Checkout/js/model/quote',\n        'ClassyLlama_AvaTax/js/view/checkout-billing-address-validation-modal',\n    ],\n    function ($, addressValidationForm, addressModel, addressConverter, setBillingAddress, quote, checkoutBillingAddressValidationModal) {\n        'use strict';\n        return {\n            modal: false,\n            options: window.checkoutConfig.billingAddressValidation,\n            validationContainer: '.billingValidationModal .modal-content > div',\n\n            validate: function () {\n                $('body').trigger('processStart');\n                var self = this, isValid;\n\n                if (this.options.validationEnabled &&\n                    (typeof this.options.isAddressValid == \"undefined\" || this.options.isAddressValid === false)\n                ) {\n                    isValid = self.validateBillingAddress();\n                } else {\n                    isValid = true;\n                }\n                $('body').trigger('processStop');\n                return isValid;\n            },\n            validateBillingAddress: function () {\n                var isValid = false,\n                    self = this,\n                    addressObject = addressConverter.formAddressDataToCustomerAddress(quote.billingAddress()),\n                    inCountry = $.inArray(addressObject.countryId, self.options.countriesEnabled.split(',')) >= 0;\n                addressModel.error(null);\n\n                if (inCountry) {\n                    if (!self.modal) {\n                        self.modal = checkoutBillingAddressValidationModal(self.options);\n                    }\n                    $('.validateAddressForm').show();\n                    addressObject = self.cleanUnAddressObject(addressObject);\n                    addressModel.originalAddress(addressObject);\n                    addressModel.error(null);\n                    setBillingAddress().done(function (response) {\n                        if (typeof response === 'string') {\n                            addressModel.error(response);\n                        } else {\n                            addressModel.validAddress(response);\n                        }\n                        addressValidationForm.fillValidateForm(self.validationContainer);\n                        if (addressModel.isDifferent() || addressModel.error() != null) {\n                            isValid = false;\n                            self.modal.openModal();\n                            $('.validateAddressForm').show();\n                        } else {\n                            isValid = true;\n                        }\n                    });\n                    return isValid;\n                }\n            },\n            cleanUnAddressObject: function (address) {\n                var allowedAddressProperties = [\n                    \"customerId\",\n                    \"countryId\",\n                    \"region\",\n                    \"regionId\",\n                    \"regionCode\",\n                    \"street\",\n                    \"company\",\n                    \"telephone\",\n                    \"fax\",\n                    \"postcode\",\n                    \"city\",\n                    \"firstname\",\n                    \"lastname\",\n                    \"middlename\",\n                    \"prefix\",\n                    \"suffix\",\n                    \"vatId\",\n                ];\n\n                var addressKeys = Object.keys(address);\n                for (var i = 0; i < addressKeys.length; i++) {\n                    if (allowedAddressProperties.indexOf(addressKeys[i]) < 0) {\n                        delete address[addressKeys[i]];\n                    }\n                }\n\n                return address;\n            }\n\n        }\n    }\n);\n","ClassyLlama_AvaTax/js/model/certificate-authentication-popup.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/modal'\n], function ($, modal) {\n    'use strict';\n\n    return {\n        modalWindow: null,\n\n        /**\n         * Create popUp window for provided element\n         *\n         * @param {HTMLElement} element\n         */\n        createPopUp: function (element) {\n            var options = {\n                'type': 'popup',\n                'modalClass': 'popup-authentication',\n                'focus': '[name=username]',\n                'responsive': true,\n                'innerScroll': true,\n                'trigger': '.proceed-to-checkout',\n                'buttons': []\n            };\n\n            this.modalWindow = element;\n            modal(options, $(this.modalWindow));\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            $(this.modalWindow).modal('openModal');\n        }\n    };\n});\n","ClassyLlama_AvaTax/js/model/address-converter.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/new-customer-address',\n        'Magento_Customer/js/customer-data',\n        'mage/utils/objects',\n        'ClassyLlama_AvaTax/js/lib/serialize-form'\n    ],\n    function(\n        $,\n        address,\n        customerData,\n        mageUtils\n    ) {\n        'use strict';\n        var countryData = customerData.get('directory-data');\n\n        return {\n            /**\n             * Convert address form data to Address object\n             * @returns {Object}\n             * @param formData\n             */\n            formAddressDataToCustomerAddress: function(formData) {\n                // clone address form data to new object\n                var addressData = $.extend(true, {}, formData),\n                    region,\n                    regionName = addressData.region;\n                if (mageUtils.isObject(addressData.street)) {\n                    addressData.street = this.objectToArray(addressData.street);\n                }\n\n                addressData.region = {\n                    region_id: addressData.region_id,\n                    region: regionName\n                };\n\n                if (addressData.region_id\n                    && countryData()[addressData.country_id]\n                    && countryData()[addressData.country_id]['regions']\n                ) {\n                    region = countryData()[addressData.country_id]['regions'][addressData.region_id];\n                    if (region) {\n                        addressData.region.region_id = addressData['region_id'];\n                        addressData.region.region = region['name'];\n                    }\n                }\n\n                return address(addressData);\n            }\n        };\n    }\n);\n","ClassyLlama_AvaTax/js/model/multishipping-save-address.js":"define(\n    [\n        'mage/storage',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Checkout/js/model/full-screen-loader',\n    ],\n    function (storage, errorProcessor, fullScreenLoader) {\n        'use strict';\n\n        return function (serviceUrl, payload, messageContainer) {\n            fullScreenLoader.startLoader();\n\n            return storage.post(\n                serviceUrl, JSON.stringify(payload)\n            ).fail(\n                function (response) {\n                    errorProcessor.process(response, messageContainer);\n                }\n            ).success(\n                function (response) {\n\n                }\n            ).always(\n                function () {\n                    fullScreenLoader.stopLoader();\n                }\n            );\n        };\n    }\n);\n","ClassyLlama_AvaTax/js/model/url-builder.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    ['jquery'],\n    function($) {\n        return {\n            method: \"rest\",\n            storeCode: window.avaTaxStoreCode,\n            version: 'V1',\n            serviceUrl: ':method/:storeCode/:version',\n\n            createUrl: function(url, params) {\n                var completeUrl = this.serviceUrl + url;\n                return this.bindParams(completeUrl, params);\n            },\n            bindParams: function(url, params) {\n                params.method = this.method;\n                params.storeCode = this.storeCode;\n                params.version = this.version;\n\n                var urlParts = url.split(\"/\");\n                urlParts = urlParts.filter(Boolean);\n\n                $.each(urlParts, function(key, part) {\n                    part = part.replace(':', '');\n                    if (params[part] != undefined) {\n                        urlParts[key] = params[part];\n                    }\n                });\n                return urlParts.join('/');\n            }\n        };\n    }\n);\n","ClassyLlama_AvaTax/js/model/shipping-save-processor/default.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/resource-url-manager',\n        'mage/storage',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/select-billing-address',\n        'ClassyLlama_AvaTax/js/view/checkout-validation-handler',\n        'Magento_Ui/js/modal/alert'\n    ],\n    function (\n        $,\n        quote,\n        resourceUrlManager,\n        storage,\n        paymentService,\n        methodConverter,\n        errorProcessor,\n        fullScreenLoader,\n        selectBillingAddressAction,\n        checkoutValidationHandler,\n        alert\n    ) {\n        'use strict';\n\n        var payloadExtenderLoaded = false;\n        var getPayloadExtender = function() {\n            var extenderRequest = new $.Deferred();\n            require(\n                ['Magento_Checkout/js/model/shipping-save-processor/payload-extender'],\n                function (payloadExtender) {\n                    extenderRequest.resolve(payloadExtender);\n                    // Used for compatibility with Magento versions prior to 2.1.15\n                    payloadExtenderLoaded = true;\n                }, function (err) {\n                    extenderRequest.reject(err);\n                }\n            );\n            return extenderRequest.promise();\n        };\n\n        return function (module) {\n            var validateAddressContainerSelector = '#validate_address';\n            module.saveShippingInformation = function () {\n                var payload;\n\n                if (!quote.billingAddress() && quote.shippingAddress().canUseForBilling()) {\n                    selectBillingAddressAction(quote.shippingAddress());\n                }\n\n                payload = {\n                    addressInformation: {\n                        shipping_address: quote.shippingAddress(),\n                        billing_address: quote.billingAddress(),\n                        shipping_method_code: quote.shippingMethod().method_code,\n                        shipping_carrier_code: quote.shippingMethod().carrier_code\n                    }\n                };\n\n                return $.when(getPayloadExtender()).then(function (extender) {\n                    extender(payload);\n                    return payload;\n                }, function (err) {\n                    // payloadExtender doesn't exist in 2.1, no problem\n                    return $.when(payload);\n                }).done(function (pl) {\n                    fullScreenLoader.startLoader();\n\n                    return storage.post(\n                        resourceUrlManager.getUrlForSetShippingInformation(quote),\n                        JSON.stringify(pl)\n                    ).done(\n                        function (response) {\n                            quote.setTotals(response.totals);\n                            paymentService.setPaymentMethods(methodConverter(response.payment_methods));\n                            // Begin Edit\n                            try {\n                                checkoutValidationHandler.validationResponseHandler(response);\n                            } catch (e) {\n                                $(validateAddressContainerSelector + \" *\").hide();\n                            }\n                            // End Edit\n                            fullScreenLoader.stopLoader(!payloadExtenderLoaded);\n                        }\n                    ).fail(\n                        function (response) {\n                            // Begin Edit - Native error message display is not obvious enough, so add to an alert box\n                            var messageObject = JSON.parse(response.responseText);\n                            alert({\n                                title: $.mage.__('Error'),\n                                content: messageObject.message\n                            });\n                            //errorProcessor.process(response);\n                            // End Edit\n                            fullScreenLoader.stopLoader(!payloadExtenderLoaded);\n                        }\n                    );\n                });\n            };\n            return module;\n        };\n    }\n);\n","ClassyLlama_AvaTax/js/model/shipping-save-processor/gift-registry.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/resource-url-manager',\n        'mage/storage',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/select-billing-address',\n        'ClassyLlama_AvaTax/js/view/checkout-validation-handler'\n    ],\n    function (\n        quote,\n        resourceUrlManager,\n        storage,\n        paymentService,\n        methodConverter,\n        errorProcessor,\n        fullScreenLoader,\n        selectBillingAddressAction,\n        checkoutValidationHandler\n    ) {\n        'use strict';\n\n        return {\n            saveShippingInformation: function() {\n                var shippingAddress = {},\n                payload;\n\n                shippingAddress.extension_attributes = {\n                    gift_registry_id: quote.shippingAddress().giftRegistryId\n                };\n\n                payload = {\n                    addressInformation: {\n                        shipping_address: shippingAddress,\n                        shipping_method_code: quote.shippingMethod().method_code,\n                        shipping_carrier_code: quote.shippingMethod().carrier_code\n                    }\n                };\n\n                fullScreenLoader.startLoader();\n                return storage.post(\n                    resourceUrlManager.getUrlForSetShippingInformation(quote),\n                    JSON.stringify(payload)\n                ).done(\n                    function (response) {\n                        paymentService.setPaymentMethods(methodConverter(response.payment_methods));\n                        quote.setTotals(response.totals);\n                        // Begin Edit\n                        checkoutValidationHandler.validationResponseHandler(response);\n                        // End Edit\n                        fullScreenLoader.stopLoader();\n                    }\n                ).fail(\n                    function (response) {\n                        errorProcessor.process(response);\n                        fullScreenLoader.stopLoader();\n                    }\n                );\n            }\n        }\n    }\n);\n","ClassyLlama_AvaTax/js/model/step-navigator/mixin.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\ndefine(['jquery'], function (jQuery) {\n    'use strict';\n\n    return function (stepNavigatorModule) {\n        var parentNavigateTo = stepNavigatorModule.navigateTo;\n\n        // Wrap the native navigate function so that we can trigger a jQuery event to listen to\n        stepNavigatorModule.navigateTo = function navigateTo() {\n            parentNavigateTo.apply(this, arguments);\n\n            jQuery(window.document).trigger('checkout.navigateTo');\n        };\n\n        return stepNavigatorModule;\n    };\n});\n","ClassyLlama_AvaTax/js/view/address-validation-form.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'ko',\n        'mageUtils',\n        'ClassyLlama_AvaTax/js/model/address-model'\n    ],\n    function (\n        $,\n        ko,\n        utils,\n        addressModel\n    ) {\n        'use strict';\n\n        return {\n            validAddressRadioSelector: '.validAddress',\n            originalAddressRadioSelector: '.originalAddress',\n            originalAddressTextSelector: \".originalAddressText\",\n            validAddressTextSelector: \".validAddressText\",\n            errorMessageContainerSelector: '.errorMessageContainer',\n            addressOptionSelector: '.addressOption',\n            addressRadioGroupName: 'addressToUse',\n            selectedAddressClass: 'selected',\n            addressValidationFormSelector: '.validateAddressForm',\n            validationForm: '#co-validate-form',\n\n            bindTemplate: function (containerSelector, config, templateName) {\n                var template = $(\"<div class='\" + this.addressValidationFormSelector.replace('.', '') + \"' data-bind=\\\"template: { name: '\" + templateName + \"', data: data }\\\"/>\");\n\n                function ViewModel() {\n                    this.data = {\n                        choice: config.hasChoice,\n                        instructions: config.instructions,\n                        errorInstructions: config.errorInstructions,\n                        uid: utils.uniqueid()\n                    }\n                }\n\n                ko.applyBindings(new ViewModel(), template.get(0));\n\n                $(containerSelector).html(template);\n            },\n\n            fillValidateForm: function (form) {\n                this.reset(form);\n\n                if (addressModel.error() != null) {\n                    $(form).find(this.errorMessageContainerSelector).show();\n                    $(form).find(this.errorMessageContainerSelector + \" .instructions .error-message\").html(addressModel.error());\n                    $(form).find(this.errorMessageContainerSelector + \" \" + this.originalAddressTextSelector).html(this.buildOriginalAddress(addressModel.originalAddress()));\n                    $(form).find('.yesError').show();\n                    $(form).find('.noError').hide();\n                    $(form).find(this.addressValidationFormSelector).show();\n                    return;\n                } else {\n                    $(form).find('.yesError').hide();\n                    $(form).find('.noError').show();\n                    $(form).find(this.errorMessageContainerSelector).hide();\n                }\n\n                var originalAddress = this.buildOriginalAddress(addressModel.originalAddress());\n                var validAddress = this.buildValidAddress(addressModel.originalAddress(), addressModel.validAddress());\n\n                if (!addressModel.isDifferent()) {\n                    $(form).find(this.addressValidationFormSelector).hide();\n                    return;\n                }\n\n                var userCanChooseOriginalAddress = $(this.originalAddressTextSelector).length;\n                if (userCanChooseOriginalAddress) {\n                    $(form).find(this.originalAddressTextSelector).html(originalAddress);\n                    this.toggleRadioSelected(form, this.addressRadioGroupName, this.selectedAddressClass);\n                }\n\n                $(form).find(this.validAddressTextSelector).html(validAddress);\n                $(form).find(this.addressValidationFormSelector).show();\n            },\n\n            buildValidAddress: function (originalAddress, validAddress) {\n                var result = \"\";\n\n                // Name\n                result += this.encodeHtml(originalAddress.firstname + \" \" + originalAddress.lastname) + \"<br/>\";\n\n                // Streets\n                var maxStreets = 3;\n                for (var i = 0; i < maxStreets; i++) {\n                    var originalStreet = typeof originalAddress.street[i] === 'undefined' ? '' : originalAddress.street[i];\n                    var validStreet = typeof validAddress.street[i] === 'undefined' ? '' : validAddress.street[i];\n                    var validatedStreet = this.diffAddressField(originalStreet, validStreet);\n                    result += validatedStreet;\n                    result += validatedStreet.length ? \"<br/>\" : \"\";\n                }\n\n                // City\n                result += this.diffAddressField(originalAddress.city, validAddress.city) + \", \";\n\n                // State - The region_code isn't used for customer addresses\n                if (typeof originalAddress.region_code !== 'undefined') {\n                    result += this.diffAddressField(originalAddress.region_code, validAddress.region_code) + \" \";\n                } else {\n                    result += this.diffAddressField(originalAddress.region, validAddress.region) + \" \";\n                }\n\n                // Postal code\n                result += this.diffAddressField(originalAddress.postcode, validAddress.postcode);\n\n                return result;\n            },\n\n            buildOriginalAddress: function (originalAddress) {\n                var result = \"\";\n\n                var parent = this;\n\n                // Name\n                result += this.encodeHtml(originalAddress.firstname + \" \" + originalAddress.lastname) + \"<br/>\";\n\n                // Streets\n                $.each(originalAddress.street, function (index, value) {\n                    if (value !== \"\") {\n                        result += parent.encodeHtml(value) + \"<br/>\";\n                    }\n                });\n\n                // City\n                result += this.encodeHtml(originalAddress.city) + \", \";\n\n                // State - The region_code isn't used for customer addresses\n                if (typeof originalAddress.region_code !== 'undefined') {\n                    result += this.encodeHtml(originalAddress.region_code) + \" \";\n                } else {\n                    result += this.encodeHtml(originalAddress.region) + \" \";\n                }\n\n                // Postal code\n                result += this.encodeHtml(originalAddress.postcode);\n\n                return result;\n            },\n\n            /**\n             * @param form\n             * @param radioGroupName\n             * @param selectedClass\n             */\n            toggleRadioSelected: function (form, radioGroupName, selectedClass) {\n                var self = this;\n                $(form).find('input[name=' + radioGroupName + ']:radio').on('change', function () {\n                    $(form).find(self.validationForm + \" .selected\")\n                        .removeClass(selectedClass)\n                        .parent()\n                        .find('input[name=' + radioGroupName + ']:checked')\n                        .parents(self.addressOptionSelector)\n                        .addClass(selectedClass);\n\n                    if ($(form).find(self.validAddressRadioSelector).is(':checked')) {\n                        addressModel.selectedAddress(addressModel.validAddress());\n                    } else {\n                        addressModel.selectedAddress(addressModel.originalAddress());\n                    }\n                });\n            },\n\n            updateFormFields: function (form) {\n                var field = 'street';\n                $(form).find(\"input[name*=\" + field + \"]\").each(function (index) {\n                    var street;\n                    if (index < addressModel.selectedAddress()[field].length) {\n                        street = $(form).find(\"input[name*=\" + field + \"]\").eq(index);\n                    } else {\n                        street = $(form).find(\"input[name*=\" + field + \"]\").eq(index).attr('value', '');\n                    }\n\n                    if (street.val() !== addressModel.selectedAddress()[field][index]) {\n                        $(street).val(addressModel.selectedAddress()[field][index]).trigger('change');\n                    }\n                });\n\n                this.updateFieldValue(form, 'city');\n                this.updateFieldValue(form, 'region');\n                this.updateFieldValue(form, 'region_id');\n                this.updateFieldValue(form, 'country_id');\n                this.updateFieldValue(form, 'postcode');\n            },\n\n            updateFieldValue: function (form, field) {\n                var fieldElement = $(form).find(\"input[name*=\" + field + \"]\");\n                if (['country_id', 'region_id'].indexOf(field) > -1) {\n                    fieldElement = $(form).find(\"select[name*=\" + field + \"]\");\n                }\n                if (typeof addressModel.selectedAddress()[field] !== \"undefined\" && fieldElement.val() !== addressModel.selectedAddress()[field]) {\n                    $(fieldElement).val(addressModel.selectedAddress()[field]).trigger('change');\n                }\n            },\n\n            diffAddressField: function (o, n) {\n                o = this.encodeHtml(o);\n                n = this.encodeHtml(n);\n                if(o !== n) {\n                    addressModel.isDifferent(true);\n                    if (n.length) {\n                        n = '<span class=\"address-field-changed\">' + n + '</span>';\n                    }\n                }\n                return n;\n            },\n\n            reset: function (form) {\n                // isDifferent() must be reset to false every time an address is validated or you could get a false\n                // positive saying the address is different because it was in the last address that was validated\n                addressModel.isDifferent(false);\n                addressModel.selectedAddress(addressModel.validAddress());\n                $(form).find(this.originalAddressRadioSelector).prop('checked', false);\n                $(form).find(this.validAddressRadioSelector).prop('checked', true);\n                $(form).find(this.originalAddressRadioSelector).parents(this.addressOptionSelector).removeClass(this.selectedAddressClass);\n                $(form).find(this.validAddressRadioSelector).parents(this.addressOptionSelector).addClass(this.selectedAddressClass);\n                $(form).find(this.addressValidationFormSelector).hide();\n            },\n\n            encodeHtml: function (str) {\n                // This function will escape the contents of the provided string\n                // Sourced from http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/#the-best-way-to-escape-html-in-javascript\n                var div = document.createElement('div');\n                div.appendChild(document.createTextNode(str));\n                return div.innerHTML;\n            }\n        }\n    }\n);\n","ClassyLlama_AvaTax/js/view/checkout-billing-address-validation-modal.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine([\n    'jquery',\n    'ko',\n    'ClassyLlama_AvaTax/js/model/address-model',\n    'ClassyLlama_AvaTax/js/view/address-validation-form',\n    'Magento_Checkout/js/model/checkout-data-resolver',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/action/select-billing-address',\n    'Magento_Checkout/js/action/create-billing-address',\n    'text!ClassyLlama_AvaTax/template/modal/modal-popup.html'\n], function (\n    $,\n    ko,\n    addressModel,\n    addressValidationForm,\n    checkoutDataResolver,\n    quote,\n    selectBillingAddress,\n    createBillingAddress,\n    popupTpl\n) {\n\n    $.widget('ClassyLlama_AvaTax.checkoutBillingAddressValidationModal', $.mage.modal, {\n        validationContainer: '.billingValidationModal .modal-content > div',\n        formSelector: '.billing-address-form form',\n        options: {\n            title: $.mage.__('Verify Your Billing Address'),\n            modalClass: 'billingValidationModal',\n            focus: '.billingValidationModal .action-primary',\n            responsive: true,\n            closeText: $.mage.__('Close'),\n            popupTpl: popupTpl,\n            buttons: [\n                {\n                    text: $.mage.__('Edit Address'),\n                    class: 'action-secondary action-dismiss',\n                    click: function () {\n                        this.editAddress();\n                    }\n                },\n                {\n                    text: $.mage.__('Save Address'),\n                    class: 'action-primary action primary',\n                    click: function () {\n                        if (addressModel.isDifferent()) {\n                            addressModel.selectedAddress()['save_in_address_book'] = quote.billingAddress().saveInAddressBook;\n                            selectBillingAddress(createBillingAddress(addressModel.selectedAddress()));\n                            checkoutDataResolver.applyBillingAddress();\n                            addressValidationForm.updateFormFields(this.formSelector);\n                        }\n                        window.checkoutConfig.billingAddressValidation.isAddressValid = true;\n                        this.clickNativePlaceOrder();\n                        this.closeModal();\n                    }\n                }\n            ]\n        },\n\n        _create: function () {\n            this._super();\n            addressValidationForm.bindTemplate(this.validationContainer, this.options, 'ClassyLlama_AvaTax/baseValidateAddress');\n        },\n\n        openModal: function () {\n            this._super();\n            var self = this;\n            $(this.validationContainer + \" .edit-address\").on('click', function () {\n                self.editAddress();\n            });\n        },\n\n        closeModal: function () {\n            this._super();\n        },\n\n        editAddress: function () {\n            var self = this;\n            self.clickNativeEditBillingAddress();\n            window.checkoutConfig.billingAddressValidation.isAddressValid = false;\n            self.closeModal();\n        },\n\n        clickNativePlaceOrder: function () {\n            $('.payment-method._active button[type=submit].checkout').click();\n        },\n\n        clickNativeEditBillingAddress: function () {\n            $('.payment-method._active .action-edit-address').click();\n        }\n    });\n\n    return $.ClassyLlama_AvaTax.checkoutBillingAddressValidationModal;\n});\n","ClassyLlama_AvaTax/js/view/billingAddressValidation.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'ClassyLlama_AvaTax/js/model/billingAddressValidation'\n    ],\n    function (Component, additionalValidators, billingAddressValidator) {\n        'use strict';\n        additionalValidators.registerValidator(billingAddressValidator);\n        return Component.extend({});\n    }\n);\n","ClassyLlama_AvaTax/js/view/certificate-authentication-popup.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\ndefine([\n    'Magento_Customer/js/view/authentication-popup',\n    'ClassyLlama_AvaTax/js/model/certificate-authentication-popup',\n    'Magento_Customer/js/action/login',\n    'jquery',\n    'mage/url'\n], function (CustomerAuthenticationPopup, authenticationPopupModel, loginAction, jQuery, url) {\n    'use strict';\n\n    return CustomerAuthenticationPopup.extend({\n        defaults: {\n            registerUrl: url.build('customer/account/create?redirect=checkout'),\n            template: 'ClassyLlama_AvaTax/certificate-authentication-popup'\n        },\n\n        /** Init popup login window */\n        setModalElement: function (element) {\n            if (authenticationPopupModel.modalWindow == null) {\n                authenticationPopupModel.createPopUp(element);\n            }\n        },\n\n        login: function (formUiElement, event) {\n            var loginData = {},\n                formElement = jQuery(event.currentTarget),\n                formDataArray = formElement.serializeArray();\n\n            event.stopPropagation();\n            formDataArray.forEach(function (entry) {\n                loginData[entry.name] = entry.value;\n            });\n\n            if (formElement.validation() &&\n                formElement.validation('isValid')\n            ) {\n                this.isLoading(true);\n                // BEGIN EDIT\n                loginAction(loginData, url.build('checkout'));\n                // END EDIT\n            }\n\n            return false;\n        }\n    });\n});\n","ClassyLlama_AvaTax/js/view/ReviewPayment.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        \"underscore\",\n        'uiComponent',\n        'ko',\n        'mageUtils',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/step-navigator',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Checkout/js/action/get-payment-information',\n        'Magento_Checkout/js/model/checkout-data-resolver'\n    ],\n    function (\n        $,\n        _,\n        Component,\n        ko,\n        utils,\n        quote,\n        stepNavigator,\n        paymentService,\n        methodConverter,\n        getPaymentInformation,\n        checkoutDataResolver\n    ) {\n        'use strict';\n\n        /** Set payment methods to collection */\n        paymentService.setPaymentMethods(methodConverter(window.checkoutConfig.paymentMethods));\n\n        return Component.extend({\n            defaults: {\n                template: 'ClassyLlama_AvaTax/ReviewPayment',\n                paymentTemplate: 'Magento_Checkout/payment',\n                checkoutValidateAddressTemplate: 'ClassyLlama_AvaTax/checkoutValidateAddress',\n                baseValidateAddressTemplate: 'ClassyLlama_AvaTax/baseValidateAddress',\n                activeMethod: ''\n            },\n            isVisible: ko.observable(quote.isVirtual()),\n            quoteIsVirtual: quote.isVirtual(),\n            isPaymentMethodsAvailable: ko.computed(function () {\n                return paymentService.getAvailablePaymentMethods().length > 0;\n            }),\n            context: 'checkout',\n            uid: utils.uniqueid(),\n\n            initialize: function () {\n                this._super();\n                checkoutDataResolver.resolvePaymentMethod();\n                stepNavigator.registerStep(\n                    'payment',\n                    null,\n                    'Review & Payments',\n                    this.isVisible,\n                    _.bind(this.navigate, this),\n                    20\n                );\n                return this;\n            },\n\n            navigate: function () {\n                var self = this;\n                getPaymentInformation().done(function () {\n                    self.isVisible(true);\n                    $('#validate_address').hide();\n                });\n            },\n\n            getFormKey: function() {\n                return window.checkoutConfig.formKey;\n            },\n\n            /**\n             * Used in ReviewPayment.html to return the template path\n             */\n            getPaymentTemplate: function () {\n                return this.paymentTemplate;\n            },\n\n            /**\n             * Used in ReviewPayment.html to return the template path\n             */\n            getCheckoutValidateAddressTemplate: function () {\n                return this.checkoutValidateAddressTemplate;\n            },\n\n            /**\n             * Used in checkoutValidateAddress.html to return the template path\n             */\n            getBaseValidateAddressTemplate: function () {\n                return this.baseValidateAddressTemplate;\n            }\n        });\n    }\n);\n","ClassyLlama_AvaTax/js/view/update-address.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/quote'\n    ],\n    function (\n        $,\n        quote\n    ) {\n        'use strict';\n\n        return function (address, dontCheckForBillingAddress) {\n            var quoteShippingAddress = quote.shippingAddress();\n            var propertiesToUpdateFromCustomerAddress = ['region', 'region_id', 'country_id', 'street', 'postcode', 'city'];\n            var propertiesToUpdateFromQuoteAddress = ['country_id', 'region_code', 'street', 'postcode', 'city', 'region_id', 'region'];\n            var propertiesToUpdate = $.extend(propertiesToUpdateFromCustomerAddress, propertiesToUpdateFromQuoteAddress);\n            var addressChanges = {};\n            for(var index in propertiesToUpdate ) {\n                var property = propertiesToUpdate[index];\n                if(address && address.hasOwnProperty(property)) {\n                    addressChanges[property] = address[property];\n                }\n            }\n            var newAddress = $.extend(quoteShippingAddress, addressChanges);\n            quote.shippingAddress(newAddress);\n\n            // dontCheckForBillingAddress allows for the billing address to be updated even when billing address same\n            // as shipping is not checked. This is necessary because the checkbox isn't always checked by the time this\n            // line is executed. This is only the case on the initial loading of the Review & Payments step so the\n            // dontCheckForBillingAddress property is set to true on the initial loading of that step and false when\n            // switching between the suggested and original address.\n            if (($('input[name=billing-address-same-as-shipping]').filter(':checked').length || (dontCheckForBillingAddress && !quote.billingAddress().isDefaultBilling())) && quote.shippingAddress().canUseForBilling()) {\n                quote.billingAddress(newAddress);\n            }\n        };\n    }\n);\n\n","ClassyLlama_AvaTax/js/view/address-validation-modal.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine([\n    'jquery',\n    'ko',\n    'ClassyLlama_AvaTax/js/model/address-model',\n    'ClassyLlama_AvaTax/js/action/set-customer-address',\n    'ClassyLlama_AvaTax/js/model/address-converter',\n    'ClassyLlama_AvaTax/js/view/address-validation-form',\n    'text!ClassyLlama_AvaTax/template/modal/modal-popup.html',\n    'Magento_Ui/js/modal/modal'\n], function(\n    $,\n    ko,\n    addressModel,\n    setCustomerAddress,\n    addressConverter,\n    addressValidationForm,\n    popupTpl\n){\n\n    $.widget('ClassyLlama_AvaTax.addressValidationModal', $.mage.modal, {\n        options: {\n            title: $.mage.__('Verify Your Address'),\n            modalClass: 'validationModal',\n            focus: '.validationModal .action-primary',\n            responsive: true,\n            closeText: $.mage.__('Close'),\n            popupTpl: popupTpl,\n            buttons: [\n                {\n                    text: $.mage.__('Edit Address'),\n                    class: 'action-secondary action-dismiss',\n                    click: function () {\n                        this.enableSubmit($(this.formSelector));\n                        this.closeModal();\n                    }\n                },\n                {\n                    text: $.mage.__('Save Address'),\n                    class: 'action-primary action primary',\n                    click: function () {\n                        if (addressModel.isDifferent()) {\n                            addressValidationForm.updateFormFields(this.formSelector);\n                        }\n                        this.closeModal();\n                        $(this.formSelector).off('submit');\n                        $(this.formSelector).submit();\n                    }\n                }\n            ]\n        },\n        validationContainer: '.validationModal .modal-content > div',\n        formSelector: '.form-address-edit',\n        /**\n         * Creates modal widget.\n         */\n        _create: function () {\n            this._super();\n\n            this.handleFormSubmit();\n            addressValidationForm.bindTemplate(this.validationContainer, this.options, 'ClassyLlama_AvaTax/baseValidateAddress');\n        },\n\n        openModal: function () {\n            this._super();\n            var self = this;\n            $(this.validationContainer + \" .edit-address\").on('click', function () {\n                self.closeModal();\n            });\n        },\n\n        closeModal: function () {\n            this._super();\n            this.enableSubmit($(this.formSelector));\n        },\n\n        handleFormSubmit: function () {\n            var self = this;\n\n            // Set the status of the AvaTax address validation config setting for use elsewhere in form processing;\n            // specifically form submission\n            $(self.formSelector).data('avataxAddressValidationEnabled', self.options.validationEnabled);\n\n            $(this.formSelector).on('submit', function (e) {\n                if (self.options.validationEnabled) {\n                    try {\n                        $('.validateAddressForm').show();\n                        var isValid = $(':mage-validation').validation('isValid');\n                        if (isValid) {\n                            e.preventDefault();\n                            addressModel.error(null);\n                            var formData = $(self.formSelector).serializeObject();\n                            var addressObject = addressConverter.formAddressDataToCustomerAddress(formData);\n                            var inCountry = $.inArray(addressObject.countryId, self.options.countriesEnabled.split(',')) >= 0;\n                            if (inCountry) {\n                                addressModel.originalAddress(addressObject);\n                                $('body').trigger('processStart');\n                                setCustomerAddress().done(function (response) {\n                                    if (typeof response === 'string') {\n                                        addressModel.error(response);\n                                    } else {\n                                        addressModel.validAddress(response);\n                                    }\n                                    addressValidationForm.fillValidateForm(self.validationContainer);\n                                    if (addressModel.isDifferent() || addressModel.error() != null) {\n                                        $('.validateAddressForm').show();\n                                        self.openModal();\n                                    } else {\n                                        $(self.formSelector).off();\n                                        $(self.formSelector).submit();\n                                    }\n                                    $('body').trigger('processStop');\n                                });\n                            } else {\n                                $(self.formSelector).off();\n                                $(self.formSelector).submit();\n                            }\n                        }\n                    } catch (e) {\n                        // If the address could not be validated for some reason, submit the form normally\n                        $(self.formSelector).off();\n                        $(self.formSelector).submit();\n                    }\n                }\n            });\n        },\n\n        enableSubmit: function (form) {\n            $(form).find(\"[type=submit]\").prop(\"disabled\", false);\n        }\n    });\n\n    return $.ClassyLlama_AvaTax.addressValidationModal;\n});\n","ClassyLlama_AvaTax/js/view/checkout-validation-handler.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2016 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/step-navigator',\n        'ClassyLlama_AvaTax/js/action/set-shipping-address',\n        'ClassyLlama_AvaTax/js/view/update-address',\n        'ClassyLlama_AvaTax/js/model/address-model',\n        'ClassyLlama_AvaTax/js/view/address-validation-form'\n    ],\n    function (\n        $,\n        stepNavigator,\n        setShippingAddress,\n        updateAddress,\n        addressModel,\n        addressValidationForm\n    ) {\n        'use strict';\n\n        return {\n            options: {\n                validateAddressContainerSelector: '#validate_address'\n            },\n            validAddressRadioSelector: '.validAddress',\n            addressValidationRadioGroupName: 'addressToUse',\n\n            validationResponseHandler: function (response) {\n                addressModel.error(null);\n                if (typeof response.extension_attributes !== 'undefined') {\n                    $(this.options.validateAddressContainerSelector + ' *').fadeIn();\n                    this.toggleAddressToUse();\n                    if (typeof response.extension_attributes.valid_address !== 'undefined') {\n                        updateAddress(response.extension_attributes.valid_address, true);\n                        addressModel.validAddress(response.extension_attributes.valid_address);\n                    }\n                    addressModel.originalAddress(response.extension_attributes.original_address);\n                    if (typeof response.extension_attributes.error_message !== 'undefined') {\n                        addressModel.error(response.extension_attributes.error_message)\n                    }\n                    addressValidationForm.fillValidateForm(this.options.validateAddressContainerSelector);\n                    if (!addressModel.isDifferent() && addressModel.error() == null) {\n                        $(this.options.validateAddressContainerSelector + \" *\").hide();\n                    }\n                    // This click event handler is to allow the user to navigate to the first step to change their\n                    // address if they notice an error in their address on the Review & Payments step by clicking\n                    // a link in the instructions above their address\n                    $(this.options.validateAddressContainerSelector + ' .instructions .edit-address').on('click', function () {\n                        stepNavigator.navigateTo('shipping', 'shipping');\n                    });\n                } else {\n                    $(this.options.validateAddressContainerSelector + \" *\").hide();\n                }\n            },\n\n            toggleAddressToUse: function () {\n                var self = this;\n                // This function is called every time an initial address validation request is made which could happen\n                // multiple times so the change event binding is removed to prevent multiple api requests being sent\n                // when a user selects between the original and valid address\n                $('input[name=' + this.addressValidationRadioGroupName + ']:radio').off('change');\n                $('input[name=' + this.addressValidationRadioGroupName + ']:radio').on('change', function() {\n                    var validSelected = $(self.validAddressRadioSelector).is(':checked');\n                    setShippingAddress(validSelected);\n                });\n            }\n        };\n    }\n);\n","ClassyLlama_AvaTax/js/view/checkout/summary/tax/mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\n\ndefine(['mage/translate'], function ($t) {\n    'use strict';\n\n    var customsTitle = $t('Duty'),\n        totalTaxTitle = $t('Import Fees');\n\n    return function (taxModule) {\n        taxModule.prototype.hasCustomsTax = function () {\n            return this.getDetails().some(function (detail) {\n                return detail.rates.some(function (rate) {\n                    return rate.title === customsTitle;\n                });\n            });\n        };\n\n        taxModule.prototype.getTotalTaxTitle = function () {\n            if (taxModule.prototype.hasCustomsTax()) {\n                return totalTaxTitle;\n            } else {\n                return this.title;\n            }\n        };\n\n        taxModule.prototype.getValueDetail = function () {\n            var dutyTaxValue = 0;\n\n            this.getDetails().some(function (detail) {\n                if(detail.rates.some(function (rate) { return rate.title !== customsTitle; })) {\n                    dutyTaxValue += detail.amount;\n                }\n            });\n\n            return this.getFormattedPrice(dutyTaxValue);\n        };\n\n        taxModule.prototype.getTaxTitle = function (rate) {\n            var percent = rate.percent;\n\n            if(rate.title === customsTitle) {\n                percent = null;\n            }\n\n            return rate.title + (percent !== null ? ' (' + percent + '%)' : '');\n        };\n\n        taxModule.prototype.getCustomTaxClass = function (rate) {\n            if(rate.title === customsTitle) {\n                return 'true';\n            }\n\n            return '';\n        };\n\n        return taxModule;\n    };\n});\n","ClassyLlama_AvaTax/js/view/payment/list/certificates-link.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\ndefine([\n    'Magento_Checkout/js/model/totals',\n    'ClassyLlama_AvaTax/js/certificates-sdk',\n    'jquery',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/action/get-totals',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'mage/storage',\n    'ClassyLlama_AvaTax/js/action/set-shipping-address',\n    'ClassyLlama_AvaTax/js/model/certificate-authentication-popup',\n    'Magento_Customer/js/customer-data',\n    'Magento_Customer/js/model/customer'\n], function (totals, sdk, jQuery, quote, getTotalsAction, fullScreenLoader, storage, setShippingAddress, certificateAuthenticationPopup, customerDataModel, customerModel) {\n    'use strict';\n\n    return function (targetModule) {\n        var parentInitialize = targetModule.prototype.initialize;\n\n        // Inject into the initialize method so that we can subscribe to address changes\n        targetModule.prototype.initialize = function initialize() {\n            parentInitialize.apply(this, arguments);\n\n            this.shippingToEnabledCountry = false;\n            this.hasUploadedCertificate = false;\n            this.observe(['shippingToEnabledCountry', 'hasUploadedCertificate']);\n\n            if (this.enabledCountries === void(0)) {\n                this.enabledCountries = [];\n            }\n\n            quote.shippingAddress.subscribe(function (address) {\n                this.shippingToEnabledCountry(this.enabledCountries.indexOf(address.countryId) >= 0);\n            }.bind(this));\n\n            jQuery(window.document).on('checkout.navigateTo', function () {\n                this.hasUploadedCertificate(false);\n            }.bind(this));\n        };\n\n        targetModule.prototype.ifShowCertificateLink = function ifShowCertificateLink() {\n            if(this.documentManagementEnabled === false) {\n                return false;\n            }\n\n            var amount = 0,\n                taxTotal;\n\n            if (totals) {\n                taxTotal = totals.getSegment('tax');\n\n                if (taxTotal) {\n                    amount = taxTotal.value;\n                }\n            }\n\n            return amount > 0;\n        };\n\n        targetModule.prototype.ifShowManageCertificateLink = function ifShowManageCertificateLink() {\n            return customerModel.isLoggedIn();\n        };\n\n        targetModule.prototype.showNewCertificateModal = function showNewCertificateModal() {\n            // If there is no customer (guest checkout), show the login instead\n            if(customerDataModel.get('customer')().firstname === void(0)) {\n                certificateAuthenticationPopup.showModal();\n                return;\n            }\n\n            if (this.dialogElement === void(0)) {\n                this.dialogElement = jQuery('<div class=\"avatax-certificate-dialog\" />').appendTo('body');\n                this.dialogElement.modal({buttons: []});\n            }\n\n            var onCertificateComplete = (function () {\n                this.hasUploadedCertificate(true);\n                this.refreshTotals();\n            }).bind(this);\n\n            this.dialogElement.empty();\n            this.dialogElement.modal('openModal');\n\n            sdk(this.dialogElement[0], {\n                // Include if cert is a renewal?\n                upload: true,\n\t\t\t\tsubmit_to_stack: Boolean(Number(this.certificatesAutoValidationDisabled)),\n                onCertSuccess: onCertificateComplete,\n                onManualSubmit: onCertificateComplete,\n                onUpload: onCertificateComplete\n            }).then(function () {\n                var address = quote.shippingAddress();\n\n                GenCert.setShipZone(address.region);\n                GenCert.show();\n\n                this.dialogElement.modal('openModal');\n            }.bind(this))\n        };\n\n        targetModule.prototype.refreshTotals = function refreshTotals() {\n            GenCert.hide();\n            this.dialogElement.modal('closeModal');\n\n            this.refreshCache();\n        };\n\n        targetModule.prototype.refreshCache = function refreshCache() {\n\n            fullScreenLoader.startLoader();\n\n            // Clear cached AvaTax taxes for this customer and then trigger a \"collect totals\"\n            return storage.get('/rest/V1/avatax/tax/refresh').then(function () {\n                // Use this as a cheap way of being able to re-load taxes\n                return setShippingAddress();\n            }).always(\n                function () {\n                    fullScreenLoader.stopLoader();\n                }\n            );\n        };\n\n        return targetModule;\n    };\n});\n","ClassyLlama_AvaTax/js/view/estimation/mixin.js":"/**\n * ClassyLlama_AvaTax\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://opensource.org/licenses/osl-3.0.php\n *\n * @copyright  Copyright (c) 2018 Avalara, Inc.\n * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)\n */\n\ndefine(['Magento_Checkout/js/model/totals'], function (totals) {\n    'use strict';\n\n    return function (estimationModule) {\n        estimationModule.prototype.getDetails = function() {\n            var taxSegment = totals.getSegment('tax');\n\n            if (taxSegment && taxSegment['extension_attributes']) {\n                return taxSegment['extension_attributes']['tax_grandtotal_details'];\n            }\n\n            return [];\n        };\n\n        estimationModule.prototype.hasAvaTaxMessages = function () {\n            var totalsExtensionAttributes = totals.totals().extension_attributes;\n\n            return totalsExtensionAttributes !== void(0) && totalsExtensionAttributes.avatax_messages !== void(0) && totalsExtensionAttributes.avatax_messages.length > 0;\n        };\n\n        return estimationModule;\n    };\n});\n","ClassyLlama_AvaTax/js/lib/serialize-form.js":"/**\n * jQuery serializeObject\n * @copyright 2014, macek <paulmacek@gmail.com>\n * @link https://github.com/macek/jquery-serialize-object\n * @license BSD\n * @version 2.5.0\n */\n!function(e,i){if(\"function\"==typeof define&&define.amd)define([\"exports\",\"jquery\"],function(e,r){return i(e,r)});else if(\"undefined\"!=typeof exports){var r=require(\"jquery\");i(exports,r)}else i(e,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,i){function r(e,r){function n(e,i,r){return e[i]=r,e}function a(e,i){for(var r,a=e.match(t.key);void 0!==(r=a.pop());)if(t.push.test(r)){var u=s(e.replace(/\\[\\]$/,\"\"));i=n([],u,i)}else t.fixed.test(r)?i=n([],r,i):t.named.test(r)&&(i=n({},r,i));return i}function s(e){return void 0===h[e]&&(h[e]=0),h[e]++}function u(e){switch(i('[name=\"'+e.name+'\"]',r).attr(\"type\")){case\"checkbox\":return\"on\"===e.value?!0:e.value;default:return e.value}}function f(i){if(!t.validate.test(i.name))return this;var r=a(i.name,u(i));return l=e.extend(!0,l,r),this}function d(i){if(!e.isArray(i))throw new Error(\"formSerializer.addPairs expects an Array\");for(var r=0,t=i.length;t>r;r++)this.addPair(i[r]);return this}function o(){return l}function c(){return JSON.stringify(o())}var l={},h={};this.addPair=f,this.addPairs=d,this.serialize=o,this.serializeJSON=c}var t={validate:/^[a-z_][a-z0-9_]*(?:\\[(?:\\d*|[a-z0-9_]+)\\])*$/i,key:/[a-z0-9_]+|(?=\\[\\])/gi,push:/^$/,fixed:/^\\d+$/,named:/^[a-z0-9_]+$/i};return r.patterns=t,r.serializeObject=function(){return new r(i,this).addPairs(this.serializeArray()).serialize()},r.serializeJSON=function(){return new r(i,this).addPairs(this.serializeArray()).serializeJSON()},\"undefined\"!=typeof i.fn&&(i.fn.serializeObject=r.serializeObject,i.fn.serializeJSON=r.serializeJSON),e.FormSerializer=r,r});\n","Meetanshi_ImageClean/js/grid/columns/popup.js":"define([\n    'Magento_Ui/js/grid/columns/column',\n    'jquery',\n    'mage/template',\n    'text!Meetanshi_ImageClean/templates/grid/cells/custom/popup.html',\n    'Magento_Ui/js/modal/modal'\n], function (Column, $, mageTemplate, imagePreviewTemplate) {\n    'use strict';\n\n    return Column.extend({\n        defaults: {\n            bodyTmpl: 'ui/grid/cells/html',\n            fieldClass: {\n                'data-grid-html-cell': true\n            }\n        },\n        gethtml: function (row) {\n            return row[this.index + '_img'];\n        },\n        getImages: function (row) {\n            return row[this.index+'_img'];\n        },\n        preview: function (row) {\n            var modalHtml = mageTemplate(\n                imagePreviewTemplate,\n                {\n                    html: this.gethtml(row),\n                    label: '',\n                    customerid:'01',\n                    img: this.getImages(row),\n                }\n            );\n            var previewPopup = $('<div/>').html(modalHtml);\n            previewPopup.modal({\n                title: '',\n                innerScroll: true,\n                modalClass: '_image-box',\n                buttons: []}).trigger('openModal');\n        },\n        getFieldHandler: function (row) {\n            return this.preview.bind(this, row);\n        }\n    });\n});","Magento_Captcha/js/captcha.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    /**\n     * @api\n     */\n    $.widget('mage.captcha', {\n        options: {\n            refreshClass: 'refreshing',\n            reloadSelector: '.captcha-reload',\n            imageSelector: '.captcha-img',\n            imageLoader: ''\n        },\n\n        /**\n         * Method binds click event to reload image\n         * @private\n         */\n        _create: function () {\n            this.element.on('click', this.options.reloadSelector, $.proxy(this.refresh, this));\n        },\n\n        /**\n         * Method triggers an AJAX request to refresh the CAPTCHA image\n         */\n        refresh: function () {\n            var imageLoader = this.options.imageLoader;\n\n            if (imageLoader) {\n                this.element.find(this.options.imageSelector).attr('src', imageLoader);\n            }\n            this.element.addClass(this.options.refreshClass);\n\n            $.ajax({\n                url: this.options.url,\n                type: 'post',\n                dataType: 'json',\n                context: this,\n                data: {\n                    'formId': this.options.type\n                },\n\n                /**\n                 * @param {Object} response\n                 */\n                success: function (response) {\n                    if (response.imgSrc) {\n                        this.element.find(this.options.imageSelector).attr('src', response.imgSrc);\n                    }\n                },\n\n                /** Complete callback. */\n                complete: function () {\n                    this.element.removeClass(this.options.refreshClass);\n                }\n            });\n        }\n    });\n\n    return $.mage.captcha;\n});\n","Magento_Captcha/js/action/refresh.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery', 'mage/url'\n], function ($, urlBuilder) {\n    'use strict';\n\n    return function (refreshUrl, formId, imageSource) {\n        return $.ajax({\n            url: urlBuilder.build(refreshUrl),\n            type: 'POST',\n            data: JSON.stringify({\n                'formId': formId\n            }),\n            global: false,\n            contentType: 'application/json'\n        }).done(\n            function (response) {\n                if (response.imgSrc) {\n                    imageSource(response.imgSrc);\n                }\n            }\n        );\n    };\n});\n","Magento_Captcha/js/model/captcha.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'ko',\n    'Magento_Captcha/js/action/refresh'\n], function ($, ko, refreshAction) {\n    'use strict';\n\n    return function (captchaData) {\n        return {\n            formId: captchaData.formId,\n            imageSource: ko.observable(captchaData.imageSrc),\n            visibility: ko.observable(false),\n            captchaValue: ko.observable(null),\n            isRequired: ko.observable(captchaData.isRequired),\n            isCaseSensitive: captchaData.isCaseSensitive,\n            imageHeight: captchaData.imageHeight,\n            refreshUrl: captchaData.refreshUrl,\n            isLoading: ko.observable(false),\n            timestamp: null,\n\n            /**\n             * @return {String}\n             */\n            getFormId: function () {\n                return this.formId;\n            },\n\n            /**\n             * @param {String} formId\n             */\n            setFormId: function (formId) {\n                this.formId = formId;\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            getIsVisible: function () {\n                return this.visibility();\n            },\n\n            /**\n             * @param {Boolean} flag\n             */\n            setIsVisible: function (flag) {\n                this.visibility(flag);\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            getIsRequired: function () {\n                return this.isRequired();\n            },\n\n            /**\n             * @param {Boolean} flag\n             */\n            setIsRequired: function (flag) {\n                this.isRequired(flag);\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            getIsCaseSensitive: function () {\n                return this.isCaseSensitive;\n            },\n\n            /**\n             * @param {Boolean} flag\n             */\n            setIsCaseSensitive: function (flag) {\n                this.isCaseSensitive = flag;\n            },\n\n            /**\n             * @return {String|Number}\n             */\n            getImageHeight: function () {\n                return this.imageHeight;\n            },\n\n            /**\n             * @param {String|Number}height\n             */\n            setImageHeight: function (height) {\n                this.imageHeight = height;\n            },\n\n            /**\n             * @return {String}\n             */\n            getImageSource: function () {\n                return this.imageSource;\n            },\n\n            /**\n             * @param {String} imageSource\n             */\n            setImageSource: function (imageSource) {\n                this.imageSource(imageSource);\n            },\n\n            /**\n             * @return {String}\n             */\n            getRefreshUrl: function () {\n                return this.refreshUrl;\n            },\n\n            /**\n             * @param {String} url\n             */\n            setRefreshUrl: function (url) {\n                this.refreshUrl = url;\n            },\n\n            /**\n             * @return {*}\n             */\n            getCaptchaValue: function () {\n                return this.captchaValue;\n            },\n\n            /**\n             * @param {*} value\n             */\n            setCaptchaValue: function (value) {\n                this.captchaValue(value);\n            },\n\n            /**\n             * Refresh captcha.\n             */\n            refresh: function () {\n                var refresh,\n                    self = this;\n\n                this.isLoading(true);\n\n                refresh = refreshAction(this.getRefreshUrl(), this.getFormId(), this.getImageSource());\n                $.when(refresh).done(function () {\n                    self.isLoading(false);\n                });\n            }\n        };\n    };\n});\n","Magento_Captcha/js/model/captchaList.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['jquery'], function ($) {\n    'use strict';\n\n    var captchaList = [];\n\n    return {\n        /**\n         * @param {Object} captcha\n         */\n        add: function (captcha) {\n            captchaList.push(captcha);\n        },\n\n        /**\n         * @param {String} formId\n         * @return {Object}\n         */\n        getCaptchaByFormId: function (formId) {\n            var captcha = null;\n\n            $.each(captchaList, function (key, item) {\n                if (formId === item.formId) {\n                    captcha = item;\n\n                    return false;\n                }\n            });\n\n            return captcha;\n        },\n\n        /**\n         * @return {Array}\n         */\n        getCaptchaList: function () {\n            return captchaList;\n        }\n    };\n});\n","Magento_Captcha/js/view/checkout/defaultCaptcha.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'uiComponent',\n    'Magento_Captcha/js/model/captcha',\n    'Magento_Captcha/js/model/captchaList',\n    'Magento_Customer/js/customer-data',\n    'underscore'\n], function ($, Component, Captcha, captchaList, customerData, _) {\n    'use strict';\n\n    var captchaConfig;\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Captcha/checkout/captcha'\n        },\n        dataScope: 'global',\n        currentCaptcha: null,\n        subscribedFormIds: [],\n\n        /**\n         * @return {*}\n         */\n        captchaValue: function () {\n            return this.currentCaptcha.getCaptchaValue();\n        },\n\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            if (window[this.configSource] && window[this.configSource].captcha) {\n                captchaConfig = window[this.configSource].captcha;\n                $.each(captchaConfig, function (formId, captchaData) {\n                    var captcha;\n\n                    captchaData.formId = formId;\n                    captcha = Captcha(captchaData);\n                    this.checkCustomerData(formId, customerData.get('captcha')(), captcha);\n                    this.subscribeCustomerData(formId, captcha);\n                    captchaList.add(captcha);\n                }.bind(this));\n            }\n        },\n\n        /**\n         * Check customer data for captcha configuration.\n         *\n         * @param {String} formId\n         * @param {Object} captchaData\n         * @param {Object} captcha\n         */\n        checkCustomerData: function (formId, captchaData, captcha) {\n            if (!_.isEmpty(captchaData) &&\n                !_.isEmpty(captchaData[formId]) &&\n                captchaData[formId].timestamp > captcha.timestamp\n            ) {\n                if (!captcha.isRequired() && captchaData[formId].isRequired) {\n                    captcha.refresh();\n                }\n                captcha.isRequired(captchaData[formId].isRequired);\n                captcha.timestamp = captchaData[formId].timestamp;\n            }\n        },\n\n        /**\n         * Subscribe for customer data updates.\n         *\n         * @param {String} formId\n         * @param {Object} captcha\n         */\n        subscribeCustomerData: function (formId, captcha) {\n            if (this.subscribedFormIds.includes(formId) === false) {\n                this.subscribedFormIds.push(formId);\n                customerData.get('captcha').subscribe(function (captchaData) {\n                    this.checkCustomerData(formId, captchaData, captcha);\n                }.bind(this));\n            }\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        getIsLoading: function () {\n            return this.currentCaptcha !== null ? this.currentCaptcha.isLoading : false;\n        },\n\n        /**\n         * @return {null|Object}\n         */\n        getCurrentCaptcha: function () {\n            return this.currentCaptcha;\n        },\n\n        /**\n         * @param {Object} captcha\n         */\n        setCurrentCaptcha: function (captcha) {\n            this.currentCaptcha = captcha;\n        },\n\n        /**\n         * @return {String|null}\n         */\n        getFormId: function () {\n            return this.currentCaptcha !== null ? this.currentCaptcha.getFormId() : null;\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        getIsVisible: function () {\n            return this.currentCaptcha !== null ? this.currentCaptcha.getIsVisible() : false;\n        },\n\n        /**\n         * @param {Boolean} flag\n         */\n        setIsVisible: function (flag) {\n            this.currentCaptcha.setIsVisible(flag);\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        isRequired: function () {\n            return this.currentCaptcha !== null ? this.currentCaptcha.getIsRequired() : false;\n        },\n\n        /**\n         * Set isRequired on current captcha model.\n         *\n         * @param {Boolean} flag\n         */\n        setIsRequired: function (flag) {\n            this.currentCaptcha.setIsRequired(flag);\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        isCaseSensitive: function () {\n            return this.currentCaptcha !== null ? this.currentCaptcha.getIsCaseSensitive() : false;\n        },\n\n        /**\n         * @return {String|Number|null}\n         */\n        imageHeight: function () {\n            return this.currentCaptcha !== null ? this.currentCaptcha.getImageHeight() : null;\n        },\n\n        /**\n         * @return {String|null}\n         */\n        getImageSource: function () {\n            return this.currentCaptcha !== null ? this.currentCaptcha.getImageSource() : null;\n        },\n\n        /**\n         * Refresh captcha.\n         */\n        refresh: function () {\n            this.currentCaptcha.refresh();\n        }\n    });\n});\n","Magento_Captcha/js/view/checkout/loginCaptcha.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\n    'Magento_Captcha/js/model/captchaList',\n    'Magento_Customer/js/action/login',\n    'underscore'\n],\nfunction (defaultCaptcha, captchaList, loginAction, _) {\n    'use strict';\n\n    return defaultCaptcha.extend({\n        /** @inheritdoc */\n        initialize: function () {\n            var self = this,\n                currentCaptcha;\n\n            this._super();\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\n\n            if (currentCaptcha != null) {\n                currentCaptcha.setIsVisible(true);\n                this.setCurrentCaptcha(currentCaptcha);\n\n                loginAction.registerLoginCallback(function (loginData) {\n                    if (loginData['captcha_form_id'] &&\n                        loginData['captcha_form_id'] === self.formId &&\n                        self.isRequired()\n                    ) {\n                        _.defer(self.refresh.bind(self));\n                    }\n                });\n            }\n        }\n    });\n});\n","Magento_Sales/js/gift-message.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.giftMessage', {\n        options: {\n            rowPrefix: '#order-item-row-', // Selector prefix for item's row in the table.\n            linkPrefix: '#order-item-gift-message-link-', // Selector prefix for the 'Gift Message' link.\n            duration: 100, // Toggle duration.\n            expandedClass: 'expanded', // Class added/removed to/from the 'Gift Message' link.\n            expandedContentClass: 'expanded-content', // Class added/removed to/from the 'Gift Message' content.\n            lastClass: 'last' // Class added/removed to/from the last item's row in the products table.\n        },\n\n        /**\n         * Bind a click handler on the widget's element to toggle the gift message.\n         * @private\n         */\n        _create: function () {\n            this.element.on('click', $.proxy(this._toggleGiftMessage, this));\n        },\n\n        /**\n         * Toggle the display of the item's corresponding gift message.\n         * @private\n         * @param {jQuery.Event} event - Click event.\n         */\n        _toggleGiftMessage: function (event) {\n            var element = $(event.target), // Click target. The 'Gift Message' link or 'Close' button.\n                options = this.options, // Cached widget options.\n                itemId = element.data('item-id'), // The individual item's numeric id.\n                link = $(options.linkPrefix + itemId), // The 'Gift Message' expandable link.\n                row = $(options.rowPrefix + itemId), // The item's row in the products table.\n                region = $('#' + element.attr('aria-controls')); // The gift message container region.\n\n            region.toggleClass(options.expandedContentClass, options.duration, function () {\n                if (region.attr('aria-expanded') === 'true') {\n                    region.attr('aria-expanded', 'false');\n\n                    if (region.hasClass(options.lastClass)) {\n                        row.addClass(options.lastClass);\n                    }\n                } else {\n                    region.attr('aria-expanded', 'true');\n\n                    if (region.hasClass(options.lastClass)) {\n                        row.removeClass(options.lastClass);\n                    }\n                }\n                link.toggleClass(options.expandedClass);\n            });\n            event.preventDefault(); // Prevent event propagation and avoid going to the link's href.\n        }\n    });\n\n    return $.mage.giftMessage;\n});\n","Magento_Sales/js/orders-returns.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.ordersReturns', {\n        options: {\n            zipCode: '#oar-zip', // Search by zip code.\n            emailAddress: '#oar-email', // Search by email address.\n            searchType: '#quick-search-type-id' // Search element used for choosing between the two.\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            $(this.options.searchType).on('change', $.proxy(this._showIdentifyBlock, this)).trigger('change');\n        },\n\n        /**\n         * Show either the search by zip code option or the search by email address option.\n         * @private\n         * @param {jQuery.Event} e - Change event. Event target value is either 'zip' or 'email'.\n         */\n        _showIdentifyBlock: function (e) {\n            var value = $(e.target).val();\n\n            $(this.options.zipCode).toggle(value === 'zip');\n            $(this.options.emailAddress).toggle(value === 'email');\n        }\n    });\n\n    return $.mage.ordersReturns;\n});\n","Magento_Sales/js/view/last-ordered-items.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Customer/js/customer-data',\n    'underscore'\n], function (Component, customerData, _) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            isShowAddToCart: false\n        },\n\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n            this.lastOrderedItems = customerData.get('last-ordered-items');\n            this.lastOrderedItems.subscribe(this.checkSalableItems.bind(this));\n            this.checkSalableItems();\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            this._super()\n                .observe('isShowAddToCart');\n\n            return this;\n        },\n\n        /**\n         * Check if items is_saleable and change add to cart button visibility.\n         */\n        checkSalableItems: function () {\n            var isShowAddToCart = _.some(this.lastOrderedItems().items, {\n                'is_saleable': true\n            });\n\n            this.isShowAddToCart(isShowAddToCart);\n        }\n    });\n});\n","Magento_Customer/js/address.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'jquery-ui-modules/widget',\n    'mage/translate'\n], function ($, confirm) {\n    'use strict';\n\n    $.widget('mage.address', {\n        /**\n         * Options common to all instances of this widget.\n         * @type {Object}\n         */\n        options: {\n            deleteConfirmMessage: $.mage.__('Are you sure you want to delete this address?')\n        },\n\n        /**\n         * Bind event handlers for adding and deleting addresses.\n         * @private\n         */\n        _create: function () {\n            var options         = this.options,\n                addAddress      = options.addAddress,\n                deleteAddress   = options.deleteAddress;\n\n            if (addAddress) {\n                $(document).on('click', addAddress, this._addAddress.bind(this));\n            }\n\n            if (deleteAddress) {\n                $(document).on('click', deleteAddress, this._deleteAddress.bind(this));\n            }\n        },\n\n        /**\n         * Add a new address.\n         * @private\n         */\n        _addAddress: function () {\n            window.location = this.options.addAddressLocation;\n        },\n\n        /**\n         * Delete the address whose id is specified in a data attribute after confirmation from the user.\n         * @private\n         * @param {jQuery.Event} e\n         * @return {Boolean}\n         */\n        _deleteAddress: function (e) {\n            var self = this;\n\n            confirm({\n                content: this.options.deleteConfirmMessage,\n                actions: {\n\n                    /** @inheritdoc */\n                    confirm: function () {\n                        if (typeof $(e.target).parent().data('address') !== 'undefined') {\n                            window.location = self.options.deleteUrlPrefix + $(e.target).parent().data('address') +\n                                '/form_key/' + $.mage.cookies.get('form_key');\n                        } else {\n                            window.location = self.options.deleteUrlPrefix + $(e.target).data('address') +\n                                '/form_key/' + $.mage.cookies.get('form_key');\n                        }\n                    }\n                }\n            });\n\n            return false;\n        }\n    });\n\n    return $.mage.address;\n});\n","Magento_Customer/js/addressValidation.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'mageUtils',\n    'mage/translate',\n    'Magento_Checkout/js/model/postcode-validator',\n    'jquery-ui-modules/widget',\n    'validation'\n], function ($, __, utils, $t, postCodeValidator) {\n    'use strict';\n\n    $.widget('mage.addressValidation', {\n        options: {\n            selectors: {\n                button: '[data-action=save-address]',\n                zip: '#zip',\n                country: 'select[name=\"country_id\"]:visible'\n            }\n        },\n\n        zipInput: null,\n        countrySelect: null,\n\n        /**\n         * Validation creation\n         *\n         * @protected\n         */\n        _create: function () {\n            var button = $(this.options.selectors.button, this.element);\n\n            this.zipInput = $(this.options.selectors.zip, this.element);\n            this.countrySelect = $(this.options.selectors.country, this.element);\n\n            this.element.validation({\n\n                /**\n                 * Submit Handler\n                 * @param {Element} form - address form\n                 */\n                submitHandler: function (form) {\n\n                    button.attr('disabled', true);\n                    form.submit();\n                }\n            });\n\n            this._addPostCodeValidation();\n        },\n\n        /**\n         * Add postcode validation\n         *\n         * @protected\n         */\n        _addPostCodeValidation: function () {\n            var self = this;\n\n            this.zipInput.on('keyup', __.debounce(function (event) {\n                    var valid = self._validatePostCode(event.target.value);\n\n                    self._renderValidationResult(valid);\n                }, 500)\n            );\n\n            this.countrySelect.on('change', function () {\n                var valid = self._validatePostCode(self.zipInput.val());\n\n                self._renderValidationResult(valid);\n            });\n        },\n\n        /**\n         * Validate post code value.\n         *\n         * @protected\n         * @param {String} postCode - post code\n         * @return {Boolean} Whether is post code valid\n         */\n        _validatePostCode: function (postCode) {\n            var countryId = this.countrySelect.val();\n\n            if (postCode === null) {\n                return true;\n            }\n\n            return postCodeValidator.validate(postCode, countryId, this.options.postCodes);\n        },\n\n        /**\n         * Renders warning messages for invalid post code.\n         *\n         * @protected\n         * @param {Boolean} valid\n         */\n        _renderValidationResult: function (valid) {\n            var warnMessage,\n                alertDiv = this.zipInput.next();\n\n            if (!valid) {\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\n\n                if (postCodeValidator.validatedPostCodeExample.length) {\n                    warnMessage += $t(' Example: ') + postCodeValidator.validatedPostCodeExample.join('; ') + '. ';\n                }\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\n            }\n\n            alertDiv.children(':first').text(warnMessage);\n\n            if (valid) {\n                alertDiv.hide();\n            } else {\n                alertDiv.show();\n            }\n        }\n    });\n\n    return $.mage.addressValidation;\n});\n","Magento_Customer/js/block-submit-on-send.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage'\n], function ($) {\n    'use strict';\n\n    return function (config) {\n        var dataForm = $('#' + config.formId);\n\n        dataForm.on('submit', function () {\n            $(this).find(':submit').attr('disabled', 'disabled');\n\n            if (this.isValid === false) {\n                $(this).find(':submit').prop('disabled', false);\n            }\n            this.isValid = true;\n        });\n        dataForm.on('invalid-form.validate', function () {\n            $(this).find(':submit').prop('disabled', false);\n            this.isValid = false;\n        });\n    };\n});\n","Magento_Customer/js/change-email-password.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.changeEmailPassword', {\n        options: {\n            changeEmailSelector: '[data-role=change-email]',\n            changePasswordSelector: '[data-role=change-password]',\n            mainContainerSelector: '[data-container=change-email-password]',\n            titleSelector: '[data-title=change-email-password]',\n            emailContainerSelector: '[data-container=change-email]',\n            newPasswordContainerSelector: '[data-container=new-password]',\n            confirmPasswordContainerSelector: '[data-container=confirm-password]',\n            currentPasswordSelector: '[data-input=current-password]',\n            emailSelector: '[data-input=change-email]',\n            newPasswordSelector: '[data-input=new-password]',\n            confirmPasswordSelector: '[data-input=confirm-password]'\n        },\n\n        /**\n         * Create widget\n         * @private\n         */\n        _create: function () {\n            this.element.on('change', $.proxy(function () {\n                this._checkChoice();\n            }, this));\n\n            this._checkChoice();\n            this._bind();\n        },\n\n        /**\n         * Event binding, will monitor change, keyup and paste events.\n         * @private\n         */\n        _bind: function () {\n            this._on($(this.options.emailSelector), {\n                'change': this._updatePasswordFieldWithEmailValue,\n                'keyup': this._updatePasswordFieldWithEmailValue,\n                'paste': this._updatePasswordFieldWithEmailValue\n            });\n        },\n\n        /**\n         * Check choice\n         * @private\n         */\n        _checkChoice: function () {\n            if ($(this.options.changeEmailSelector).is(':checked') &&\n                $(this.options.changePasswordSelector).is(':checked')) {\n                this._showAll();\n            } else if ($(this.options.changeEmailSelector).is(':checked')) {\n                this._showEmail();\n            } else if ($(this.options.changePasswordSelector).is(':checked')) {\n                this._showPassword();\n            } else {\n                this._hideAll();\n            }\n        },\n\n        /**\n         * Show email and password input fields\n         * @private\n         */\n        _showAll: function () {\n            $(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);\n\n            $(this.options.mainContainerSelector).show();\n            $(this.options.emailContainerSelector).show();\n            $(this.options.newPasswordContainerSelector).show();\n            $(this.options.confirmPasswordContainerSelector).show();\n\n            $(this.options.currentPasswordSelector).attr('data-validate', '{required:true}').prop('disabled', false);\n            $(this.options.emailSelector).attr('data-validate', '{required:true}').prop('disabled', false);\n            this._updatePasswordFieldWithEmailValue();\n            $(this.options.confirmPasswordSelector).attr(\n                'data-validate',\n                '{required:true, equalTo:\"' + this.options.newPasswordSelector + '\"}'\n            ).prop('disabled', false);\n        },\n\n        /**\n         * Hide email and password input fields\n         * @private\n         */\n        _hideAll: function () {\n            $(this.options.mainContainerSelector).hide();\n            $(this.options.emailContainerSelector).hide();\n            $(this.options.newPasswordContainerSelector).hide();\n            $(this.options.confirmPasswordContainerSelector).hide();\n\n            $(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Show email input fields\n         * @private\n         */\n        _showEmail: function () {\n            this._showAll();\n            $(this.options.titleSelector).html(this.options.titleChangeEmail);\n\n            $(this.options.newPasswordContainerSelector).hide();\n            $(this.options.confirmPasswordContainerSelector).hide();\n\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Show password input fields\n         * @private\n         */\n        _showPassword: function () {\n            this._showAll();\n            $(this.options.titleSelector).html(this.options.titleChangePassword);\n\n            $(this.options.emailContainerSelector).hide();\n\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Update password validation rules with email input field value\n         * @private\n         */\n        _updatePasswordFieldWithEmailValue: function () {\n            $(this.options.newPasswordSelector).attr(\n                'data-validate',\n                '{required:true, ' +\n                '\\'validate-customer-password\\':true, ' +\n                '\\'password-not-equal-to-user-name\\':\\'' + $(this.options.emailSelector).val() + '\\'}'\n            ).prop('disabled', false);\n        }\n    });\n\n    return $.mage.changeEmailPassword;\n});\n","Magento_Customer/js/checkout-balance.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.checkoutBalance', {\n        /**\n         * Initialize store credit events\n         * @private\n         */\n        _create: function () {\n            this.eventData = {\n                price: this.options.balance,\n                totalPrice: 0\n            };\n            this.element.on('change', $.proxy(function (e) {\n                if ($(e.target).is(':checked')) {\n                    this.eventData.price = -1 * this.options.balance;\n                } else {\n                    if (this.options.amountSubstracted) { //eslint-disable-line no-lonely-if\n                        this.eventData.price = parseFloat(this.options.usedAmount);\n                        this.options.amountSubstracted = false;\n                    } else {\n                        this.eventData.price = parseFloat(this.options.balance);\n                    }\n                }\n                this.element.trigger('updateCheckoutPrice', this.eventData);\n            }, this));\n        }\n    });\n\n    return $.mage.checkoutBalance;\n});\n","Magento_Customer/js/customer-data.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'underscore',\n    'ko',\n    'Magento_Customer/js/section-config',\n    'mage/url',\n    'mage/storage',\n    'jquery/jquery-storageapi'\n], function ($, _, ko, sectionConfig, url) {\n    'use strict';\n\n    var options = {},\n        storage,\n        storageInvalidation,\n        invalidateCacheBySessionTimeOut,\n        invalidateCacheByCloseCookieSession,\n        dataProvider,\n        buffer,\n        customerData,\n        deferred = $.Deferred();\n\n    url.setBaseUrl(window.BASE_URL);\n    options.sectionLoadUrl = url.build('customer/section/load');\n\n    /**\n     * @param {Object} invalidateOptions\n     */\n    invalidateCacheBySessionTimeOut = function (invalidateOptions) {\n        var date;\n\n        if (new Date($.localStorage.get('mage-cache-timeout')) < new Date()) {\n            storage.removeAll();\n        }\n        date = new Date(Date.now() + parseInt(invalidateOptions.cookieLifeTime, 10) * 1000);\n        $.localStorage.set('mage-cache-timeout', date);\n    };\n\n    /**\n     * Invalidate Cache By Close Cookie Session\n     */\n    invalidateCacheByCloseCookieSession = function () {\n        if (!$.cookieStorage.isSet('mage-cache-sessid')) {\n            storage.removeAll();\n        }\n\n        $.cookieStorage.set('mage-cache-sessid', true);\n    };\n\n    dataProvider = {\n\n        /**\n         * @param {Object} sectionNames\n         * @return {Object}\n         */\n        getFromStorage: function (sectionNames) {\n            var result = {};\n\n            _.each(sectionNames, function (sectionName) {\n                result[sectionName] = storage.get(sectionName);\n            });\n\n            return result;\n        },\n\n        /**\n         * @param {Object} sectionNames\n         * @param {Boolean} forceNewSectionTimestamp\n         * @return {*}\n         */\n        getFromServer: function (sectionNames, forceNewSectionTimestamp) {\n            var parameters;\n\n            sectionNames = sectionConfig.filterClientSideSections(sectionNames);\n            parameters = _.isArray(sectionNames) && sectionNames.indexOf('*') < 0 ? {\n                sections: sectionNames.join(',')\n            } : [];\n            parameters['force_new_section_timestamp'] = forceNewSectionTimestamp;\n\n            return $.getJSON(options.sectionLoadUrl, parameters).fail(function (jqXHR) {\n                throw new Error(jqXHR);\n            });\n        }\n    };\n\n    /**\n     * @param {Function} target\n     * @param {String} sectionName\n     * @return {*}\n     */\n    ko.extenders.disposableCustomerData = function (target, sectionName) {\n        var sectionDataIds, newSectionDataIds = {};\n\n        target.subscribe(function () {\n            setTimeout(function () {\n                storage.remove(sectionName);\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n                _.each(sectionDataIds, function (data, name) {\n                    if (name !== sectionName) {\n                        newSectionDataIds[name] = data;\n                    }\n                });\n                $.cookieStorage.set('section_data_ids', newSectionDataIds);\n            }, 3000);\n        });\n\n        return target;\n    };\n\n    buffer = {\n        data: {},\n\n        /**\n         * @param {String} sectionName\n         */\n        bind: function (sectionName) {\n            this.data[sectionName] = ko.observable({});\n        },\n\n        /**\n         * @param {String} sectionName\n         * @return {Object}\n         */\n        get: function (sectionName) {\n            if (!this.data[sectionName]) {\n                this.bind(sectionName);\n            }\n\n            return this.data[sectionName];\n        },\n\n        /**\n         * @return {Array}\n         */\n        keys: function () {\n            return _.keys(this.data);\n        },\n\n        /**\n         * @param {String} sectionName\n         * @param {Object} sectionData\n         */\n        notify: function (sectionName, sectionData) {\n            if (!this.data[sectionName]) {\n                this.bind(sectionName);\n            }\n            this.data[sectionName](sectionData);\n        },\n\n        /**\n         * @param {Object} sections\n         */\n        update: function (sections) {\n            var sectionId = 0,\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n\n            _.each(sections, function (sectionData, sectionName) {\n                sectionId = sectionData['data_id'];\n                sectionDataIds[sectionName] = sectionId;\n                storage.set(sectionName, sectionData);\n                storageInvalidation.remove(sectionName);\n                buffer.notify(sectionName, sectionData);\n            });\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\n        },\n\n        /**\n         * @param {Object} sections\n         */\n        remove: function (sections) {\n            _.each(sections, function (sectionName) {\n                storage.remove(sectionName);\n\n                if (!sectionConfig.isClientSideSection(sectionName)) {\n                    storageInvalidation.set(sectionName, true);\n                }\n            });\n        }\n    };\n\n    customerData = {\n\n        /**\n         * Customer data initialization\n         */\n        init: function () {\n            var expiredSectionNames = this.getExpiredSectionNames();\n\n            if (expiredSectionNames.length > 0) {\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\n                    buffer.notify(sectionName, sectionData);\n                });\n                this.reload(expiredSectionNames, false);\n            } else {\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\n                    buffer.notify(sectionName, sectionData);\n                });\n\n                if (!_.isEmpty(storageInvalidation.keys())) {\n                    this.reload(storageInvalidation.keys(), false);\n                }\n            }\n\n            if (!_.isEmpty($.cookieStorage.get('section_data_clean'))) {\n                this.reload(sectionConfig.getSectionNames(), true);\n                $.cookieStorage.set('section_data_clean', '');\n            }\n        },\n\n        /**\n         * Storage init\n         */\n        initStorage: function () {\n            $.cookieStorage.setConf({\n                path: '/',\n                expires: new Date(Date.now() + parseInt(options.cookieLifeTime, 10) * 1000)\n            });\n            storage = $.initNamespaceStorage('mage-cache-storage').localStorage;\n            storageInvalidation = $.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;\n        },\n\n        /**\n         * Retrieve the list of sections that has expired since last page reload.\n         *\n         * Sections can expire due to lifetime constraints or due to inconsistent storage information\n         * (validated by cookie data).\n         *\n         * @return {Array}\n         */\n        getExpiredSectionNames: function () {\n            var expiredSectionNames = [],\n                cookieSectionTimestamps = $.cookieStorage.get('section_data_ids') || {},\n                sectionLifetime = options.expirableSectionLifetime * 60,\n                currentTimestamp = Math.floor(Date.now() / 1000),\n                sectionData;\n\n            // process sections that can expire due to lifetime constraints\n            _.each(options.expirableSectionNames, function (sectionName) {\n                sectionData = storage.get(sectionName);\n\n                if (typeof sectionData === 'object' && sectionData['data_id'] + sectionLifetime <= currentTimestamp) {\n                    expiredSectionNames.push(sectionName);\n                }\n            });\n\n            // process sections that can expire due to storage information inconsistency\n            _.each(cookieSectionTimestamps, function (cookieSectionTimestamp, sectionName) {\n                sectionData = storage.get(sectionName);\n\n                if (typeof sectionData === 'undefined' ||\n                    typeof sectionData === 'object' &&\n                    cookieSectionTimestamp !== sectionData['data_id']\n                ) {\n                    expiredSectionNames.push(sectionName);\n                }\n            });\n\n            //remove expired section names of previously installed/enable modules\n            expiredSectionNames = _.intersection(expiredSectionNames, sectionConfig.getSectionNames());\n\n            return _.uniq(expiredSectionNames);\n        },\n\n        /**\n         * Check if some sections have to be reloaded.\n         *\n         * @deprecated Use getExpiredSectionNames instead.\n         *\n         * @return {Boolean}\n         */\n        needReload: function () {\n            var expiredSectionNames = this.getExpiredSectionNames();\n\n            return expiredSectionNames.length > 0;\n        },\n\n        /**\n         * Retrieve the list of expired keys.\n         *\n         * @deprecated Use getExpiredSectionNames instead.\n         *\n         * @return {Array}\n         */\n        getExpiredKeys: function () {\n            return this.getExpiredSectionNames();\n        },\n\n        /**\n         * @param {String} sectionName\n         * @return {*}\n         */\n        get: function (sectionName) {\n            return buffer.get(sectionName);\n        },\n\n        /**\n         * @param {String} sectionName\n         * @param {Object} sectionData\n         */\n        set: function (sectionName, sectionData) {\n            var data = {};\n\n            data[sectionName] = sectionData;\n            buffer.update(data);\n        },\n\n        /**\n         * Avoid using this function directly 'cause of possible performance drawbacks.\n         * Each customer section reload brings new non-cached ajax request.\n         *\n         * @param {Array} sectionNames\n         * @param {Boolean} forceNewSectionTimestamp\n         * @return {*}\n         */\n        reload: function (sectionNames, forceNewSectionTimestamp) {\n            return dataProvider.getFromServer(sectionNames, forceNewSectionTimestamp).done(function (sections) {\n                $(document).trigger('customer-data-reload', [sectionNames]);\n                buffer.update(sections);\n            });\n        },\n\n        /**\n         * @param {Array} sectionNames\n         */\n        invalidate: function (sectionNames) {\n            var sectionDataIds,\n                sectionsNamesForInvalidation;\n\n            sectionsNamesForInvalidation = _.contains(sectionNames, '*') ? sectionConfig.getSectionNames() :\n                sectionNames;\n\n            $(document).trigger('customer-data-invalidate', [sectionsNamesForInvalidation]);\n            buffer.remove(sectionsNamesForInvalidation);\n            sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n\n            // Invalidate section in cookie (increase version of section with 1000)\n            _.each(sectionsNamesForInvalidation, function (sectionName) {\n                if (!sectionConfig.isClientSideSection(sectionName)) {\n                    sectionDataIds[sectionName] += 1000;\n                }\n            });\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\n        },\n\n        /**\n         * Checks if customer data is initialized.\n         *\n         * @returns {jQuery.Deferred}\n         */\n        getInitCustomerData: function () {\n            return deferred.promise();\n        },\n\n        /**\n         * Reload sections on ajax complete\n         *\n         * @param {Object} jsonResponse\n         * @param {Object} settings\n         */\n        onAjaxComplete: function (jsonResponse, settings) {\n            var sections,\n                redirects;\n\n            if (settings.type.match(/post|put|delete/i)) {\n                sections = sectionConfig.getAffectedSections(settings.url);\n\n                if (sections && sections.length) {\n                    this.invalidate(sections);\n                    redirects = ['redirect', 'backUrl'];\n\n                    if (_.isObject(jsonResponse) && !_.isEmpty(_.pick(jsonResponse, redirects))) { //eslint-disable-line\n                        return;\n                    }\n                    this.reload(sections, true);\n                }\n            }\n        },\n\n        /**\n         * @param {Object} settings\n         * @constructor\n         */\n        'Magento_Customer/js/customer-data': function (settings) {\n            options = settings;\n            customerData.initStorage();\n            invalidateCacheBySessionTimeOut(settings);\n            invalidateCacheByCloseCookieSession();\n            customerData.init();\n            deferred.resolve();\n        }\n    };\n\n    /**\n     * Events listener\n     */\n    $(document).on('ajaxComplete', function (event, xhr, settings) {\n        customerData.onAjaxComplete(xhr.responseJSON, settings);\n    });\n\n    /**\n     * Events listener\n     */\n    $(document).on('submit', function (event) {\n        var sections;\n\n        if (event.target.method.match(/post|put|delete/i)) {\n            sections = sectionConfig.getAffectedSections(event.target.action);\n\n            if (sections) {\n                customerData.invalidate(sections);\n            }\n        }\n    });\n\n    return customerData;\n});\n","Magento_Customer/js/customer-global-session-loader.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Customer/js/customer-data'\n], function ($, customerData) {\n    'use strict';\n\n    return function () {\n        var customer;\n\n        // When the session is available, this customer menu will be available\n        if ($('.customer-menu').length > 0) {\n            customer = customerData.get('customer');\n\n            customerData.getInitCustomerData().done(function () {\n                // Check if the customer data is set in local storage, if not reload data from server\n                if (!customer().firstname) {\n                    customerData.reload([], false);\n                }\n            });\n        }\n    };\n});\n","Magento_Customer/js/invalidation-processor.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'underscore',\n    'uiElement',\n    'Magento_Customer/js/customer-data'\n], function (_, Element, customerData) {\n    'use strict';\n\n    return Element.extend({\n        /**\n         * Initialize object\n         */\n        initialize: function () {\n            this._super();\n            this.process(customerData);\n        },\n\n        /**\n         * Process all rules in loop, each rule can invalidate some sections in customer data\n         *\n         * @param {Object} customerDataObject\n         */\n        process: function (customerDataObject) {\n            _.each(this.invalidationRules, function (rule, ruleName) {\n                _.each(rule, function (ruleArgs, rulePath) {\n                    require([rulePath], function (Rule) {\n                        var currentRule = new Rule(ruleArgs);\n\n                        if (!_.isFunction(currentRule.process)) {\n                            throw new Error('Rule ' + ruleName + ' should implement invalidationProcessor interface');\n                        }\n                        currentRule.process(customerDataObject);\n                    });\n                });\n            });\n        }\n    });\n});\n","Magento_Customer/js/logout-redirect.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage'\n], function ($) {\n    'use strict';\n\n    return function (data) {\n        $($.mage.redirect(data.url, 'assign', 5000));\n    };\n});\n","Magento_Customer/js/password-strength-indicator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Customer/js/zxcvbn',\n    'mage/translate',\n    'mage/validation'\n], function ($, zxcvbn, $t) {\n    'use strict';\n\n    $.widget('mage.passwordStrengthIndicator', {\n        options: {\n            cache: {},\n            passwordSelector: '[type=password]',\n            passwordStrengthMeterSelector: '[data-role=password-strength-meter]',\n            passwordStrengthMeterLabelSelector: '[data-role=password-strength-meter-label]',\n            formSelector: 'form',\n            emailSelector: 'input[type=\"email\"]'\n        },\n\n        /**\n         * Widget initialization\n         * @private\n         */\n        _create: function () {\n            this.options.cache.input = $(this.options.passwordSelector, this.element);\n            this.options.cache.meter = $(this.options.passwordStrengthMeterSelector, this.element);\n            this.options.cache.label = $(this.options.passwordStrengthMeterLabelSelector, this.element);\n\n            // We need to look outside the module for backward compatibility, since someone can already use the module.\n            // @todo Narrow this selector in 2.3 so it doesn't accidentally finds the email field from the\n            // newsletter email field or any other \"email\" field.\n            this.options.cache.email = $(this.options.formSelector).find(this.options.emailSelector);\n            this._bind();\n        },\n\n        /**\n         * Event binding, will monitor change, keyup and paste events.\n         * @private\n         */\n        _bind: function () {\n            this._on(this.options.cache.input, {\n                'change': this._calculateStrength,\n                'keyup': this._calculateStrength,\n                'paste': this._calculateStrength\n            });\n\n            if (this.options.cache.email.length) {\n                this._on(this.options.cache.email, {\n                    'change': this._calculateStrength,\n                    'keyup': this._calculateStrength,\n                    'paste': this._calculateStrength\n                });\n            }\n        },\n\n        /**\n         * Calculate password strength\n         * @private\n         */\n        _calculateStrength: function () {\n            var password = this._getPassword(),\n                isEmpty = password.length === 0,\n                zxcvbnScore,\n                displayScore,\n                isValid;\n\n            // Display score is based on combination of whether password is empty, valid, and zxcvbn strength\n            if (isEmpty) {\n                displayScore = 0;\n            } else {\n                this.options.cache.input.rules('add', {\n                    'password-not-equal-to-user-name': this.options.cache.email.val()\n                });\n\n                // We should only perform this check in case there is an email field on screen\n                if (this.options.cache.email.length &&\n                    password.toLowerCase() === this.options.cache.email.val().toLowerCase()) {\n                    displayScore = 1;\n                } else {\n                    isValid = $.validator.validateSingleElement(this.options.cache.input);\n                    zxcvbnScore = zxcvbn(password).score;\n                    displayScore = isValid && zxcvbnScore > 0 ? zxcvbnScore : 1;\n                }\n            }\n\n            // Update label\n            this._displayStrength(displayScore);\n        },\n\n        /**\n         * Display strength\n         * @param {Number} displayScore\n         * @private\n         */\n        _displayStrength: function (displayScore) {\n            var strengthLabel = '',\n                className;\n\n            switch (displayScore) {\n                case 0:\n                    strengthLabel = $t('No Password');\n                    className = 'password-none';\n                    break;\n\n                case 1:\n                    strengthLabel = $t('Weak');\n                    className = 'password-weak';\n                    break;\n\n                case 2:\n                    strengthLabel = $t('Medium');\n                    className = 'password-medium';\n                    break;\n\n                case 3:\n                    strengthLabel = $t('Strong');\n                    className = 'password-strong';\n                    break;\n\n                case 4:\n                    strengthLabel = $t('Very Strong');\n                    className = 'password-very-strong';\n                    break;\n            }\n\n            this.options.cache.meter\n                .removeClass()\n                .addClass(className);\n            this.options.cache.label.text(strengthLabel);\n        },\n\n        /**\n         * Get password value\n         * @returns {*}\n         * @private\n         */\n        _getPassword: function () {\n            return this.options.cache.input.val();\n        }\n    });\n\n    return $.mage.passwordStrengthIndicator;\n});\n","Magento_Customer/js/section-config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['underscore'], function (_) {\n    'use strict';\n\n    var baseUrls = [],\n        sections = [],\n        clientSideSections = [],\n        sectionNames = [],\n        canonize;\n\n    /**\n     * @param {String} url\n     * @return {String}\n     */\n    canonize = function (url) {\n        var route = url;\n\n        _.some(baseUrls, function (baseUrl) {\n            route = url.replace(baseUrl, '');\n\n            return route !== url;\n        });\n\n        return route.replace(/^\\/?index.php\\/?/, '').toLowerCase();\n    };\n\n    return {\n        /**\n         * Returns a list of sections which should be invalidated for given URL.\n         * @param {String} url - URL which was requested.\n         * @return {Object} - List of sections to invalidate.\n         */\n        getAffectedSections: function (url) {\n            var route = canonize(url),\n                actions = _.find(sections, function (val, section) {\n                    var matched;\n\n                    // Covers the case where \"*\" works as a glob pattern.\n                    if (section.indexOf('*') >= 0) {\n                        section = section.replace(/\\*/g, '[^/]+') + '$';\n                        matched = route.match(section);\n\n                        return matched && matched[0] === route;\n                    }\n\n                    return route.indexOf(section) === 0;\n                });\n\n            return _.union(_.toArray(actions), sections['*']);\n        },\n\n        /**\n         * Filters the list of given sections to the ones defined as client side.\n         * @param {Object} allSections - List of sections to check.\n         * @return {Object} - List of filtered sections.\n         */\n        filterClientSideSections: function (allSections) {\n            return _.difference(allSections, clientSideSections);\n        },\n\n        /**\n         * Tells if section is defined as client side.\n         * @param {String} sectionName - Name of the section to check.\n         * @return {Boolean}\n         */\n        isClientSideSection: function (sectionName) {\n            return _.contains(clientSideSections, sectionName);\n        },\n\n        /**\n         * Returns array of section names.\n         * @returns {Array}\n         */\n        getSectionNames: function () {\n            return sectionNames;\n        },\n\n        /**\n         * @param {Object} options\n         * @constructor\n         */\n        'Magento_Customer/js/section-config': function (options) {\n            baseUrls = options.baseUrls;\n            sections = options.sections;\n            clientSideSections = options.clientSideSections;\n            sectionNames = options.sectionNames;\n        }\n    };\n});\n","Magento_Customer/js/show-password.js":"/**\n* Copyright \u00a9 Magento, Inc. All rights reserved.\n* See COPYING.txt for license details.\n*/\n\ndefine([\n    'jquery',\n    'uiComponent'\n], function ($, Component) {\n    'use strict';\n\n    return Component.extend({\n        passwordSelector: '',\n        passwordInputType: 'password',\n        textInputType: 'text',\n\n        defaults: {\n            template: 'Magento_Customer/show-password',\n            isPasswordVisible: false\n        },\n\n        /**\n         * @return {Object}\n         */\n        initObservable: function () {\n            this._super()\n                .observe(['isPasswordVisible']);\n\n            this.isPasswordVisible.subscribe(function (isChecked) {\n                this._showPassword(isChecked);\n            }.bind(this));\n\n            return this;\n        },\n\n        /**\n         * Show/Hide password\n         * @private\n         */\n        _showPassword: function (isChecked) {\n            $(this.passwordSelector).attr('type',\n                isChecked ? this.textInputType : this.passwordInputType\n            );\n        }\n    });\n});\n","Magento_Customer/js/validation.js":"define([\n    'jquery',\n    'moment',\n    'mageUtils',\n    'jquery/validate',\n    'validation',\n    'mage/translate'\n], function ($, moment, utils) {\n    'use strict';\n\n    $.validator.addMethod(\n        'validate-date',\n        function (value, element, params) {\n            var dateFormat = utils.normalizeDate(params.dateFormat);\n\n            if (value === '') {\n                return true;\n            }\n\n            return moment(value, dateFormat, true).isValid();\n        },\n        $.mage.__('Invalid date')\n    );\n\n    $.validator.addMethod(\n        'validate-dob',\n        function (value, element, params) {\n            var dateFormat = utils.convertToMomentFormat(params.dateFormat);\n\n            if (value === '') {\n                return true;\n            }\n\n            return moment(value, dateFormat).isBefore(moment());\n        },\n        $.mage.__('The Date of Birth should not be greater than today.')\n    );\n});\n","Magento_Customer/js/action/check-email-availability.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'mage/storage',\n    'Magento_Checkout/js/model/url-builder'\n], function (storage, urlBuilder) {\n    'use strict';\n\n    return function (deferred, email) {\n        return storage.post(\n            urlBuilder.createUrl('/customers/isEmailAvailable', {}),\n            JSON.stringify({\n                customerEmail: email\n            }),\n            false\n        ).done(function (isEmailAvailable) {\n            if (isEmailAvailable) {\n                deferred.resolve();\n            } else {\n                deferred.reject();\n            }\n        }).fail(function () {\n            deferred.reject();\n        });\n    };\n});\n","Magento_Customer/js/action/login.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/storage',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Customer/js/customer-data',\n    'mage/translate'\n], function ($, storage, globalMessageList, customerData, $t) {\n    'use strict';\n\n    var callbacks = [],\n\n        /**\n         * @param {Object} loginData\n         * @param {String} redirectUrl\n         * @param {*} isGlobal\n         * @param {Object} messageContainer\n         */\n        action = function (loginData, redirectUrl, isGlobal, messageContainer) {\n            messageContainer = messageContainer || globalMessageList;\n            let customerLoginUrl = 'customer/ajax/login';\n\n            if (loginData.customerLoginUrl) {\n                customerLoginUrl = loginData.customerLoginUrl;\n                delete loginData.customerLoginUrl;\n            }\n\n            return storage.post(\n                customerLoginUrl,\n                JSON.stringify(loginData),\n                isGlobal\n            ).done(function (response) {\n                if (response.errors) {\n                    messageContainer.addErrorMessage(response);\n                    callbacks.forEach(function (callback) {\n                        callback(loginData);\n                    });\n                } else {\n                    callbacks.forEach(function (callback) {\n                        callback(loginData);\n                    });\n                    customerData.invalidate(['customer']);\n\n                    if (response.redirectUrl) {\n                        window.location.href = response.redirectUrl;\n                    } else if (redirectUrl) {\n                        window.location.href = redirectUrl;\n                    } else {\n                        location.reload();\n                    }\n                }\n            }).fail(function () {\n                messageContainer.addErrorMessage({\n                    'message': $t('Could not authenticate. Please try again later')\n                });\n                callbacks.forEach(function (callback) {\n                    callback(loginData);\n                });\n            });\n        };\n\n    /**\n     * @param {Function} callback\n     */\n    action.registerLoginCallback = function (callback) {\n        callbacks.push(callback);\n    };\n\n    return action;\n});\n","Magento_Customer/js/invalidation-rules/website-rule.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'uiClass'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n\n        defaults: {\n            scopeConfig: {}\n        },\n\n        /**\n         * Takes website id from current customer data and compare it with current website id\n         * If customer belongs to another scope, we need to invalidate current section\n         *\n         * @param {Object} customerData\n         */\n        process: function (customerData) {\n            var customer = customerData.get('customer');\n\n            if (this.scopeConfig && customer() &&\n                ~~customer().websiteId !== ~~this.scopeConfig.websiteId && ~~customer().websiteId !== 0) {\n                customerData.reload(['customer']);\n            }\n        }\n    });\n});\n","Magento_Customer/js/model/address-list.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'ko',\n    './customer-addresses'\n], function (ko, defaultProvider) {\n    'use strict';\n\n    return ko.observableArray(defaultProvider.getAddressItems());\n});\n","Magento_Customer/js/model/authentication-popup.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/modal'\n], function ($, modal) {\n    'use strict';\n\n    return {\n        modalWindow: null,\n\n        /**\n         * Create popUp window for provided element\n         *\n         * @param {HTMLElement} element\n         */\n        createPopUp: function (element) {\n            var options = {\n                'type': 'popup',\n                'modalClass': 'popup-authentication',\n                'focus': '[name=username]',\n                'responsive': true,\n                'innerScroll': true,\n                'trigger': '.proceed-to-checkout',\n                'buttons': []\n            };\n\n            this.modalWindow = element;\n            modal(options, $(this.modalWindow));\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            $(this.modalWindow).modal('openModal').trigger('contentUpdated');\n        }\n    };\n});\n","Magento_Customer/js/model/customer-addresses.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'ko',\n    './customer/address'\n], function ($, ko, Address) {\n    'use strict';\n\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn);\n\n    return {\n        /**\n         * @return {Array}\n         */\n        getAddressItems: function () {\n            var items = [],\n                customerData = window.customerData;\n\n            if (isLoggedIn()) {\n                if (Object.keys(customerData).length) {\n                    $.each(customerData.addresses, function (key, item) {\n                        items.push(new Address(item));\n                    });\n                }\n            }\n\n            return items;\n        }\n    };\n});\n","Magento_Customer/js/model/customer.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'ko',\n    'underscore',\n    './address-list'\n], function ($, ko, _, addressList) {\n    'use strict';\n\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn),\n        customerData = {};\n\n    if (isLoggedIn()) {\n        customerData = window.customerData;\n    } else {\n        customerData = {};\n    }\n\n    return {\n        customerData: customerData,\n        customerDetails: {},\n        isLoggedIn: isLoggedIn,\n\n        /**\n         * @param {Boolean} flag\n         */\n        setIsLoggedIn: function (flag) {\n            isLoggedIn(flag);\n        },\n\n        /**\n         * @return {Array}\n         */\n        getBillingAddressList: function () {\n            return addressList();\n        },\n\n        /**\n         * @return {Array}\n         */\n        getShippingAddressList: function () {\n            return addressList();\n        },\n\n        /**\n         * @param {String} fieldName\n         * @param {*} value\n         */\n        setDetails: function (fieldName, value) {\n            if (fieldName) {\n                this.customerDetails[fieldName] = value;\n            }\n        },\n\n        /**\n         * @param {String} fieldName\n         * @return {*}\n         */\n        getDetails: function (fieldName) {\n            if (fieldName) {\n                if (this.customerDetails.hasOwnProperty(fieldName)) {\n                    return this.customerDetails[fieldName];\n                }\n\n                return undefined;\n            }\n\n            return this.customerDetails;\n        },\n\n        /**\n         * @param {Array} address\n         * @return {Number}\n         */\n        addCustomerAddress: function (address) {\n            var fields = [\n                    'customer_id', 'country_id', 'street', 'company', 'telephone', 'fax', 'postcode', 'city',\n                    'firstname', 'lastname', 'middlename', 'prefix', 'suffix', 'vat_id', 'default_billing',\n                    'default_shipping'\n                ],\n                customerAddress = {},\n                hasAddress = 0,\n                existingAddress;\n\n            if (!this.customerData.addresses) {\n                this.customerData.addresses = [];\n            }\n\n            customerAddress = _.pick(address, fields);\n\n            if (address.hasOwnProperty('region_id')) {\n                customerAddress.region = {\n                    'region_id': address['region_id'],\n                    region: address.region\n                };\n            }\n\n            for (existingAddress in this.customerData.addresses) {\n                if (this.customerData.addresses.hasOwnProperty(existingAddress)) {\n                    if (_.isEqual(this.customerData.addresses[existingAddress], customerAddress)) { //eslint-disable-line\n                        hasAddress = existingAddress;\n                        break;\n                    }\n                }\n            }\n\n            if (hasAddress === 0) {\n                return this.customerData.addresses.push(customerAddress) - 1;\n            }\n\n            return hasAddress;\n        },\n\n        /**\n         * @param {*} addressId\n         * @return {Boolean}\n         */\n        setAddressAsDefaultBilling: function (addressId) {\n            if (this.customerData.addresses[addressId]) {\n                this.customerData.addresses[addressId]['default_billing'] = 1;\n\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * @param {*} addressId\n         * @return {Boolean}\n         */\n        setAddressAsDefaultShipping: function (addressId) {\n            if (this.customerData.addresses[addressId]) {\n                this.customerData.addresses[addressId]['default_shipping'] = 1;\n\n                return true;\n            }\n\n            return false;\n        }\n    };\n});\n","Magento_Customer/js/model/customer/address.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine(['underscore'], function (_) {\n    'use strict';\n\n    /**\n     * Returns new address object.\n     *\n     * @param {Object} addressData\n     * @return {Object}\n     */\n    return function (addressData) {\n        var regionId;\n\n        if (addressData.region['region_id'] && addressData.region['region_id'] !== '0') {\n            regionId = addressData.region['region_id'] + '';\n        }\n\n        return {\n            customerAddressId: addressData.id,\n            email: addressData.email,\n            countryId: addressData['country_id'],\n            regionId: regionId,\n            regionCode: addressData.region['region_code'],\n            region: addressData.region.region,\n            customerId: addressData['customer_id'],\n            street: addressData.street,\n            company: addressData.company,\n            telephone: addressData.telephone,\n            fax: addressData.fax,\n            postcode: addressData.postcode,\n            city: addressData.city,\n            firstname: addressData.firstname,\n            lastname: addressData.lastname,\n            middlename: addressData.middlename,\n            prefix: addressData.prefix,\n            suffix: addressData.suffix,\n            vatId: addressData['vat_id'],\n            sameAsBilling: addressData['same_as_billing'],\n            saveInAddressBook: addressData['save_in_address_book'],\n            customAttributes: _.toArray(addressData['custom_attributes']).reverse(),\n\n            /**\n             * @return {*}\n             */\n            isDefaultShipping: function () {\n                return addressData['default_shipping'];\n            },\n\n            /**\n             * @return {*}\n             */\n            isDefaultBilling: function () {\n                return addressData['default_billing'];\n            },\n\n            /**\n             * @return {*}\n             */\n            getAddressInline: function () {\n                return addressData.inline;\n            },\n\n            /**\n             * @return {String}\n             */\n            getType: function () {\n                return 'customer-address';\n            },\n\n            /**\n             * @return {String}\n             */\n            getKey: function () {\n                return this.getType() + this.customerAddressId;\n            },\n\n            /**\n             * @return {String}\n             */\n            getCacheKey: function () {\n                return this.getKey();\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            isEditable: function () {\n                return false;\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            canUseForBilling: function () {\n                return true;\n            }\n        };\n    };\n});\n","Magento_Customer/js/view/authentication-popup.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'ko',\n    'Magento_Ui/js/form/form',\n    'Magento_Customer/js/action/login',\n    'Magento_Customer/js/customer-data',\n    'Magento_Customer/js/model/authentication-popup',\n    'mage/translate',\n    'mage/url',\n    'Magento_Ui/js/modal/alert',\n    'mage/validation'\n], function ($, ko, Component, loginAction, customerData, authenticationPopup, $t, url, alert) {\n    'use strict';\n\n    return Component.extend({\n        registerUrl: window.authenticationPopup.customerRegisterUrl,\n        forgotPasswordUrl: window.authenticationPopup.customerForgotPasswordUrl,\n        autocomplete: window.authenticationPopup.autocomplete,\n        modalWindow: null,\n        isLoading: ko.observable(false),\n\n        defaults: {\n            template: 'Magento_Customer/authentication-popup'\n        },\n\n        /**\n         * Init\n         */\n        initialize: function () {\n            var self = this;\n\n            this._super();\n            url.setBaseUrl(window.authenticationPopup.baseUrl);\n            loginAction.registerLoginCallback(function () {\n                self.isLoading(false);\n            });\n        },\n\n        /** Init popup login window */\n        setModalElement: function (element) {\n            if (authenticationPopup.modalWindow == null) {\n                authenticationPopup.createPopUp(element);\n            }\n        },\n\n        /** Is login form enabled for current customer */\n        isActive: function () {\n            var customer = customerData.get('customer');\n\n            return customer() == false; //eslint-disable-line eqeqeq\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            if (this.modalWindow) {\n                $(this.modalWindow).modal('openModal');\n            } else {\n                alert({\n                    content: $t('Guest checkout is disabled.')\n                });\n            }\n        },\n\n        /**\n         * Provide login action\n         *\n         * @return {Boolean}\n         */\n        login: function (formUiElement, event) {\n            var loginData = {},\n                formElement = $(event.currentTarget),\n                formDataArray = formElement.serializeArray();\n\n            event.stopPropagation();\n            formDataArray.forEach(function (entry) {\n                loginData[entry.name] = entry.value;\n            });\n            loginData['customerLoginUrl'] = window.authenticationPopup.customerLoginUrl;\n            if (formElement.validation() &&\n                formElement.validation('isValid')\n            ) {\n                this.isLoading(true);\n                loginAction(loginData);\n            }\n\n            return false;\n        }\n    });\n});\n","Magento_Customer/js/view/customer.js":"/**\n* Copyright \u00a9 Magento, Inc. All rights reserved.\n* See COPYING.txt for license details.\n*/\n\ndefine([\n    'uiComponent',\n    'Magento_Customer/js/customer-data'\n], function (Component, customerData) {\n    'use strict';\n\n    return Component.extend({\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            this.customer = customerData.get('customer');\n        }\n    });\n});\n","Magento_Directory/js/region-updater.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'underscore',\n    'jquery-ui-modules/widget',\n    'mage/validation'\n], function ($, mageTemplate, _) {\n    'use strict';\n\n    $.widget('mage.directoryRegionUpdater', {\n        options: {\n            regionTemplate:\n                '<option value=\"<%- data.value %>\" <% if (data.isSelected) { %>selected=\"selected\"<% } %>>' +\n                '<%- data.title %>' +\n                '</option>',\n            isRegionRequired: true,\n            isZipRequired: true,\n            isCountryRequired: true,\n            currentRegion: null,\n            isMultipleCountriesAllowed: true\n        },\n\n        /**\n         *\n         * @private\n         */\n        _create: function () {\n            this._initCountryElement();\n\n            this.currentRegionOption = this.options.currentRegion;\n            this.regionTmpl = mageTemplate(this.options.regionTemplate);\n\n            this._updateRegion(this.element.find('option:selected').val());\n\n            $(this.options.regionListId).on('change', $.proxy(function (e) {\n                this.setOption = false;\n                this.currentRegionOption = $(e.target).val();\n            }, this));\n\n            $(this.options.regionInputId).on('focusout', $.proxy(function () {\n                this.setOption = true;\n            }, this));\n        },\n\n        /**\n         *\n         * @private\n         */\n        _initCountryElement: function () {\n\n            if (this.options.isMultipleCountriesAllowed) {\n                this.element.parents('div.field').show();\n                this.element.on('change', $.proxy(function (e) {\n                    // clear region inputs on country change\n                    $(this.options.regionListId).val('');\n                    $(this.options.regionInputId).val('');\n                    this._updateRegion($(e.target).val());\n                }, this));\n\n                if (this.options.isCountryRequired) {\n                    this.element.addClass('required-entry');\n                    this.element.parents('div.field').addClass('required');\n                }\n            } else {\n                this.element.parents('div.field').hide();\n            }\n        },\n\n        /**\n         * Remove options from dropdown list\n         *\n         * @param {Object} selectElement - jQuery object for dropdown list\n         * @private\n         */\n        _removeSelectOptions: function (selectElement) {\n            selectElement.find('option').each(function (index) {\n                if (index) {\n                    $(this).remove();\n                }\n            });\n        },\n\n        /**\n         * Render dropdown list\n         * @param {Object} selectElement - jQuery object for dropdown list\n         * @param {String} key - region code\n         * @param {Object} value - region object\n         * @private\n         */\n        _renderSelectOption: function (selectElement, key, value) {\n            selectElement.append($.proxy(function () {\n                var name = value.name.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g, '\\\\$&'),\n                    tmplData,\n                    tmpl;\n\n                if (value.code && $(name).is('span')) {\n                    key = value.code;\n                    value.name = $(name).text();\n                }\n\n                tmplData = {\n                    value: key,\n                    title: value.name,\n                    isSelected: false\n                };\n\n                if (this.options.defaultRegion === key) {\n                    tmplData.isSelected = true;\n                }\n\n                tmpl = this.regionTmpl({\n                    data: tmplData\n                });\n\n                return $(tmpl);\n            }, this));\n        },\n\n        /**\n         * Takes clearError callback function as first option\n         * If no form is passed as option, look up the closest form and call clearError method.\n         * @private\n         */\n        _clearError: function () {\n            var args = ['clearError', this.options.regionListId, this.options.regionInputId, this.options.postcodeId];\n\n            if (this.options.clearError && typeof this.options.clearError === 'function') {\n                this.options.clearError.call(this);\n            } else {\n                if (!this.options.form) {\n                    this.options.form = this.element.closest('form').length ? $(this.element.closest('form')[0]) : null;\n                }\n\n                this.options.form = $(this.options.form);\n\n                this.options.form && this.options.form.data('validator') &&\n                this.options.form.validation.apply(this.options.form, _.compact(args));\n\n                // Clean up errors on region & zip fix\n                $(this.options.regionInputId).removeClass('mage-error').parent().find('[generated]').remove();\n                $(this.options.regionListId).removeClass('mage-error').parent().find('[generated]').remove();\n                $(this.options.postcodeId).removeClass('mage-error').parent().find('[generated]').remove();\n            }\n        },\n\n        /**\n         * Update dropdown list based on the country selected\n         *\n         * @param {String} country - 2 uppercase letter for country code\n         * @private\n         */\n        _updateRegion: function (country) {\n            // Clear validation error messages\n            var regionList = $(this.options.regionListId),\n                regionInput = $(this.options.regionInputId),\n                postcode = $(this.options.postcodeId),\n                label = regionList.parent().siblings('label'),\n                container = regionList.parents('div.field'),\n                regionsEntries,\n                regionId,\n                regionData;\n\n            this._clearError();\n            this._checkRegionRequired(country);\n\n            // Populate state/province dropdown list if available or use input box\n            if (this.options.regionJson[country]) {\n                this._removeSelectOptions(regionList);\n                regionsEntries = _.pairs(this.options.regionJson[country]);\n                $.each(regionsEntries, $.proxy(function (key, value) {\n                    regionData = value[1];\n                    regionId = regionData.id;\n                    this._renderSelectOption(regionList, regionId.toString(), regionData);\n                }, this));\n\n                if (this.currentRegionOption) {\n                    regionList.val(this.currentRegionOption);\n                }\n\n                if (this.setOption) {\n                    regionList.find('option').filter(function () {\n                        return this.text === regionInput.val();\n                    }).attr('selected', true);\n                }\n\n                if (this.options.isRegionRequired) {\n                    regionList.addClass('required-entry').removeAttr('disabled');\n                    container.addClass('required').show();\n                } else {\n                    regionList.removeClass('required-entry validate-select').removeAttr('data-validate');\n                    container.removeClass('required');\n\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\n                        regionList.hide();\n                        container.hide();\n                    } else {\n                        regionList.removeAttr('disabled').show();\n                    }\n                }\n\n                regionList.show();\n                regionInput.hide();\n                label.attr('for', regionList.attr('id'));\n            } else {\n                this._removeSelectOptions(regionList);\n\n                if (this.options.isRegionRequired) {\n                    regionInput.addClass('required-entry').removeAttr('disabled');\n                    container.addClass('required').show();\n                } else {\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\n                        regionInput.attr('disabled', 'disabled');\n                        container.hide();\n                    }\n                    container.removeClass('required');\n                    regionInput.removeClass('required-entry');\n                }\n\n                regionList.removeClass('required-entry').prop('disabled', 'disabled').hide();\n                regionInput.show();\n                label.attr('for', regionInput.attr('id'));\n            }\n\n            // If country is in optionalzip list, make postcode input not required\n            if (this.options.isZipRequired) {\n                $.inArray(country, this.options.countriesWithOptionalZip) >= 0 ?\n                    postcode.removeClass('required-entry').closest('.field').removeClass('required') :\n                    postcode.addClass('required-entry').closest('.field').addClass('required');\n            }\n\n            // Add defaultvalue attribute to state/province select element\n            regionList.attr('defaultvalue', this.options.defaultRegion);\n            this.options.form.find('[type=\"submit\"]').removeAttr('disabled').show();\n        },\n\n        /**\n         * Check if the selected country has a mandatory region selection\n         *\n         * @param {String} country - Code of the country - 2 uppercase letter for country code\n         * @private\n         */\n        _checkRegionRequired: function (country) {\n            var self = this;\n\n            this.options.isRegionRequired = false;\n            $.each(this.options.regionJson.config['regions_required'], function (index, elem) {\n                if (elem === country) {\n                    self.options.isRegionRequired = true;\n                }\n            });\n        }\n    });\n\n    return $.mage.directoryRegionUpdater;\n});\n","Magento_Theme/js/cookie-status.js":"define([\n    'jquery',\n    'Magento_Ui/js/modal/modal',\n    'mage/translate'\n], function ($, modal) {\n    'use strict';\n\n    $.widget('mage.cookieStatus', {\n        options: {\n            type: 'popup',\n            responsive: true,\n            innerScroll: true,\n            autoOpen: true,\n            buttons: [{\n                text: $.mage.__('Close'),\n                class: 'cookie-status',\n\n                /**\n                 * Callback for click event\n                 */\n                click: function () {\n                    this.closeModal();\n                }\n            }]\n        },\n\n        /**\n         * Init object\n         * @private\n         */\n        _init: function () {\n\n            if (!navigator.cookieEnabled) {\n                modal(this.options, $('#cookie-status'));\n            }\n        }\n    });\n\n    return $.mage.cookieStatus;\n});\n","Magento_Theme/js/row-builder.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * JQuery UI Widget declaration: 'mage.rowBuilder'\n *\n * @api\n */\ndefine([\n    'jquery',\n    'mage/template',\n    'jquery-ui-modules/widget'\n], function ($, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.rowBuilder', {\n\n        /**\n         * options with default values for setting up the template\n         */\n        options: {\n            //Default template options\n            rowTemplate: '#template-registrant',\n            rowContainer: '#registrant-container',\n            //Row index used by the template rows.\n            rowIndex: 0,\n            //Row count: Should not be set externally\n            rowCount: 0,\n            rowParentElem: '<li></li>',\n            rowContainerClass: 'fields',\n            addRowBtn: '#add-registrant-button',\n            btnRemoveIdPrefix: 'btn-remove',\n            btnRemoveSelector: '.btn-remove',\n            rowIdPrefix: 'row',\n            //This class is added to rows added after the first one. Adds the dotted separator\n            additionalRowClass: 'add-row',\n\n            /*\n             This is provided during widget instantiation. eg :\n             formDataPost : {\"formData\":formData,\"templateFields\":['field1-name','field2-name'] }\n             -\"formData\" is the multi-dimensional array of form field values : [['a','b'],['c','b']]\n             received from the server and encoded\n             -\"templateFields\" are the input fields in the template with index suffixed after the field name\n             eg field1-name{index}\n             */\n            formDataPost: null,\n            //Default selectors for add element of a template\n            addEventSelector: 'button',\n            //Default selectors for remove markup elements of a template\n            remEventSelector: 'a',\n            //This option allows adding first row delete option and a row separator\n            hideFirstRowAddSeparator: true,\n            //Max rows - This option should be set when instantiating the widget\n            maxRows: 1000,\n            maxRowsMsg: '#max-registrant-message'\n        },\n\n        /**\n         * Initialize create\n         * @private\n         */\n        _create: function () {\n            this.rowTemplate = mageTemplate(this.options.rowTemplate);\n\n            this.options.rowCount = this.options.rowIndex = 0;\n\n            //On document ready related tasks\n            $($.proxy(this.ready, this));\n\n            //Binding template-wide events handlers for adding and removing rows\n            this.element.on(\n                'click',\n                this.options.addEventSelector + this.options.addRowBtn,\n                $.proxy(this.handleAdd, this)\n            );\n            this.element.on(\n                'click',\n                this.options.remEventSelector + this.options.btnRemoveSelector,\n                $.proxy(this.handleRemove, this)\n            );\n        },\n\n        /**\n         * Initialize template\n         * @public\n         */\n        ready: function () {\n            if (this.options.formDataPost &&\n                this.options.formDataPost.formData &&\n                this.options.formDataPost.formData.length\n            ) {\n                this.processFormDataArr(this.options.formDataPost);\n            } else if (this.options.rowIndex === 0 && this.options.maxRows !== 0) {\n                //If no form data , then add default row\n                this.addRow(0);\n            }\n        },\n\n        /**\n         * Process and loop through all row data to create preselected values. This is used for any error on submit.\n         * For complex implementations the inheriting widget can override this behavior\n         * @public\n         * @param {Object} formDataArr\n         */\n        processFormDataArr: function (formDataArr) {\n            var formData = formDataArr.formData,\n                templateFields = formDataArr.templateFields,\n                formRow,\n                i, j;\n\n            for (i = this.options.rowIndex = 0; i < formData.length; this.options.rowIndex = i++) {\n                this.addRow(i);\n\n                formRow = formData[i];\n\n                for (j = 0; j < formRow.length; j++) {\n                    this.setFieldById(templateFields[j] + i, formRow[j]);\n                }\n            }\n\n        },\n\n        /**\n         * Initialize and create markup for template row. Add it to the parent container.\n         * The template processing will substitute row index at all places marked with _index_ in the template\n         * using the template\n         * @public\n         * @param {Number} index - current index/count of the created template. This will be used as the id\n         * @return {*}\n         */\n        addRow: function (index) {\n            var row = $(this.options.rowParentElem),\n                tmpl;\n\n            row.addClass(this.options.rowContainerClass).attr('id', this.options.rowIdPrefix + index);\n\n            tmpl = this.rowTemplate({\n                data: {\n                    _index_: index\n                }\n            });\n\n            $(tmpl).appendTo(row);\n\n            $(this.options.rowContainer).append(row).trigger('contentUpdated');\n\n            row.addClass(this.options.additionalRowClass);\n\n            //Remove 'delete' link and additionalRowClass for first row\n            if (this.options.rowIndex === 0 && this.options.hideFirstRowAddSeparator) {\n                $('#' + this._esc(this.options.btnRemoveIdPrefix) + '0').remove();\n                $('#' + this._esc(this.options.rowIdPrefix) + '0').removeClass(this.options.additionalRowClass);\n            }\n\n            this.maxRowCheck(++this.options.rowCount);\n\n            return row;\n        },\n\n        /**\n         * Remove return item information row\n         * @public\n         * @param {*} rowIndex - return item information row index\n         * @return {Boolean}\n         */\n        removeRow: function (rowIndex) {\n            $('#' + this._esc(this.options.rowIdPrefix) + rowIndex).remove();\n            this.maxRowCheck(--this.options.rowCount);\n\n            return false;\n        },\n\n        /**\n         * Function to check if maximum rows are exceeded and render/hide maxMsg and Add btn\n         * @public\n         * @param {Number} rowIndex\n         */\n        maxRowCheck: function (rowIndex) {\n            var addRowBtn = $(this.options.addRowBtn),\n                maxRowMsg = $(this.options.maxRowsMsg);\n\n            //liIndex starts from 0\n            if (rowIndex >= this.options.maxRows) {\n                addRowBtn.hide();\n                maxRowMsg.show();\n            } else if (addRowBtn.is(':hidden')) {\n                addRowBtn.show();\n                maxRowMsg.hide();\n            }\n        },\n\n        /**\n         * Set the value on given element\n         * @public\n         * @param {String} domId\n         * @param {String} value\n         */\n        setFieldById: function (domId, value) {\n            var x = $('#' + this._esc(domId));\n\n            if (x.length) {\n\n                if (x.is(':checkbox')) {\n                    x.attr('checked', true);\n                } else if (x.is('option')) {\n                    x.attr('selected', 'selected');\n                } else {\n                    x.val(value);\n                }\n            }\n        },\n\n        /**\n         * Delegated handler for adding a row\n         * @public\n         * @return {Boolean}\n         */\n        handleAdd: function () {\n            this.addRow(++this.options.rowIndex);\n\n            return false;\n        },\n\n        /**\n         * Delegated handler for removing a selected row\n         * @public\n         * @param {Object} e - Native event object\n         * @return {Boolean}\n         */\n        handleRemove: function (e) {\n            this.removeRow($(e.currentTarget).closest('[id^=\"' + this.options.btnRemoveIdPrefix + '\"]')\n                .attr('id').replace(this.options.btnRemoveIdPrefix, ''));\n\n            return false;\n        },\n\n        /**\n         * Utility function to add escape chars for jquery selector strings\n         * @private\n         * @param {String} str - String to be processed\n         * @return {String}\n         */\n        _esc: function (str) {\n            return str ? str.replace(/([ ;&,.+*~\\':\"!\\^$\\[\\]()=>|\\/@])/g, '\\\\$1') : str;\n        }\n    });\n\n    return $.mage.rowBuilder;\n});\n","Magento_Theme/js/theme.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/smart-keyboard-handler',\n    'mage/mage',\n    'domReady!'\n], function ($, keyboardHandler) {\n    'use strict';\n\n    $('.cart-summary').mage('sticky', {\n        container: '#maincontent'\n    });\n\n    $('.panel.header > .header.links').clone().appendTo('#store\\\\.links');\n    $('#store\\\\.links li a').each(function () {\n        var id = $(this).attr('id');\n\n        if (id !== undefined) {\n            $(this).attr('id', id + '_mobile');\n        }\n    });\n    keyboardHandler.apply();\n});\n","Magento_Theme/js/model/breadcrumb-list.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return [];\n});\n","Magento_Theme/js/view/add-home-breadcrumb.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* eslint-disable max-nested-callbacks, no-undef */\ndefine([\n    'jquery',\n    'Magento_Theme/js/model/breadcrumb-list',\n    'mage/translate'\n], function ($, breadcrumbList) {\n    'use strict';\n\n    /**\n     * @return {Object}\n     */\n    var homeCrumb = function () {\n        return {\n            name: 'home',\n            label: $.mage.__('Home'),\n            title: $.mage.__('Go to Home Page'),\n            link: BASE_URL || ''\n        };\n    };\n\n    return function (breadcrumb) {\n\n        breadcrumbList.unshift(homeCrumb());\n\n        return breadcrumb;\n    };\n});\n","Magento_Theme/js/view/breadcrumbs.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Theme/js/model/breadcrumb-list',\n    'text!Magento_Theme/templates/breadcrumbs.html',\n    'jquery-ui-modules/widget'\n], function ($, mageTemplate, breadcrumbList, tpl) {\n    'use strict';\n\n    /**\n     * Breadcrumb Widget.\n     */\n    $.widget('mage.breadcrumbs', {\n\n        /** @inheritdoc */\n        _init: function () {\n            this._super();\n            this._render();\n        },\n\n        /**\n         * Render breadcrumb.\n         *\n         * @private\n         */\n        _render: function () {\n            var html,\n                crumbs = breadcrumbList,\n                template = mageTemplate(tpl);\n\n            this._decorate(crumbs);\n\n            html = template({\n                'breadcrumbs': crumbs\n            });\n\n            if (html.length) {\n                $(this.element).html(html);\n            }\n        },\n\n        /**\n         * Decorate list.\n         *\n         * @param {Array} list\n         * @private\n         */\n        _decorate: function (list) {\n\n            if (list.length) {\n                list[0].first = true;\n            }\n\n            if (list.length > 1) {\n                list[list.length - 1].last = true;\n            }\n        }\n    });\n\n    return $.mage.breadcrumbs;\n});\n","Magento_Theme/js/view/messages.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'uiComponent',\n    'Magento_Customer/js/customer-data',\n    'underscore',\n    'escaper',\n    'jquery/jquery-storageapi'\n], function ($, Component, customerData, _, escaper) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            cookieMessages: [],\n            messages: [],\n            allowedTags: ['div', 'span', 'b', 'strong', 'i', 'em', 'u', 'a']\n        },\n\n        /**\n         * Extends Component object by storage observable messages.\n         */\n        initialize: function () {\n            this._super();\n\n            this.cookieMessages = _.unique($.cookieStorage.get('mage-messages'), 'text');\n            this.messages = customerData.get('messages').extend({\n                disposableCustomerData: 'messages'\n            });\n\n            // Force to clean obsolete messages\n            if (!_.isEmpty(this.messages().messages)) {\n                customerData.set('messages', {});\n            }\n\n            $.mage.cookies.set('mage-messages', '', {\n                samesite: 'strict',\n                domain: ''\n            });\n        },\n\n        /**\n         * Prepare the given message to be rendered as HTML\n         *\n         * @param {String} message\n         * @return {String}\n         */\n        prepareMessageForHtml: function (message) {\n            return escaper.escapeHtml(message, this.allowedTags);\n        }\n    });\n});\n","Magento_Wishlist/js/add-to-wishlist.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.addToWishlist', {\n        options: {\n            bundleInfo: 'div.control [name^=bundle_option]',\n            configurableInfo: '.super-attribute-select',\n            groupedInfo: '#super-product-table input',\n            downloadableInfo: '#downloadable-links-list input',\n            customOptionsInfo: '.product-custom-option',\n            qtyInfo: '#qty',\n            actionElement: '[data-action=\"add-to-wishlist\"]',\n            productListWrapper: '.product-item-info',\n            productPageWrapper: '.product-info-main'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this._bind();\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            var options = this.options,\n                dataUpdateFunc = '_updateWishlistData',\n                validateProductQty = '_validateWishlistQty',\n                changeCustomOption = 'change ' + options.customOptionsInfo,\n                changeQty = 'change ' + options.qtyInfo,\n                updateWishlist = 'click ' + options.actionElement,\n                events = {},\n                key;\n\n            if ('productType' in options) {\n                if (typeof options.productType === 'string') {\n                    options.productType = [options.productType];\n                }\n            } else {\n                options.productType = [];\n            }\n\n            events[changeCustomOption] = dataUpdateFunc;\n            events[changeQty] = dataUpdateFunc;\n            events[updateWishlist] = validateProductQty;\n\n            for (key in options.productType) {\n                if (options.productType.hasOwnProperty(key) && options.productType[key] + 'Info' in options) {\n                    events['change ' + options[options.productType[key] + 'Info']] = dataUpdateFunc;\n                }\n            }\n            this._on(events);\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _updateWishlistData: function (event) {\n            var dataToAdd = {},\n                isFileUploaded = false,\n                handleObjSelector = null,\n                self = this;\n\n            if (event.handleObj.selector == this.options.qtyInfo) { //eslint-disable-line eqeqeq\n                this._updateAddToWishlistButton({}, event);\n                event.stopPropagation();\n\n                return;\n            }\n\n            handleObjSelector = $(event.currentTarget).closest('form').find(event.handleObj.selector);\n\n            handleObjSelector.each(function (index, element) {\n                if ($(element).is('input[type=text]') ||\n                    $(element).is('input[type=email]') ||\n                    $(element).is('input[type=number]') ||\n                    $(element).is('input[type=hidden]') ||\n                    $(element).is('input[type=checkbox]:checked') ||\n                    $(element).is('input[type=radio]:checked') ||\n                    $(element).is('textarea') ||\n                    $('#' + element.id + ' option:selected').length\n                ) {\n                    if ($(element).data('selector') || $(element).attr('name')) {\n                        dataToAdd = $.extend({}, dataToAdd, self._getElementData(element));\n                    }\n\n                    return;\n                }\n\n                if ($(element).is('input[type=file]') && $(element).val()) {\n                    isFileUploaded = true;\n                }\n            });\n\n            if (isFileUploaded) {\n                this.bindFormSubmit();\n            }\n            this._updateAddToWishlistButton(dataToAdd, event);\n            event.stopPropagation();\n        },\n\n        /**\n         * @param {Object} dataToAdd\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _updateAddToWishlistButton: function (dataToAdd, event) {\n            var self = this,\n                buttons = this._getAddToWishlistButton(event);\n\n            buttons.each(function (index, element) {\n                var params = $(element).data('post'),\n                    currentTarget = event.currentTarget,\n                    targetElement,\n                    targetValue;\n\n                if (!params) {\n                    params = {\n                        'data': {}\n                    };\n                } else if ($(currentTarget).data('selector') || $(currentTarget).attr('name')) {\n                    targetElement = self._getElementData(currentTarget);\n                    targetValue = Object.keys(targetElement)[0];\n\n                    if (params.data.hasOwnProperty(targetValue) && !dataToAdd.hasOwnProperty(targetValue)) {\n                        delete params.data[targetValue];\n                    }\n                }\n\n                params.data = $.extend({}, params.data, dataToAdd, {\n                    'qty': $(self.options.qtyInfo).val()\n                });\n                $(element).data('post', params);\n            });\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _getAddToWishlistButton: function (event) {\n            var productListWrapper = $(event.currentTarget).closest(this.options.productListWrapper);\n\n            if (productListWrapper.length) {\n                return productListWrapper.find(this.options.actionElement);\n            }\n\n            return $(this.options.actionElement);\n        },\n\n        /**\n         * @param {Object} array1\n         * @param {Object} array2\n         * @return {Object}\n         * @private\n         * @deprecated\n         */\n        _arrayDiffByKeys: function (array1, array2) {\n            var result = {};\n\n            $.each(array1, function (key, value) {\n                if (key.indexOf('option') === -1) {\n                    return;\n                }\n\n                if (!array2[key]) {\n                    result[key] = value;\n                }\n            });\n\n            return result;\n        },\n\n        /**\n         * @param {HTMLElement} element\n         * @return {Object}\n         * @private\n         */\n        _getElementData: function (element) {\n            var data, elementName, elementValue;\n\n            element = $(element);\n            data = {};\n            elementName = element.data('selector') ? element.data('selector') : element.attr('name');\n            elementValue = element.val();\n\n            if (element.is('select[multiple]') && elementValue !== null) {\n                if (elementName.substr(elementName.length - 2) == '[]') { //eslint-disable-line eqeqeq\n                    elementName = elementName.substring(0, elementName.length - 2);\n                }\n                $.each(elementValue, function (key, option) {\n                    data[elementName + '[' + option + ']'] = option;\n                });\n            } else if (elementName.substr(elementName.length - 2) == '[]') { //eslint-disable-line eqeqeq, max-depth\n                elementName = elementName.substring(0, elementName.length - 2);\n\n                data[elementName + '[' + elementValue + ']'] = elementValue;\n            } else {\n                data[elementName] = elementValue;\n            }\n\n            return data;\n        },\n\n        /**\n         * @param {Object} params\n         * @param {Object} dataToAdd\n         * @private\n         * @deprecated\n         */\n        _removeExcessiveData: function (params, dataToAdd) {\n            var dataToRemove = this._arrayDiffByKeys(params.data, dataToAdd);\n\n            $.each(dataToRemove, function (key) {\n                delete params.data[key];\n            });\n        },\n\n        /**\n         * Bind form submit.\n         */\n        bindFormSubmit: function () {\n            var self = this;\n\n            $('[data-action=\"add-to-wishlist\"]').on('click', function (event) {\n                var element, params, form, action;\n\n                event.stopPropagation();\n                event.preventDefault();\n\n                element = $('input[type=file]' + self.options.customOptionsInfo);\n                params = $(event.currentTarget).data('post');\n                form = $(element).closest('form');\n                action = params.action;\n\n                if (params.data.id) {\n                    $('<input>', {\n                        type: 'hidden',\n                        name: 'id',\n                        value: params.data.id\n                    }).appendTo(form);\n                }\n\n                if (params.data.uenc) {\n                    action += 'uenc/' + params.data.uenc;\n                }\n\n                $(form).attr('action', action).trigger('submit');\n            });\n        },\n\n        /**\n         * Validate product quantity before updating Wish List\n         *\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _validateWishlistQty: function (event) {\n            var element = $(this.options.qtyInfo);\n\n            if (!(element.validation() && element.validation('isValid'))) {\n                event.preventDefault();\n                event.stopPropagation();\n\n                return;\n            }\n        }\n    });\n\n    return $.mage.addToWishlist;\n});\n","Magento_Wishlist/js/search.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.wishlistSearch', {\n\n        /**\n         * Bind handlers to events\n         */\n        _create: function () {\n            this.element.on('change', $.proxy(this._toggleForm, this));\n        },\n\n        /**\n         * Toggle Form\n         * @private\n         */\n        _toggleForm: function () {\n            switch (this.element.val()) {\n                case 'name':\n                    $(this.options.emailFormSelector).hide();\n                    $(this.options.nameFormSelector).show();\n                    break;\n\n                case 'email':\n                    $(this.options.nameFormSelector).hide();\n                    $(this.options.emailFormSelector).show();\n                    break;\n                default:\n                    $(this.options.emailFormSelector).add(this.options.nameFormSelector).hide();\n            }\n        }\n    });\n\n    return $.mage.wishlistSearch;\n});\n","Magento_Wishlist/js/wishlist.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Ui/js/modal/alert',\n    'jquery-ui-modules/widget',\n    'mage/validation/validation',\n    'mage/dataPost'\n], function ($, mageTemplate, alert) {\n    'use strict';\n\n    $.widget('mage.wishlist', {\n        options: {\n            dataAttribute: 'item-id',\n            nameFormat: 'qty[{0}]',\n            btnRemoveSelector: '[data-role=remove]',\n            qtySelector: '[data-role=qty]',\n            addToCartSelector: '[data-role=tocart]',\n            addAllToCartSelector: '[data-role=all-tocart]',\n            commentInputType: 'textarea',\n            infoList: false\n        },\n\n        /**\n         * Bind handlers to events.\n         */\n        _create: function () {\n            var _this = this;\n\n            if (!this.options.infoList) {\n                this.element\n                    .on('addToCart', function (event, context) {\n                        var urlParams;\n\n                        event.stopPropagation(event);\n                        $(context).data('stop-processing', true);\n                        urlParams = _this._getItemsToCartParams(\n                            $(context).parents('[data-row=product-item]').find(_this.options.addToCartSelector)\n                        );\n                        $.mage.dataPost().postData(urlParams);\n\n                        return false;\n                    })\n                    .on('click', this.options.btnRemoveSelector, $.proxy(function (event) {\n                        event.preventDefault();\n                        $.mage.dataPost().postData($(event.currentTarget).data('post-remove'));\n                    }, this))\n                    .on('click', this.options.addToCartSelector, $.proxy(this._beforeAddToCart, this))\n                    .on('click', this.options.addAllToCartSelector, $.proxy(this._addAllWItemsToCart, this))\n                    .on('focusin focusout', this.options.commentInputType, $.proxy(this._focusComment, this));\n            }\n\n            // Setup validation for the form\n            this.element.mage('validation', {\n                /** @inheritdoc */\n                errorPlacement: function (error, element) {\n                    error.insertAfter(element.next());\n                }\n            });\n        },\n\n        /**\n         * Process data before add to cart\n         *\n         * - update item's qty value.\n         *\n         * @param {Event} event\n         * @private\n         */\n        _beforeAddToCart: function (event) {\n            var elem = $(event.currentTarget),\n                itemId = elem.data(this.options.dataAttribute),\n                qtyName = $.validator.format(this.options.nameFormat, itemId),\n                qtyValue = elem.parents().find('[name=\"' + qtyName + '\"]').val(),\n                params = elem.data('post');\n\n            if (params) {\n                params.data = $.extend({}, params.data, {\n                    'qty': qtyValue\n                });\n                elem.data('post', params);\n            }\n        },\n\n        /**\n         * Add wish list items to cart.\n         * @private\n         * @param {jQuery} elem - clicked 'add to cart' button\n         */\n        _getItemsToCartParams: function (elem) {\n            var itemId, url, qtyName, qtyValue;\n\n            if (elem.data(this.options.dataAttribute)) {\n                itemId = elem.data(this.options.dataAttribute);\n                url = this.options.addToCartUrl;\n                qtyName = $.validator.format(this.options.nameFormat, itemId);\n                qtyValue = elem.parents().find('[name=\"' + qtyName + '\"]').val();\n                url.data.item = itemId;\n                url.data.qty = qtyValue;\n\n                return url;\n            }\n        },\n\n        /**\n         * Add all wish list items to cart\n         * @private\n         */\n        _addAllWItemsToCart: function () {\n            var urlParams = this.options.addAllToCartUrl,\n                separator = urlParams.action.indexOf('?') >= 0 ? '&' : '?';\n\n            this.element.find(this.options.qtySelector).each(function (index, element) {\n                urlParams.action += separator + $(element).prop('name') + '=' + encodeURIComponent($(element).val());\n                separator = '&';\n            });\n            $.mage.dataPost().postData(urlParams);\n        },\n\n        /**\n         * Toggle comment string.\n         * @private\n         * @param {Event} e\n         */\n        _focusComment: function (e) {\n            var commentInput = e.currentTarget;\n\n            if (commentInput.value === '' || commentInput.value === this.options.commentString) {\n                commentInput.value = commentInput.value === this.options.commentString ?\n                    '' : this.options.commentString;\n            }\n        }\n    });\n\n    // Extension for mage.wishlist - Select All checkbox\n    $.widget('mage.wishlist', $.mage.wishlist, {\n        options: {\n            selectAllCheckbox: '#select-all',\n            parentContainer: '#wishlist-table'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            var selectAllCheckboxParent, checkboxCount;\n\n            this._super();\n            selectAllCheckboxParent = $(this.options.selectAllCheckbox).parents(this.options.parentContainer);\n            checkboxCount = selectAllCheckboxParent\n                .find('input:checkbox:not(' + this.options.selectAllCheckbox + ')').length;\n            // If Select all checkbox is checked, check all item checkboxes, if unchecked, uncheck all item checkboxes\n            $(this.options.selectAllCheckbox).on('click', function () {\n                selectAllCheckboxParent.find('input:checkbox').attr('checked', $(this).is(':checked'));\n            });\n            // If all item checkboxes are checked, check select all checkbox,\n            // if not all item checkboxes are checked, uncheck select all checkbox\n            selectAllCheckboxParent.on(\n                'click',\n                'input:checkbox:not(' + this.options.selectAllCheckbox + ')',\n                $.proxy(function () {\n                    var checkedCount = selectAllCheckboxParent\n                        .find('input:checkbox:checked:not(' + this.options.selectAllCheckbox + ')').length;\n\n                    $(this.options.selectAllCheckbox).attr('checked', checkboxCount === checkedCount);\n                }, this)\n            );\n        }\n    });\n    // Extension for mage.wishlist info add to cart\n    $.widget('mage.wishlist', $.mage.wishlist, {\n        /** @inheritdoc */\n        _create: function () {\n            this._super();\n\n            if (this.options.infoList) {\n                this.element.on('addToCart', $.proxy(function (event, context) {\n                    this.element.find('input:checkbox').attr('checked', false);\n                    $(context).closest('tr').find('input:checkbox').attr('checked', true);\n                    this.element.trigger('submit');\n                }, this));\n                this._checkBoxValidate();\n            }\n        },\n\n        /**\n         * validate checkbox selection.\n         * @private\n         */\n        _checkBoxValidate: function () {\n            this.element.validation({\n                submitHandler: $.proxy(function (form) {\n                    if ($(form).find('input:checkbox:checked').length) {\n                        form.submit();\n                    } else {\n                        alert({\n                            content: this.options.checkBoxValidationMessage\n                        });\n                    }\n                }, this)\n            });\n        }\n    });\n\n    // Extension for mage.wishlist - Add Wishlist item to Gift Registry\n    $.widget('mage.wishlist', $.mage.wishlist, {\n        options: {\n            formTmplSelector: '#form-tmpl',\n            formTmplId: '#wishlist-hidden-form'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            var _this = this;\n\n            this._super();\n            this.element.on('click', '[data-wishlist-to-giftregistry]', function () {\n                var json = $(this).data('wishlist-to-giftregistry'),\n                    tmplJson = {\n                        item: json.itemId,\n                        entity: json.entity,\n                        url: json.url\n                    },\n                    html = mageTemplate(_this.options.formTmplSelector, {\n                        data: tmplJson\n                    });\n\n                $(html).appendTo('body');\n                $(_this.options.formTmplId).trigger('submit');\n            });\n        }\n    });\n\n    return $.mage.wishlist;\n});\n","Magento_Wishlist/js/product/addtowishlist-button.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/grid/columns/column',\n    'Magento_Catalog/js/product/uenc-processor',\n    'Magento_Catalog/js/product/list/column-status-validator'\n], function (Element, uencProcessor, columnStatusValidator) {\n    'use strict';\n\n    return Element.extend({\n        defaults: {\n            label: ''\n        },\n\n        /**\n         * Get request POST data.\n         *\n         * @param {Object} row\n         * @return {String}\n         */\n        getDataPost: function (row) {\n            return uencProcessor(row['extension_attributes']['wishlist_button'].url);\n        },\n\n        /**\n         * Check if component must be shown.\n         *\n         * @return {Boolean}\n         */\n        isAllowed: function () {\n            return columnStatusValidator.isValid(this.source(), 'add_to_wishlist', 'show_buttons');\n        },\n\n        /**\n         * Get button label.\n         *\n         * @return {String}\n         */\n        getLabel: function () {\n            return this.label;\n        }\n    });\n});\n","Magento_Wishlist/js/view/wishlist.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Customer/js/customer-data'\n], function (Component, customerData) {\n    'use strict';\n\n    return Component.extend({\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            this.wishlist = customerData.get('wishlist');\n        }\n    });\n});\n","Magento_Downloadable/js/downloadable.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget',\n    'Magento_Catalog/js/price-box'\n], function ($) {\n    'use strict';\n\n    /**\n     * Downloadable widget\n     */\n    $.widget('mage.downloadable', {\n        options: {\n            priceHolderSelector: '.price-box',\n            linkElement: '',\n            allElements: ''\n        },\n\n        /**\n         * @inheritdoc\n         */\n        _init: function initLinks() {\n            var element = this.element,\n                options = $(this.options.linkElement, element);\n\n            options.trigger('change');\n        },\n\n        /**\n         *  @inheritdoc\n         */\n        _create: function () {\n            var self = this;\n\n            this.element.find(this.options.linkElement).on('change', $.proxy(function () {\n                this._reloadPrice();\n            }, this));\n\n            this.element.find(this.options.allElements).on('change', function () {\n                if (this.checked) {\n                    $('label[for=\"' + this.id + '\"] > span').text($(this).attr('data-checked'));\n                    self.element.find(self.options.linkElement + ':not(:checked)').each(function () {\n                        $(this).trigger('click');\n                    });\n                } else {\n                    $('[for=\"' + this.id + '\"] > span').text($(this).attr('data-notchecked'));\n                    self.element.find(self.options.linkElement + ':checked').each(function () {\n                        $(this).trigger('click');\n                    });\n                }\n            });\n\n            this._reloadPrice();\n        },\n\n        /**\n         * Reload product price with selected link price included\n         * @private\n         */\n        _reloadPrice: function () {\n            var finalPrice = 0,\n                basePrice = 0;\n\n            this.element.find(this.options.linkElement + ':checked').each($.proxy(function (index, element) {\n                finalPrice += this.options.config.links[$(element).val()].finalPrice;\n                basePrice += this.options.config.links[$(element).val()].basePrice;\n            }, this));\n\n            $(this.options.priceHolderSelector).trigger('updatePrice', {\n                'prices': {\n                    'finalPrice': {\n                        'amount': finalPrice\n                    },\n                    'basePrice': {\n                        'amount': basePrice\n                    }\n                }\n            });\n\n            this.reloadAllCheckText();\n        },\n\n        /**\n         * Reload all-elements-checkbox's label\n         * @private\n         */\n        reloadAllCheckText: function () {\n            var allChecked = true,\n                allElementsCheck = $(this.options.allElements),\n                allElementsLabel = $('label[for=\"' + allElementsCheck.attr('id') + '\"] > span');\n\n            $(this.options.linkElement).each(function () {\n                if (!this.checked) {\n                    allChecked = false;\n                }\n            });\n\n            if (allChecked) {\n                allElementsLabel.text(allElementsCheck.attr('data-checked'));\n                allElementsCheck.prop('checked', true);\n            } else {\n                allElementsLabel.text(allElementsCheck.attr('data-notchecked'));\n                allElementsCheck.prop('checked', false);\n            }\n        }\n    });\n\n    return $.mage.downloadable;\n});\n","Magento_Newsletter/js/newsletter-sign-up.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'uiElement',\n    'mage/url',\n    'subscriptionStatusResolver',\n    'mage/validation'\n], function ($, Component, urlBuilder, subscriptionStatusResolver) {\n    'use strict';\n\n    return Component.extend({\n\n        defaults: {\n            signUpElement: '',\n            submitButton: '',\n            element: null\n        },\n\n        /** @inheritdoc */\n        initialize: function (config, element) {\n            this._super();\n            this.element = element;\n            $(element).on('change', $.proxy(this.updateSignUpStatus, this));\n            this.updateSignUpStatus();\n        },\n\n        /**\n         * Send status request and update subscription element according to result.\n         */\n        updateSignUpStatus: function () {\n            var element = $(this.element),\n                email = element.val(),\n                self = this,\n                newsletterSubscription;\n\n            if ($(self.signUpElement).is(':checked')) {\n                return;\n            }\n\n            if (!email || !$.validator.methods['validate-email'].call(this, email, element)) {\n                return;\n            }\n\n            newsletterSubscription = $.Deferred();\n\n            $(self.submitButton).prop('disabled', true);\n\n            subscriptionStatusResolver(email, newsletterSubscription);\n\n            $.when(newsletterSubscription).done(function (isSubscribed) {\n                if (isSubscribed) {\n                    $(self.signUpElement).prop('checked', true);\n                }\n            }).always(function () {\n                $(self.submitButton).prop('disabled', false);\n            });\n        }\n    });\n});\n","Magento_Newsletter/js/subscription-status-resolver.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/url'\n], function ($, urlBuilder) {\n    'use strict';\n\n    return function (email, deferred) {\n        return $.getJSON(\n            urlBuilder.build('newsletter/ajax/status'),\n            {\n                email: email\n            }\n        ).done(function (response) {\n            if (response.errors) {\n                deferred.reject();\n            } else {\n                deferred.resolve(response.subscribed);\n            }\n        }).fail(function () {\n            deferred.reject();\n        });\n    };\n});\n","Magento_Review/js/error-placement.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage'\n], function ($) {\n    'use strict';\n\n    return function (config, element) {\n        $(element).mage('validation', {\n            /** @inheritdoc */\n            errorPlacement: function (error, el) {\n\n                if (el.parents('#product-review-table').length) {\n                    $('#product-review-table').siblings(this.errorElement + '.' + this.errorClass).remove();\n                    $('#product-review-table').after(error);\n                } else {\n                    el.after(error);\n                }\n            }\n        });\n    };\n});\n","Magento_Review/js/process-reviews.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'tabs',\n    'collapsible'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {String} url\n     * @param {*} fromPages\n     */\n    function processReviews(url, fromPages) {\n        $.ajax({\n            url: url,\n            cache: true,\n            dataType: 'html',\n            showLoader: false,\n            loaderContext: $('.product.data.items')\n        }).done(function (data) {\n            $('#product-review-container').html(data).trigger('contentUpdated');\n            $('[data-role=\"product-review\"] .pages a').each(function (index, element) {\n                $(element).on('click', function (event) { //eslint-disable-line max-nested-callbacks\n                    processReviews($(element).attr('href'), true);\n                    event.preventDefault();\n                });\n            });\n        }).always(function () {\n            if (fromPages == true) { //eslint-disable-line eqeqeq\n                $('html, body').animate({\n                    scrollTop: $('#reviews').offset().top - 50\n                }, 300);\n            }\n        });\n    }\n\n    return function (config) {\n        var reviewTab = $(config.reviewsTabSelector),\n            requiredReviewTabRole = 'tab';\n\n        if (reviewTab.attr('role') === requiredReviewTabRole && reviewTab.hasClass('active')) {\n            processReviews(config.productReviewUrl, location.hash === '#reviews');\n        } else {\n            reviewTab.one('beforeOpen', function () {\n                processReviews(config.productReviewUrl);\n            });\n        }\n\n        $(function () {\n            $('.product-info-main .reviews-actions a').on('click', function (event) {\n                var anchor, addReviewBlock;\n\n                event.preventDefault();\n                anchor = $(this).attr('href').replace(/^.*?(#|$)/, '');\n                addReviewBlock = $('#' + anchor);\n\n                if (addReviewBlock.length) {\n                    $('.product.data.items [data-role=\"content\"]').each(function (index) { //eslint-disable-line\n                        if (this.id == 'reviews') { //eslint-disable-line eqeqeq\n                            $('.product.data.items').tabs('activate', index);\n                        }\n                    });\n                    $('html, body').animate({\n                        scrollTop: addReviewBlock.offset().top - 50\n                    }, 300);\n                }\n\n            });\n        });\n    };\n});\n","Magento_Review/js/submit-review.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    return function (config, element) {\n        $(element).on('submit', function () {\n            if ($(this).valid()) {\n                $(this).find('.submit').attr('disabled', true);\n            }\n        });\n    };\n});\n","Magento_Review/js/validate-review.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery/validate',\n    'mage/translate'\n], function ($) {\n    'use strict';\n\n    $.validator.addMethod(\n        'rating-required', function (value) {\n            return value !== undefined;\n        }, $.mage.__('Please select one of each of the ratings above.'));\n});\n","Magento_Review/js/view/review.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Customer/js/customer-data',\n    'Magento_Customer/js/view/customer'\n], function (Component, customerData) {\n    'use strict';\n\n    return Component.extend({\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            this.review = customerData.get('review').extend({\n                disposableCustomerData: 'review'\n            });\n        },\n\n        /**\n         * @return {*}\n         */\n        nickname: function () {\n            return this.review().nickname || customerData.get('customer')().firstname;\n        }\n    });\n});\n","Magento_Reports/js/recently-viewed.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.recentlyViewedProducts', {\n        options: {\n            localStorageKey: 'recently-viewed-products',\n            productBlock: '#widget_viewed_item',\n            viewedContainer: 'ol'\n        },\n\n        /**\n         * Bind events to the appropriate handlers.\n         * @private\n         */\n        _create: function () {\n            var productHtml = $(this.options.productBlock).html(),\n                productSku = $(this.options.productBlock).data('sku'),\n                products = JSON.parse(window.localStorage.getItem(this.options.localStorageKey)),\n                productsLength, maximum, showed, index;\n\n            if (products) {\n                productsLength = products.sku.length;\n                maximum = $(this.element).data('count');\n                showed = 0;\n\n                for (index = 0; index <= productsLength; index++) {\n                    if (products.sku[index] == productSku || showed >= maximum) { //eslint-disable-line\n                        products.sku.splice(index, 1);\n                        products.html.splice(index, 1);\n                    } else {\n                        $(this.element).find(this.options.viewedContainer).append(products.html[index]);\n                        $(this.element).show();\n                        showed++;\n                    }\n                }\n                $(this.element).find(this.options.productBlock).show();\n            } else {\n                products = {};\n                products.sku = [];\n                products.html = [];\n            }\n            products.sku.unshift(productSku);\n            products.html.unshift(productHtml);\n            window.localStorage.setItem(this.options.localStorageKey, JSON.stringify(products));\n        }\n    });\n\n    return $.mage.recentlyViewedProducts;\n});\n","Magento_PageCache/js/form-key-provider.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(function () {\n    'use strict';\n\n    return function (settings) {\n        var formKey,\n            inputElements,\n            inputSelector = 'input[name=\"form_key\"]';\n\n        /**\n         * Set form_key cookie\n         * @private\n         */\n        function setFormKeyCookie(value) {\n            var expires,\n                secure,\n                date = new Date(),\n                cookiesConfig = window.cookiesConfig || {},\n                isSecure = !!cookiesConfig.secure,\n                samesite = cookiesConfig.samesite || 'lax';\n\n            date.setTime(date.getTime() + 86400000);\n            expires = '; expires=' + date.toUTCString();\n            secure = isSecure ? '; secure' : '';\n            samesite = '; samesite=' + samesite;\n\n            document.cookie = 'form_key=' + (value || '') + expires + secure + '; path=/' + samesite;\n        }\n\n        /**\n         * Retrieves form key from cookie\n         * @private\n         */\n        function getFormKeyCookie() {\n            var cookie,\n                i,\n                nameEQ = 'form_key=',\n                cookieArr = document.cookie.split(';');\n\n            for (i = 0; i < cookieArr.length; i++) {\n                cookie = cookieArr[i];\n\n                while (cookie.charAt(0) === ' ') {\n                    cookie = cookie.substring(1, cookie.length);\n                }\n\n                if (cookie.indexOf(nameEQ) === 0) {\n                    return cookie.substring(nameEQ.length, cookie.length);\n                }\n            }\n\n            return null;\n        }\n\n        /**\n         * Get form key from UI input hidden\n         * @private\n         */\n        function getFormKeyFromUI() {\n            return document.querySelector(inputSelector).value;\n        }\n\n        /**\n         * Generate form key string\n         * @private\n         */\n        function generateFormKeyString() {\n            var result = '',\n                length = 16,\n                chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n            while (length--) {\n                result += chars[Math.round(Math.random() * (chars.length - 1))];\n            }\n\n            return result;\n        }\n\n        /**\n         * Init form_key inputs with value\n         * @private\n         */\n        function initFormKey() {\n            formKey = getFormKeyCookie();\n\n            if (settings && settings.isPaginationCacheEnabled && !formKey) {\n                formKey = getFormKeyFromUI();\n                setFormKeyCookie(formKey);\n            }\n\n            if (!formKey) {\n                formKey = generateFormKeyString();\n                setFormKeyCookie(formKey);\n            }\n            inputElements = document.querySelectorAll(inputSelector);\n\n            if (inputElements.length) {\n                Array.prototype.forEach.call(inputElements, function (element) {\n                    element.setAttribute('value', formKey);\n                });\n            }\n        }\n\n        initFormKey();\n    };\n});\n","Magento_PageCache/js/page-cache.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'domReady',\n    'consoleLogger',\n    'Magento_PageCache/js/form-key-provider',\n    'jquery-ui-modules/widget',\n    'mage/cookies'\n], function ($, domReady, consoleLogger, formKeyInit) {\n    'use strict';\n\n    /**\n     * Helper. Generate random string\n     * TODO: Merge with mage/utils\n     * @param {String} chars - list of symbols\n     * @param {Number} length - length for need string\n     * @returns {String}\n     */\n    function generateRandomString(chars, length) {\n        var result = '';\n\n        length = length > 0 ? length : 1;\n\n        while (length--) {\n            result += chars[Math.round(Math.random() * (chars.length - 1))];\n        }\n\n        return result;\n    }\n\n    /**\n     * Nodes tree to flat list converter\n     * @returns {Array}\n     */\n    $.fn.comments = function () {\n        var elements = [],\n            contents,\n            elementContents;\n\n        /**\n         * @param {jQuery} element - Comment holder\n         */\n        (function lookup(element) {\n            var iframeHostName;\n\n            // prevent cross origin iframe content reading\n            if ($(element).prop('tagName') === 'IFRAME') {\n                iframeHostName = $('<a>').prop('href', $(element).prop('src'))\n                    .prop('hostname');\n\n                if (window.location.hostname !== iframeHostName) {\n                    return [];\n                }\n            }\n\n            /**\n             * Rewrite jQuery contents().\n             *\n             * @param {jQuery} elem\n             */\n            contents = function (elem) {\n                return $.map(elem, function (el) {\n                    try {\n                        return el.nodeName.toLowerCase() === 'iframe' ?\n                            el.contentDocument || (el.contentWindow ? el.contentWindow.document : []) :\n                            $.merge([], el.childNodes);\n                    } catch (e) {\n                        consoleLogger.error(e);\n\n                        return [];\n                    }\n                });\n            };\n\n            elementContents = contents($(element));\n\n            $.each(elementContents, function (index, el) {\n                switch (el.nodeType) {\n                    case 1: // ELEMENT_NODE\n                        lookup(el);\n                        break;\n\n                    case 8: // COMMENT_NODE\n                        elements.push(el);\n                        break;\n\n                    case 9: // DOCUMENT_NODE\n                        lookup($(el).find('body'));\n                        break;\n                }\n            });\n        })(this);\n\n        return elements;\n    };\n\n    /**\n     * FormKey Widget - this widget is generating from key, saves it to cookie and\n     * @deprecated see Magento/PageCache/view/frontend/web/js/form-key-provider.js\n     */\n    $.widget('mage.formKey', {\n        options: {\n            inputSelector: 'input[name=\"form_key\"]',\n            allowedCharacters: '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',\n            length: 16\n        },\n\n        /**\n         * Creates widget 'mage.formKey'\n         * @private\n         */\n        _create: function () {\n            var formKey = $.mage.cookies.get('form_key'),\n                options = {\n                    secure: window.cookiesConfig ? window.cookiesConfig.secure : false\n                };\n\n            if (!formKey) {\n                formKey = generateRandomString(this.options.allowedCharacters, this.options.length);\n                $.mage.cookies.set('form_key', formKey, options);\n            }\n            $(this.options.inputSelector).val(formKey);\n        }\n    });\n\n    /**\n     * PageCache Widget\n     * Handles additional ajax request for rendering user private content.\n     */\n    $.widget('mage.pageCache', {\n        options: {\n            url: '/',\n            patternPlaceholderOpen: /^ BLOCK (.+) $/,\n            patternPlaceholderClose: /^ \\/BLOCK (.+) $/,\n            versionCookieName: 'private_content_version',\n            handles: []\n        },\n\n        /**\n         * Creates widget 'mage.pageCache'\n         * @private\n         */\n        _create: function () {\n            var placeholders,\n                version = $.mage.cookies.get(this.options.versionCookieName);\n\n            if (!version) {\n                return;\n            }\n            placeholders = this._searchPlaceholders(this.element.comments());\n\n            if (placeholders && placeholders.length) {\n                this._ajax(placeholders, version);\n            }\n        },\n\n        /**\n         * Parse page for placeholders.\n         * @param {Array} elements\n         * @returns {Array}\n         * @private\n         */\n        _searchPlaceholders: function (elements) {\n            var placeholders = [],\n                tmp = {},\n                ii,\n                len,\n                el, matches, name;\n\n            if (!(elements && elements.length)) {\n                return placeholders;\n            }\n\n            for (ii = 0, len = elements.length; ii < len; ii++) {\n                el = elements[ii];\n                matches = this.options.patternPlaceholderOpen.exec(el.nodeValue);\n                name = null;\n\n                if (matches) {\n                    name = matches[1];\n                    tmp[name] = {\n                        name: name,\n                        openElement: el\n                    };\n                } else {\n                    matches = this.options.patternPlaceholderClose.exec(el.nodeValue);\n\n                    if (matches) { //eslint-disable-line max-depth\n                        name = matches[1];\n\n                        if (tmp[name]) { //eslint-disable-line max-depth\n                            tmp[name].closeElement = el;\n                            placeholders.push(tmp[name]);\n                            delete tmp[name];\n                        }\n                    }\n                }\n            }\n\n            return placeholders;\n        },\n\n        /**\n         * Parse for page and replace placeholders\n         * @param {Object} placeholder\n         * @param {Object} html\n         * @protected\n         */\n        _replacePlaceholder: function (placeholder, html) {\n            var startReplacing = false,\n                prevSibling = null,\n                parent, contents, yy, len, element;\n\n            if (!placeholder || !html) {\n                return;\n            }\n\n            parent = $(placeholder.openElement).parent();\n            contents = parent.contents();\n\n            for (yy = 0, len = contents.length; yy < len; yy++) {\n                element = contents[yy];\n\n                if (element == placeholder.openElement) { //eslint-disable-line eqeqeq\n                    startReplacing = true;\n                }\n\n                if (startReplacing) {\n                    $(element).remove();\n                } else if (element.nodeType != 8) { //eslint-disable-line eqeqeq\n                    //due to comment tag doesn't have siblings we try to find it manually\n                    prevSibling = element;\n                }\n\n                if (element == placeholder.closeElement) { //eslint-disable-line eqeqeq\n                    break;\n                }\n            }\n\n            if (prevSibling) {\n                $(prevSibling).after(html);\n            } else {\n                $(parent).prepend(html);\n            }\n\n            // trigger event to use mage-data-init attribute\n            $(parent).trigger('contentUpdated');\n        },\n\n        /**\n         * AJAX helper\n         * @param {Object} placeholders\n         * @param {String} version\n         * @private\n         */\n        _ajax: function (placeholders, version) {\n            var ii,\n                data = {\n                    blocks: [],\n                    handles: this.options.handles,\n                    originalRequest: this.options.originalRequest,\n                    version: version\n                };\n\n            for (ii = 0; ii < placeholders.length; ii++) {\n                data.blocks.push(placeholders[ii].name);\n            }\n            data.blocks = JSON.stringify(data.blocks.sort());\n            data.handles = JSON.stringify(data.handles);\n            data.originalRequest = JSON.stringify(data.originalRequest);\n            $.ajax({\n                url: this.options.url,\n                data: data,\n                type: 'GET',\n                cache: true,\n                dataType: 'json',\n                context: this,\n\n                /**\n                 * Response handler\n                 * @param {Object} response\n                 */\n                success: function (response) {\n                    var placeholder, i;\n\n                    for (i = 0; i < placeholders.length; i++) {\n                        placeholder = placeholders[i];\n\n                        if (response.hasOwnProperty(placeholder.name)) {\n                            this._replacePlaceholder(placeholder, response[placeholder.name]);\n                        }\n                    }\n                }\n            });\n        }\n    });\n\n    domReady(function () {\n        formKeyInit();\n    });\n\n    return {\n        'pageCache': $.mage.pageCache,\n        'formKey': $.mage.formKey\n    };\n});\n","Magento_ConfigurableProduct/js/catalog-add-to-cart-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'underscore',\n    'jquery',\n    'Magento_ConfigurableProduct/js/product/view/product-info-resolver'\n], function (_, $, productInfoResolver) {\n    'use strict';\n\n    return function (widget) {\n\n        $.widget('mage.catalogAddToCart', widget, {\n            /**\n             * @param {jQuery} form\n             */\n            ajaxSubmit: function (form) {\n                var isConfigurable = !!_.find(form.serializeArray(), function (item) {\n                    return item.name.indexOf('super_attribute') !== -1;\n                });\n\n                if (isConfigurable) {\n                    this.options.productInfoResolver = productInfoResolver;\n                }\n\n                return this._super(form);\n            }\n        });\n\n        return $.mage.catalogAddToCart;\n    };\n});\n","Magento_ConfigurableProduct/js/catalog-add-to-cart.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\nrequire([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * Add selected configurable attributes to redirect url\n     *\n     * @see Magento_Catalog/js/catalog-add-to-cart\n     */\n    $('body').on('catalogCategoryAddToCartRedirect', function (event, data) {\n        $(data.form).find('select[name*=\"super\"]').each(function (index, item) {\n            data.redirectParameters.push(item.config.id + '=' + $(item).val());\n        });\n    });\n});\n","Magento_ConfigurableProduct/js/configurable-customer-data.js":"require([\n    'jquery',\n    'Magento_ConfigurableProduct/js/options-updater'\n], function ($, Updater) {\n    'use strict';\n\n    var selectors = {\n            formSelector: '#product_addtocart_form'\n        },\n        configurableWidgetName = 'mageConfigurable',\n        widgetInitEvent = 'configurable.initialized',\n\n    /**\n    * Sets all configurable attribute's selected values\n    */\n    updateConfigurableOptions = function () {\n        var configurableWidget = $(selectors.formSelector).data(configurableWidgetName);\n\n        if (!configurableWidget) {\n            return;\n        }\n        configurableWidget.options.values = this.productOptions || {};\n        configurableWidget._configureForValues();\n    },\n    updater = new Updater(widgetInitEvent, updateConfigurableOptions);\n\n    updater.listen();\n});\n","Magento_ConfigurableProduct/js/configurable.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'underscore',\n    'mage/template',\n    'mage/translate',\n    'priceUtils',\n    'priceBox',\n    'jquery-ui-modules/widget',\n    'jquery/jquery.parsequery',\n    'fotoramaVideoEvents'\n], function ($, _, mageTemplate, $t, priceUtils) {\n    'use strict';\n\n    $.widget('mage.configurable', {\n        options: {\n            superSelector: '.super-attribute-select',\n            selectSimpleProduct: '[name=\"selected_configurable_option\"]',\n            priceHolderSelector: '.price-box',\n            spConfig: {},\n            state: {},\n            priceFormat: {},\n            optionTemplate: '<%- data.label %>' +\n            '<% if (typeof data.finalPrice.value !== \"undefined\") { %>' +\n            ' <%- data.finalPrice.formatted %>' +\n            '<% } %>',\n            mediaGallerySelector: '[data-gallery-role=gallery-placeholder]',\n            mediaGalleryInitial: null,\n            slyOldPriceSelector: '.sly-old-price',\n            normalPriceLabelSelector: '.product-info-main .normal-price .price-label',\n\n            /**\n             * Defines the mechanism of how images of a gallery should be\n             * updated when user switches between configurations of a product.\n             *\n             * As for now value of this option can be either 'replace' or 'prepend'.\n             *\n             * @type {String}\n             */\n            gallerySwitchStrategy: 'replace',\n            tierPriceTemplateSelector: '#tier-prices-template',\n            tierPriceBlockSelector: '[data-role=\"tier-price-block\"]',\n            tierPriceTemplate: '',\n            selectorProduct: '.product-info-main',\n            selectorProductPrice: '[data-role=priceBox]',\n            qtyInfo: '#qty'\n        },\n\n        /**\n         * Creates widget\n         * @private\n         */\n        _create: function () {\n            // Initial setting of various option values\n            this._initializeOptions();\n\n            // Override defaults with URL query parameters and/or inputs values\n            this._overrideDefaults();\n\n            // Change events to check select reloads\n            this._setupChangeEvents();\n\n            // Fill state\n            this._fillState();\n\n            // Setup child and prev/next settings\n            this._setChildSettings();\n\n            // Setup/configure values to inputs\n            this._configureForValues();\n\n            $(this.element).trigger('configurable.initialized');\n            $(this.options.qtyInfo).on('input', this._reloadPrice.bind(this));\n        },\n\n        /**\n         * Initialize tax configuration, initial settings, and options values.\n         * @private\n         */\n        _initializeOptions: function () {\n            var options = this.options,\n                gallery = $(options.mediaGallerySelector),\n                priceBoxOptions = $(this.options.priceHolderSelector).priceBox('option').priceConfig || null;\n\n            if (priceBoxOptions && priceBoxOptions.optionTemplate) {\n                options.optionTemplate = priceBoxOptions.optionTemplate;\n            }\n\n            if (priceBoxOptions && priceBoxOptions.priceFormat) {\n                options.priceFormat = priceBoxOptions.priceFormat;\n            }\n            options.optionTemplate = mageTemplate(options.optionTemplate);\n            options.tierPriceTemplate = $(this.options.tierPriceTemplateSelector).html();\n\n            options.settings = options.spConfig.containerId ?\n                $(options.spConfig.containerId).find(options.superSelector) :\n                $(options.superSelector);\n\n            options.values = options.spConfig.defaultValues || {};\n            options.parentImage = $('[data-role=base-image-container] img').attr('src');\n\n            this.inputSimpleProduct = this.element.find(options.selectSimpleProduct);\n\n            gallery.data('gallery') ?\n                this._onGalleryLoaded(gallery) :\n                gallery.on('gallery:loaded', this._onGalleryLoaded.bind(this, gallery));\n\n        },\n\n        /**\n         * Override default options values settings with either URL query parameters or\n         * initialized inputs values.\n         * @private\n         */\n        _overrideDefaults: function () {\n            var hashIndex = window.location.href.indexOf('#');\n\n            if (hashIndex !== -1) {\n                this._parseQueryParams(window.location.href.substr(hashIndex + 1));\n            }\n\n            if (this.options.spConfig.inputsInitialized) {\n                this._setValuesByAttribute();\n            }\n\n            this._setInitialOptionsLabels();\n        },\n\n        /**\n         * Parse query parameters from a query string and set options values based on the\n         * key value pairs of the parameters.\n         * @param {*} queryString - URL query string containing query parameters.\n         * @private\n         */\n        _parseQueryParams: function (queryString) {\n            var queryParams = $.parseQuery({\n                query: queryString\n            });\n\n            $.each(queryParams, $.proxy(function (key, value) {\n                if (this.options.spConfig.attributes[key] !== undefined &&\n                    _.find(this.options.spConfig.attributes[key].options, function (element) {\n                        return element.id === value;\n                    })) {\n                    this.options.values[key] = value;\n                }\n            }, this));\n        },\n\n        /**\n         * Override default options values with values based on each element's attribute\n         * identifier.\n         * @private\n         */\n        _setValuesByAttribute: function () {\n            this.options.values = {};\n            $.each(this.options.settings, $.proxy(function (index, element) {\n                var attributeId;\n\n                if (element.value) {\n                    attributeId = element.id.replace(/[a-z]*/, '');\n\n                    if (this.options.spConfig.attributes[attributeId] !== undefined &&\n                        _.find(this.options.spConfig.attributes[attributeId].options, function (optionElement) {\n                            return optionElement.id === element.value;\n                        })) {\n                        this.options.values[attributeId] = element.value;\n                    }\n                }\n            }, this));\n        },\n\n        /**\n         * Set additional field with initial label to be used when switching between options with different prices.\n         * @private\n         */\n        _setInitialOptionsLabels: function () {\n            $.each(this.options.spConfig.attributes, $.proxy(function (index, element) {\n                $.each(element.options, $.proxy(function (optIndex, optElement) {\n                    this.options.spConfig.attributes[index].options[optIndex].initialLabel = optElement.label;\n                }, this));\n            }, this));\n        },\n\n        /**\n         * Set up .on('change') events for each option element to configure the option.\n         * @private\n         */\n        _setupChangeEvents: function () {\n            $.each(this.options.settings, $.proxy(function (index, element) {\n                $(element).on('change', this, this._configure);\n            }, this));\n        },\n\n        /**\n         * Iterate through the option settings and set each option's element configuration,\n         * attribute identifier. Set the state based on the attribute identifier.\n         * @private\n         */\n        _fillState: function () {\n            $.each(this.options.settings, $.proxy(function (index, element) {\n                var attributeId = element.id.replace(/[a-z]*/, '');\n\n                if (attributeId && this.options.spConfig.attributes[attributeId]) {\n                    element.config = this.options.spConfig.attributes[attributeId];\n                    element.attributeId = attributeId;\n                    this.options.state[attributeId] = false;\n                }\n            }, this));\n        },\n\n        /**\n         * Set each option's child settings, and next/prev option setting. Fill (initialize)\n         * an option's list of selections as needed or disable an option's setting.\n         * @private\n         */\n        _setChildSettings: function () {\n            var childSettings = [],\n                settings = this.options.settings,\n                index = settings.length,\n                option;\n\n            while (index--) {\n                option = settings[index];\n\n                if (index) {\n                    option.disabled = true;\n                } else {\n                    this._fillSelect(option);\n                }\n\n                _.extend(option, {\n                    childSettings: childSettings.slice(),\n                    prevSetting: settings[index - 1],\n                    nextSetting: settings[index + 1]\n                });\n\n                childSettings.push(option);\n            }\n        },\n\n        /**\n         * Setup for all configurable option settings. Set the value of the option and configure\n         * the option, which sets its state, and initializes the option's choices, etc.\n         * @private\n         */\n        _configureForValues: function () {\n            if (this.options.values) {\n                this.options.settings.each($.proxy(function (index, element) {\n                    var attributeId = element.attributeId;\n\n                    element.value = this.options.values[attributeId] || '';\n                    this._configureElement(element);\n                }, this));\n            }\n        },\n\n        /**\n         * Event handler for configuring an option.\n         * @private\n         * @param {Object} event - Event triggered to configure an option.\n         */\n        _configure: function (event) {\n            event.data._configureElement(this);\n        },\n\n        /**\n         * Configure an option, initializing it's state and enabling related options, which\n         * populates the related option's selection and resets child option selections.\n         * @private\n         * @param {*} element - The element associated with a configurable option.\n         */\n        _configureElement: function (element) {\n            this.simpleProduct = this._getSimpleProductId(element);\n\n            if (element.value) {\n                this.options.state[element.config.id] = element.value;\n\n                if (element.nextSetting) {\n                    element.nextSetting.disabled = false;\n                    this._fillSelect(element.nextSetting);\n                    this._resetChildren(element.nextSetting);\n                } else {\n                    if (!!document.documentMode) { //eslint-disable-line\n                        this.inputSimpleProduct.val(element.options[element.selectedIndex].config.allowedProducts[0]);\n                    } else {\n                        this.inputSimpleProduct.val(element.selectedOptions[0].config.allowedProducts[0]);\n                    }\n                }\n            } else {\n                this._resetChildren(element);\n            }\n\n            this._reloadPrice();\n            this._displayRegularPriceBlock(this.simpleProduct);\n            this._displayTierPriceBlock(this.simpleProduct);\n            this._displayNormalPriceLabel();\n            this._changeProductImage();\n        },\n\n        /**\n         * Change displayed product image according to chosen options of configurable product\n         *\n         * @private\n         */\n        _changeProductImage: function () {\n            var images,\n                initialImages = this.options.mediaGalleryInitial,\n                gallery = $(this.options.mediaGallerySelector).data('gallery');\n\n            if (_.isUndefined(gallery)) {\n                $(this.options.mediaGallerySelector).on('gallery:loaded', function () {\n                    this._changeProductImage();\n                }.bind(this));\n\n                return;\n            }\n\n            images = this.options.spConfig.images[this.simpleProduct];\n\n            if (images) {\n                images = this._sortImages(images);\n\n                if (this.options.gallerySwitchStrategy === 'prepend') {\n                    images = images.concat(initialImages);\n                }\n\n                images = $.extend(true, [], images);\n                images = this._setImageIndex(images);\n\n                gallery.updateData(images);\n                this._addFotoramaVideoEvents(false);\n            } else {\n                gallery.updateData(initialImages);\n                this._addFotoramaVideoEvents(true);\n            }\n        },\n\n        /**\n         * Add video events\n         *\n         * @param {Boolean} isInitial\n         * @private\n         */\n        _addFotoramaVideoEvents: function (isInitial) {\n            if (_.isUndefined($.mage.AddFotoramaVideoEvents)) {\n                return;\n            }\n\n            if (isInitial) {\n                $(this.options.mediaGallerySelector).AddFotoramaVideoEvents();\n\n                return;\n            }\n\n            $(this.options.mediaGallerySelector).AddFotoramaVideoEvents({\n                selectedOption: this.simpleProduct,\n                dataMergeStrategy: this.options.gallerySwitchStrategy\n            });\n        },\n\n        /**\n         * Sorting images array\n         *\n         * @private\n         */\n        _sortImages: function (images) {\n            return _.sortBy(images, function (image) {\n                return image.position;\n            });\n        },\n\n        /**\n         * Set correct indexes for image set.\n         *\n         * @param {Array} images\n         * @private\n         */\n        _setImageIndex: function (images) {\n            var length = images.length,\n                i;\n\n            for (i = 0; length > i; i++) {\n                images[i].i = i + 1;\n            }\n\n            return images;\n        },\n\n        /**\n         * For a given option element, reset all of its selectable options. Clear any selected\n         * index, disable the option choice, and reset the option's state if necessary.\n         * @private\n         * @param {*} element - The element associated with a configurable option.\n         */\n        _resetChildren: function (element) {\n            if (element.childSettings) {\n                _.each(element.childSettings, function (set) {\n                    set.selectedIndex = 0;\n                    set.disabled = true;\n                });\n\n                if (element.config) {\n                    this.options.state[element.config.id] = false;\n                }\n            }\n        },\n\n        /**\n         * Populates an option's selectable choices.\n         * @private\n         * @param {*} element - Element associated with a configurable option.\n         */\n        _fillSelect: function (element) {\n            var attributeId = element.id.replace(/[a-z]*/, ''),\n                options = this._getAttributeOptions(attributeId),\n                prevConfig,\n                index = 1,\n                allowedProducts,\n                allowedProductsByOption,\n                allowedProductsAll,\n                i,\n                j,\n                finalPrice = parseFloat(this.options.spConfig.prices.finalPrice.amount),\n                optionFinalPrice,\n                optionPriceDiff,\n                optionPrices = this.options.spConfig.optionPrices,\n                allowedOptions = [],\n                indexKey,\n                allowedProductMinPrice,\n                allowedProductsAllMinPrice,\n                canDisplayOutOfStockProducts = false,\n                filteredSalableProducts;\n\n            this._clearSelect(element);\n            element.options[0] = new Option('', '');\n            element.options[0].innerHTML = this.options.spConfig.chooseText;\n            prevConfig = false;\n\n            if (element.prevSetting) {\n                prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];\n            }\n\n            if (options) {\n                for (indexKey in this.options.spConfig.index) {\n                    /* eslint-disable max-depth */\n                    if (this.options.spConfig.index.hasOwnProperty(indexKey)) {\n                        allowedOptions = allowedOptions.concat(_.values(this.options.spConfig.index[indexKey]));\n                    }\n                }\n\n                if (prevConfig) {\n                    allowedProductsByOption = {};\n                    allowedProductsAll = [];\n\n                    for (i = 0; i < options.length; i++) {\n                        /* eslint-disable max-depth */\n                        for (j = 0; j < options[i].products.length; j++) {\n                            // prevConfig.config can be undefined\n                            if (prevConfig.config &&\n                                prevConfig.config.allowedProducts &&\n                                prevConfig.config.allowedProducts.indexOf(options[i].products[j]) > -1) {\n                                if (!allowedProductsByOption[i]) {\n                                    allowedProductsByOption[i] = [];\n                                }\n                                allowedProductsByOption[i].push(options[i].products[j]);\n                                allowedProductsAll.push(options[i].products[j]);\n                            }\n                        }\n                    }\n\n                    if (typeof allowedProductsAll[0] !== 'undefined' &&\n                        typeof optionPrices[allowedProductsAll[0]] !== 'undefined') {\n                        allowedProductsAllMinPrice = this._getAllowedProductWithMinPrice(allowedProductsAll);\n                        finalPrice = parseFloat(optionPrices[allowedProductsAllMinPrice].finalPrice.amount);\n                    }\n                }\n\n                for (i = 0; i < options.length; i++) {\n                    if (prevConfig && typeof allowedProductsByOption[i] === 'undefined') {\n                        continue; //jscs:ignore disallowKeywords\n                    }\n\n                    allowedProducts = prevConfig ? allowedProductsByOption[i] : options[i].products.slice(0);\n                    optionPriceDiff = 0;\n\n                    if (typeof allowedProducts[0] !== 'undefined' &&\n                        typeof optionPrices[allowedProducts[0]] !== 'undefined') {\n                        allowedProductMinPrice = this._getAllowedProductWithMinPrice(allowedProducts);\n                        optionFinalPrice = parseFloat(optionPrices[allowedProductMinPrice].finalPrice.amount);\n                        optionPriceDiff = optionFinalPrice - finalPrice;\n                        options[i].label = options[i].initialLabel;\n\n                        if (optionPriceDiff !== 0) {\n                            options[i].label += ' ' + priceUtils.formatPriceLocale(\n                                optionPriceDiff,\n                                this.options.priceFormat,\n                                true\n                            );\n                        }\n                    }\n\n                    if (allowedProducts.length > 0 || _.include(allowedOptions, options[i].id)) {\n                        options[i].allowedProducts = allowedProducts;\n                        element.options[index] = new Option(this._getOptionLabel(options[i]), options[i].id);\n\n                        if (this.options.spConfig.canDisplayShowOutOfStockStatus) {\n                            filteredSalableProducts = $(this.options.spConfig.salable[attributeId][options[i].id]).\n                            filter(options[i].allowedProducts);\n                            canDisplayOutOfStockProducts = filteredSalableProducts.length === 0;\n                        }\n\n                        if (typeof options[i].price !== 'undefined') {\n                            element.options[index].setAttribute('price', options[i].price);\n                        }\n\n                        if (allowedProducts.length === 0 || canDisplayOutOfStockProducts) {\n                            element.options[index].disabled = true;\n                        }\n\n                        element.options[index].config = options[i];\n                        index++;\n                    }\n\n                    /* eslint-enable max-depth */\n                }\n            }\n        },\n\n        /**\n         * Generate the label associated with a configurable option. This includes the option's\n         * label or value and the option's price.\n         * @private\n         * @param {*} option - A single choice among a group of choices for a configurable option.\n         * @return {String} The option label with option value and price (e.g. Black +1.99)\n         */\n        _getOptionLabel: function (option) {\n            return option.label;\n        },\n\n        /**\n         * Removes an option's selections.\n         * @private\n         * @param {*} element - The element associated with a configurable option.\n         */\n        _clearSelect: function (element) {\n            var i;\n\n            for (i = element.options.length - 1; i >= 0; i--) {\n                element.remove(i);\n            }\n        },\n\n        /**\n         * Retrieve the attribute options associated with a specific attribute Id.\n         * @private\n         * @param {Number} attributeId - The id of the attribute whose configurable options are sought.\n         * @return {Object} Object containing the attribute options.\n         */\n        _getAttributeOptions: function (attributeId) {\n            if (this.options.spConfig.attributes[attributeId]) {\n                return this.options.spConfig.attributes[attributeId].options;\n            }\n        },\n\n        /**\n         * Reload the price of the configurable product incorporating the prices of all of the\n         * configurable product's option selections.\n         */\n        _reloadPrice: function () {\n            $(this.options.priceHolderSelector).trigger('updatePrice', this._getPrices());\n        },\n\n        /**\n         * Get product various prices\n         * @returns {{}}\n         * @private\n         */\n        _getPrices: function () {\n            var prices = {},\n                elements = _.toArray(this.options.settings),\n                allowedProduct;\n\n            _.each(elements, function (element) {\n                var selected = element.options[element.selectedIndex],\n                    config = selected && selected.config,\n                    priceValue = this._calculatePrice({});\n\n                if (config && config.allowedProducts.length === 1) {\n                    priceValue = this._calculatePrice(config);\n                } else if (element.value) {\n                    allowedProduct = this._getAllowedProductWithMinPrice(config.allowedProducts);\n                    priceValue = this._calculatePrice({\n                        'allowedProducts': [\n                            allowedProduct\n                        ]\n                    });\n                }\n\n                if (!_.isEmpty(priceValue)) {\n                    prices.prices = priceValue;\n                }\n            }, this);\n\n            return prices;\n        },\n\n        /**\n         * Get product with minimum price from selected options.\n         *\n         * @param {Array} allowedProducts\n         * @returns {String}\n         * @private\n         */\n        _getAllowedProductWithMinPrice: function (allowedProducts) {\n            var optionPrices = this.options.spConfig.optionPrices,\n                product = {},\n                optionMinPrice, optionFinalPrice;\n\n            _.each(allowedProducts, function (allowedProduct) {\n                optionFinalPrice = parseFloat(optionPrices[allowedProduct].finalPrice.amount);\n\n                if (_.isEmpty(product) || optionFinalPrice < optionMinPrice) {\n                    optionMinPrice = optionFinalPrice;\n                    product = allowedProduct;\n                }\n            }, this);\n\n            return product;\n        },\n\n        /**\n         * Returns prices for configured products\n         *\n         * @param {*} config - Products configuration\n         * @returns {*}\n         * @private\n         */\n        _calculatePrice: function (config) {\n            var displayPrices = $(this.options.priceHolderSelector).priceBox('option').prices,\n                newPrices = this.options.spConfig.optionPrices[_.first(config.allowedProducts)] || {};\n\n            _.each(displayPrices, function (price, code) {\n                displayPrices[code].amount = newPrices[code] ? newPrices[code].amount - displayPrices[code].amount : 0;\n            });\n\n            return displayPrices;\n        },\n\n        /**\n         * Returns Simple product Id\n         *  depending on current selected option.\n         *\n         * @private\n         * @param {HTMLElement} element\n         * @returns {String|undefined}\n         */\n        _getSimpleProductId: function (element) {\n            // TODO: Rewrite algorithm. It should return ID of\n            //        simple product based on selected options.\n            var allOptions = element.config.options,\n                value = element.value,\n                config;\n\n            config = _.filter(allOptions, function (option) {\n                return option.id === value;\n            });\n            config = _.first(config);\n\n            return _.isEmpty(config) ?\n                undefined :\n                _.first(config.allowedProducts);\n\n        },\n\n        /**\n         * Show or hide regular price block\n         *\n         * @param {*} optionId\n         * @private\n         */\n        _displayRegularPriceBlock: function (optionId) {\n            var shouldBeShown = true,\n                $priceBox = this.element.parents(this.options.selectorProduct)\n                    .find(this.options.selectorProductPrice);\n\n            _.each(this.options.settings, function (element) {\n                if (element.value === '') {\n                    shouldBeShown = false;\n                }\n            });\n\n            if (shouldBeShown &&\n                this.options.spConfig.optionPrices[optionId].oldPrice.amount !==\n                this.options.spConfig.optionPrices[optionId].finalPrice.amount\n            ) {\n                $(this.options.slyOldPriceSelector).show();\n            } else {\n                $(this.options.slyOldPriceSelector).hide();\n            }\n\n            $(document).trigger('updateMsrpPriceBlock',\n                [\n                    optionId,\n                    this.options.spConfig.optionPrices,\n                    $priceBox\n                ]\n            );\n        },\n\n        /**\n         * Show or hide normal price label\n         *\n         * @private\n         */\n        _displayNormalPriceLabel: function () {\n            var shouldBeShown = false;\n\n            _.each(this.options.settings, function (element) {\n                if (element.value === '') {\n                    shouldBeShown = true;\n                }\n            });\n\n            if (shouldBeShown) {\n                $(this.options.normalPriceLabelSelector).show();\n            } else {\n                $(this.options.normalPriceLabelSelector).hide();\n            }\n        },\n\n        /**\n         * Callback which fired after gallery gets initialized.\n         *\n         * @param {HTMLElement} element - DOM element associated with gallery.\n         */\n        _onGalleryLoaded: function (element) {\n            var galleryObject = element.data('gallery');\n\n            this.options.mediaGalleryInitial = galleryObject.returnCurrentImages();\n        },\n\n        /**\n         * Show or hide tier price block\n         *\n         * @param {*} optionId\n         * @private\n         */\n        _displayTierPriceBlock: function (optionId) {\n            var tierPrices = typeof optionId != 'undefined' && this.options.spConfig.optionPrices[optionId].tierPrices;\n\n            if (_.isArray(tierPrices) && tierPrices.length > 0) {\n\n                if (this.options.tierPriceTemplate) {\n                    $(this.options.tierPriceBlockSelector).html(\n                        mageTemplate(this.options.tierPriceTemplate, {\n                            'tierPrices': tierPrices,\n                            '$t': $t,\n                            'currencyFormat': this.options.spConfig.currencyFormat,\n                            'priceUtils': priceUtils\n                        })\n                    ).show();\n                }\n            } else {\n                $(this.options.tierPriceBlockSelector).hide();\n            }\n        }\n    });\n\n    return $.mage.configurable;\n});\n","Magento_ConfigurableProduct/js/options-updater.js":"define([\n    'jquery',\n    'underscore',\n    'Magento_Customer/js/customer-data',\n    'domReady!'\n], function ($, _, customerData) {\n    'use strict';\n\n    var selectors = {\n        formSelector: '#product_addtocart_form',\n        productIdSelector: '#product_addtocart_form [name=\"product\"]',\n        itemIdSelector: '#product_addtocart_form [name=\"item\"]'\n    },\n    cartData = customerData.get('cart'),\n    productId = $(selectors.productIdSelector).val(),\n    itemId = $(selectors.itemIdSelector).val(),\n\n    /**\n    * set productOptions according to cart data from customer-data\n    *\n    * @param {Object} data - cart data from customer-data\n    * @returns {Boolean} - whether the new options differ from previous\n    */\n    setProductOptions = function (data) {\n        var changedProductOptions;\n\n        if (!(data && data.items && data.items.length && productId)) {\n            return false;\n        }\n        changedProductOptions = _.find(data.items, function (item) {\n            if (item['item_id'] === itemId) {\n                return item['product_id'] === productId;\n            }\n        });\n        changedProductOptions = changedProductOptions && changedProductOptions.options &&\n            changedProductOptions.options.reduce(function (obj, val) {\n                obj[val['option_id']] = val['option_value'];\n\n                return obj;\n            }, {});\n\n        if (JSON.stringify(this.productOptions || {}) === JSON.stringify(changedProductOptions || {})) {\n            return false;\n        }\n\n        this.productOptions = changedProductOptions;\n\n        return true;\n    },\n\n    /**\n    * Listens to update of cart data or options initialization and update selected option according to customer data\n    *\n    */\n    listen = function () {\n        cartData.subscribe(function (updateCartData) {\n            if (this.setProductOptions(updateCartData)) {\n                this.updateOptions();\n            }\n        }.bind(this));\n        $(selectors.formSelector).on(this.eventName, function () {\n            this.setProductOptions(cartData());\n            this.updateOptions();\n        }.bind(this));\n    },\n\n    /**\n    * Updater constructor function\n    *\n    */\n    Updater = function (eventName, updateOptionsCallback) {\n        if (this instanceof Updater) {\n            this.eventName = eventName;\n            this.updateOptions = updateOptionsCallback;\n            this.productOptions = {};\n        }\n    };\n\n    Updater.prototype.setProductOptions = setProductOptions;\n    Updater.prototype.listen = listen;\n\n    return Updater;\n});\n","Magento_ConfigurableProduct/js/product/view/product-info-resolver.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'underscore',\n    'Magento_Catalog/js/product/view/product-info'\n], function (_, productInfo) {\n    'use strict';\n\n    /**\n     * Returns info about configurable products in form.\n     *\n     * @param {jQuery} $form\n     * @return {Array}\n     */\n    return function ($form) {\n        var optionValues = [],\n            product = _.findWhere($form.serializeArray(), {\n                name: 'product'\n            }),\n            productId;\n\n        if (!_.isUndefined(product)) {\n            productId = product.value;\n            _.each($form.serializeArray(), function (item) {\n                if (item.name.indexOf('super_attribute') !== -1) {\n                    optionValues.push(item.value);\n                }\n            });\n            optionValues.sort();\n            productInfo().push(\n                {\n                    'id': productId,\n                    'optionValues': optionValues\n                }\n            );\n        }\n\n        return _.uniq(productInfo(), function (item) {\n            var optionValuesStr = item.optionValues ? item.optionValues.join() : '';\n\n            return item.id + optionValuesStr;\n        });\n    };\n});\n\n","Magento_CatalogSearch/js/search-terms-log.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mageUtils'\n], function ($, utils) {\n    'use strict';\n\n    return function (data) {\n        $.ajax({\n            method: 'GET',\n            url: data.url,\n            data: {\n                'q': utils.getUrlParameters(window.location.href).q\n            }\n        });\n    };\n});\n","Magento_Shipping/js/model/config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return function () {\n        return window.checkoutConfig.shippingPolicy;\n    };\n});\n","Magento_Shipping/js/view/checkout/shipping/shipping-policy.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Shipping/js/model/config'\n\n], function (Component, config) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Shipping/checkout/shipping/shipping-policy'\n        },\n        config: config()\n    });\n});\n","Magento_Search/js/form-mini.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'underscore',\n    'mage/template',\n    'matchMedia',\n    'jquery-ui-modules/widget',\n    'jquery-ui-modules/core',\n    'mage/translate'\n], function ($, _, mageTemplate, mediaCheck) {\n    'use strict';\n\n    /**\n     * Check whether the incoming string is not empty or if doesn't consist of spaces.\n     *\n     * @param {String} value - Value to check.\n     * @returns {Boolean}\n     */\n    function isEmpty(value) {\n        return value.length === 0 || value == null || /^\\s+$/.test(value);\n    }\n\n    $.widget('mage.quickSearch', {\n        options: {\n            autocomplete: 'off',\n            minSearchLength: 3,\n            responseFieldElements: 'ul li',\n            selectClass: 'selected',\n            template:\n                '<li class=\"<%- data.row_class %>\" id=\"qs-option-<%- data.index %>\" role=\"option\">' +\n                '<span class=\"qs-option-name\">' +\n                ' <%- data.title %>' +\n                '</span>' +\n                '<span aria-hidden=\"true\" class=\"amount\">' +\n                '<%- data.num_results %>' +\n                '</span>' +\n                '</li>',\n            submitBtn: 'button[type=\"submit\"]',\n            searchLabel: '[data-role=minisearch-label]',\n            isExpandable: null,\n            suggestionDelay: 300\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this.responseList = {\n                indexList: null,\n                selected: null\n            };\n            this.autoComplete = $(this.options.destinationSelector);\n            this.searchForm = $(this.options.formSelector);\n            this.submitBtn = this.searchForm.find(this.options.submitBtn)[0];\n            this.searchLabel = this.searchForm.find(this.options.searchLabel);\n            this.isExpandable = this.options.isExpandable;\n\n            _.bindAll(this, '_onKeyDown', '_onPropertyChange', '_onSubmit');\n\n            this.submitBtn.disabled = true;\n\n            this.element.attr('autocomplete', this.options.autocomplete);\n\n            mediaCheck({\n                media: '(max-width: 768px)',\n                entry: function () {\n                    this.isExpandable = true;\n                }.bind(this),\n                exit: function () {\n                    this.isExpandable = true;\n                }.bind(this)\n            });\n\n            this.searchLabel.on('click', function (e) {\n                // allow input to lose its' focus when clicking on label\n                if (this.isExpandable && this.isActive()) {\n                    e.preventDefault();\n                }\n            }.bind(this));\n\n            this.element.on('blur', $.proxy(function () {\n                if (!this.searchLabel.hasClass('active')) {\n                    return;\n                }\n\n                setTimeout($.proxy(function () {\n                    if (this.autoComplete.is(':hidden')) {\n                        this.setActiveState(false);\n                    } else {\n                        this.element.trigger('focus');\n                    }\n                    this.autoComplete.hide();\n                    this._updateAriaHasPopup(false);\n                }, this), 250);\n            }, this));\n\n            if (this.element.get(0) === document.activeElement) {\n                this.setActiveState(true);\n            }\n\n            this.element.on('focus', this.setActiveState.bind(this, true));\n            this.element.on('keydown', this._onKeyDown);\n            // Prevent spamming the server with requests by waiting till the user has stopped typing for period of time\n            this.element.on('input propertychange', _.debounce(this._onPropertyChange, this.options.suggestionDelay));\n\n            this.searchForm.on('submit', $.proxy(function (e) {\n                this._onSubmit(e);\n                this._updateAriaHasPopup(false);\n            }, this));\n        },\n\n        /**\n         * Checks if search field is active.\n         *\n         * @returns {Boolean}\n         */\n        isActive: function () {\n            return this.searchLabel.hasClass('active');\n        },\n\n        /**\n         * Sets state of the search field to provided value.\n         *\n         * @param {Boolean} isActive\n         */\n        setActiveState: function (isActive) {\n            var searchValue;\n\n            this.searchForm.toggleClass('active', isActive);\n            this.searchLabel.toggleClass('active', isActive);\n\n            if (this.isExpandable) {\n                this.element.attr('aria-expanded', isActive);\n                searchValue = this.element.val();\n                this.element.val('');\n                this.element.val(searchValue);\n            }\n        },\n\n        /**\n         * @private\n         * @return {Element} The first element in the suggestion list.\n         */\n        _getFirstVisibleElement: function () {\n            return this.responseList.indexList ? this.responseList.indexList.first() : false;\n        },\n\n        /**\n         * @private\n         * @return {Element} The last element in the suggestion list.\n         */\n        _getLastElement: function () {\n            return this.responseList.indexList ? this.responseList.indexList.last() : false;\n        },\n\n        /**\n         * @private\n         * @param {Boolean} show - Set attribute aria-haspopup to \"true/false\" for element.\n         */\n        _updateAriaHasPopup: function (show) {\n            if (show) {\n                this.element.attr('aria-haspopup', 'true');\n            } else {\n                this.element.attr('aria-haspopup', 'false');\n            }\n        },\n\n        /**\n         * Clears the item selected from the suggestion list and resets the suggestion list.\n         * @private\n         * @param {Boolean} all - Controls whether to clear the suggestion list.\n         */\n        _resetResponseList: function (all) {\n            this.responseList.selected = null;\n\n            if (all === true) {\n                this.responseList.indexList = null;\n            }\n        },\n\n        /**\n         * Executes when the search box is submitted. Sets the search input field to the\n         * value of the selected item.\n         * @private\n         * @param {Event} e - The submit event\n         */\n        _onSubmit: function (e) {\n            var value = this.element.val();\n\n            if (isEmpty(value)) {\n                e.preventDefault();\n            }\n\n            if (this.responseList.selected) {\n                this.element.val(this.responseList.selected.find('.qs-option-name').text());\n            }\n        },\n\n        /**\n         * Executes when keys are pressed in the search input field. Performs specific actions\n         * depending on which keys are pressed.\n         * @private\n         * @param {Event} e - The key down event\n         * @return {Boolean} Default return type for any unhandled keys\n         */\n        _onKeyDown: function (e) {\n            var keyCode = e.keyCode || e.which;\n\n            switch (keyCode) {\n                case $.ui.keyCode.HOME:\n                    if (this._getFirstVisibleElement()) {\n                        this._getFirstVisibleElement().addClass(this.options.selectClass);\n                        this.responseList.selected = this._getFirstVisibleElement();\n                    }\n                    break;\n\n                case $.ui.keyCode.END:\n                    if (this._getLastElement()) {\n                        this._getLastElement().addClass(this.options.selectClass);\n                        this.responseList.selected = this._getLastElement();\n                    }\n                    break;\n\n                case $.ui.keyCode.ESCAPE:\n                    this._resetResponseList(true);\n                    this.autoComplete.hide();\n                    break;\n\n                case $.ui.keyCode.ENTER:\n                    if (this.element.val().length >= parseInt(this.options.minSearchLength, 10)) {\n                        this.searchForm.trigger('submit');\n                        e.preventDefault();\n                    }\n                    break;\n\n                case $.ui.keyCode.DOWN:\n                    if (this.responseList.indexList) {\n                        if (!this.responseList.selected) {  //eslint-disable-line max-depth\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\n                            this.responseList.selected = this._getFirstVisibleElement();\n                        } else if (!this._getLastElement().hasClass(this.options.selectClass)) {\n                            this.responseList.selected = this.responseList.selected\n                                .removeClass(this.options.selectClass).next().addClass(this.options.selectClass);\n                        } else {\n                            this.responseList.selected.removeClass(this.options.selectClass);\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\n                            this.responseList.selected = this._getFirstVisibleElement();\n                        }\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\n                        this._updateAriaHasPopup(true);\n                        this.autoComplete.show();\n                    }\n                    break;\n\n                case $.ui.keyCode.UP:\n                    if (this.responseList.indexList !== null) {\n                        if (!this._getFirstVisibleElement().hasClass(this.options.selectClass)) {\n                            this.responseList.selected = this.responseList.selected\n                                .removeClass(this.options.selectClass).prev().addClass(this.options.selectClass);\n\n                        } else {\n                            this.responseList.selected.removeClass(this.options.selectClass);\n                            this._getLastElement().addClass(this.options.selectClass);\n                            this.responseList.selected = this._getLastElement();\n                        }\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\n                        this._updateAriaHasPopup(true);\n                        this.autoComplete.show();\n                    }\n                    break;\n                default:\n                    return true;\n            }\n        },\n\n        /**\n         * Executes when the value of the search input field changes. Executes a GET request\n         * to populate a suggestion list based on entered text. Handles click (select), hover,\n         * and mouseout events on the populated suggestion list dropdown.\n         * @private\n         */\n        _onPropertyChange: function () {\n            var searchField = this.element,\n                clonePosition = {\n                    position: 'absolute',\n                    // Removed to fix display issues\n                    // left: searchField.offset().left,\n                    // top: searchField.offset().top + searchField.outerHeight(),\n                    width: searchField.outerWidth()\n                },\n                source = this.options.template,\n                template = mageTemplate(source),\n                dropdown = $('<ul role=\"listbox\"></ul>'),\n                value = this.element.val();\n\n            this.submitBtn.disabled = true;\n\n            if (value.length >= parseInt(this.options.minSearchLength, 10)) {\n                this.submitBtn.disabled = false;\n\n                if (this.options.url !== '') { //eslint-disable-line eqeqeq\n                    $.getJSON(this.options.url, {\n                        q: value\n                    }, $.proxy(function (data) {\n                        if (data.length) {\n                            $.each(data, function (index, element) {\n                                var html;\n\n                                element.index = index;\n                                html = template({\n                                    data: element\n                                });\n                                dropdown.append(html);\n                            });\n\n                            this._resetResponseList(true);\n\n                            this.responseList.indexList = this.autoComplete.html(dropdown)\n                                .css(clonePosition)\n                                .show()\n                                .find(this.options.responseFieldElements + ':visible');\n\n                            this.element.removeAttr('aria-activedescendant');\n\n                            if (this.responseList.indexList.length) {\n                                this._updateAriaHasPopup(true);\n                            } else {\n                                this._updateAriaHasPopup(false);\n                            }\n\n                            this.responseList.indexList\n                                .on('click', function (e) {\n                                    this.responseList.selected = $(e.currentTarget);\n                                    this.searchForm.trigger('submit');\n                                }.bind(this))\n                                .on('mouseenter mouseleave', function (e) {\n                                    this.responseList.indexList.removeClass(this.options.selectClass);\n                                    $(e.target).addClass(this.options.selectClass);\n                                    this.responseList.selected = $(e.target);\n                                    this.element.attr('aria-activedescendant', $(e.target).attr('id'));\n                                }.bind(this))\n                                .on('mouseout', function (e) {\n                                    if (!this._getLastElement() &&\n                                        this._getLastElement().hasClass(this.options.selectClass)) {\n                                        $(e.target).removeClass(this.options.selectClass);\n                                        this._resetResponseList(false);\n                                    }\n                                }.bind(this));\n                        } else {\n                            this._resetResponseList(true);\n                            this.autoComplete.hide();\n                            this._updateAriaHasPopup(false);\n                            this.element.removeAttr('aria-activedescendant');\n                        }\n                    }, this));\n                }\n            } else {\n                this._resetResponseList(true);\n                this.autoComplete.hide();\n                this._updateAriaHasPopup(false);\n                this.element.removeAttr('aria-activedescendant');\n            }\n        }\n    });\n\n    return $.mage.quickSearch;\n});\n","Magento_Vault/js/customer_account/deleteWidget.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/modalToggle',\n    'mage/translate'\n], function ($, modalToggle) {\n    'use strict';\n\n    return function (config, deleteButton) {\n        config.buttons = [\n            {\n                text: $.mage.__('Cancel'),\n                class: 'action secondary cancel'\n            }, {\n                text: $.mage.__('Delete'),\n                class: 'action primary',\n\n                /**\n                 * Default action on button click\n                 */\n                click: function (event) { //eslint-disable-line no-unused-vars\n                    $(deleteButton.form).trigger('submit');\n                }\n            }\n        ];\n\n        modalToggle(config, deleteButton);\n    };\n});\n","Magento_Vault/js/view/payment/vault-enabler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\n/* @api */\ndefine(\n    [\n        'uiElement'\n    ],\n    function (\n        Component\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                isActivePaymentTokenEnabler: true\n            },\n\n            /**\n             * @param {String} paymentCode\n             */\n            setPaymentCode: function (paymentCode) {\n                this.paymentCode = paymentCode;\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initObservable: function () {\n                this._super()\n                    .observe([\n                        'isActivePaymentTokenEnabler'\n                    ]);\n\n                return this;\n            },\n\n            /**\n             * @param {Object} data\n             */\n            visitAdditionalData: function (data) {\n                if (!this.isVaultEnabled()) {\n                    return;\n                }\n\n                if (!('additional_data' in data)) {\n                    data['additional_data'] = {};\n                }\n\n                data['additional_data']['is_active_payment_token_enabler'] = this.isActivePaymentTokenEnabler();\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            isVaultEnabled: function () {\n                return typeof window.checkoutConfig.vault[this.paymentCode] !== 'undefined' &&\n                    window.checkoutConfig.vault[this.paymentCode]['is_enabled'] === true;\n            }\n        });\n    }\n);\n","Magento_Vault/js/view/payment/vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\n/* @api */\ndefine([\n    'underscore',\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/renderer-list',\n    'uiLayout',\n    'uiRegistry'\n], function (_, Component, rendererList, layout, registry) {\n    'use strict';\n\n    var vaultGroupName = 'vaultGroup';\n\n    layout([{\n        name: vaultGroupName,\n        component: 'Magento_Checkout/js/model/payment/method-group',\n        alias: 'vault',\n        sortOrder: 10\n    }]);\n\n    registry.get(vaultGroupName, function (vaultGroup) {\n        _.each(window.checkoutConfig.payment.vault, function (config, index) {\n            rendererList.push(\n                {\n                    type: index,\n                    config: config.config,\n                    component: config.component,\n                    group: vaultGroup,\n\n                    /**\n                     * Custom payment method types comparator\n                     * @param {String} typeA\n                     * @param {String} typeB\n                     * @return {Boolean}\n                     */\n                    typeComparatorCallback: function (typeA, typeB) {\n                        // vault token items have the same name as vault payment without index\n                        return typeA.substring(0, typeA.lastIndexOf('_')) === typeB;\n                    }\n                }\n            );\n        });\n    });\n\n    /**\n     * Add view logic here if needed\n     */\n    return Component.extend({});\n});\n","Magento_Vault/js/view/payment/method-renderer/vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n\ndefine(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'Magento_Checkout/js/action/select-payment-method',\n        'Magento_Checkout/js/checkout-data'\n    ],\n    function (Component, selectPaymentMethod, checkoutData) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Magento_Vault/payment/form'\n            },\n\n            /**\n             * @returns {exports.initObservable}\n             */\n            initObservable: function () {\n                this._super()\n                    .observe([]);\n\n                return this;\n            },\n\n            /**\n             * @returns\n             */\n            selectPaymentMethod: function () {\n                selectPaymentMethod(\n                    {\n                        method: this.getId()\n                    }\n                );\n                checkoutData.setSelectedPaymentMethod(this.getId());\n\n                return true;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getTitle: function () {\n                return '';\n            },\n\n            /**\n             * @returns {String}\n             */\n            getToken: function () {\n                return '';\n            },\n\n            /**\n             * @returns {String}\n             */\n            getId: function () {\n                return this.index;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getCode: function () {\n                return this.code;\n            },\n\n            /**\n             * Get last 4 digits of card\n             * @returns {String}\n             */\n            getMaskedCard: function () {\n                return '';\n            },\n\n            /**\n             * Get expiration date\n             * @returns {String}\n             */\n            getExpirationDate: function () {\n                return '';\n            },\n\n            /**\n             * Get card type\n             * @returns {String}\n             */\n            getCardType: function () {\n                return '';\n            },\n\n            /**\n             * @param {String} type\n             * @returns {Boolean}\n             */\n            getIcons: function (type) {\n                return window.checkoutConfig.payment.ccform.icons.hasOwnProperty(type) ?\n                    window.checkoutConfig.payment.ccform.icons[type]\n                    : false;\n            },\n\n            /**\n             * Return state of place order button.\n             *\n             * @return {Boolean}\n             */\n            isButtonActive: function () {\n                return this.isActive() && this.isPlaceOrderActionAllowed();\n            },\n\n            /**\n             * Check if payment is active.\n             *\n             * @return {Boolean}\n             */\n            isActive: function () {\n                return this.isChecked() === this.getId();\n            },\n\n            /**\n             * @returns {*}\n             */\n            getData: function () {\n                var data = {\n                    method: this.getCode()\n                };\n\n                data['additional_data'] = {};\n                data['additional_data']['public_hash'] = this.getToken();\n\n                return data;\n            }\n        });\n    }\n);\n","Magento_GiftMessage/js/gift-options.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.giftOptions', {\n        options: {\n            mageError: 'mage-error',\n            noDisplay: 'no-display',\n            requiredEntry: 'required-entry'\n        },\n\n        /**\n         * Initial toggle of the various gift options after widget instantiation.\n         * @private\n         */\n        _init: function () {\n            this._toggleVisibility();\n        },\n\n        /**\n         * Bind a click handler to the widget's context element.\n         * @private\n         */\n        _create: function () {\n            this.element.on('click', $.proxy(this._toggleVisibility, this));\n            $(this.element.data('selector').id).find('.giftmessage-area')\n                .on('change', $.proxy(this._toggleRequired, this));\n        },\n\n        /**\n         * Toggle the visibility of the widget's context element's selector(s).\n         * @private\n         * @param {jQuery.Event} event - Click event. Target is a checkbox.\n         */\n        _toggleVisibility: function (event) {\n            var checkbox = event ? $(event.target) : this.element,\n                container = $(checkbox.data('selector').id),\n                _this;\n\n            if (checkbox.is(':checked')) {\n                container.show()\n                    .find('.giftmessage-area:not(:visible)').each(function (x, element) {\n                        if ($(element).val().length > 0) {\n                            $(element).trigger('change');\n                            container.find('a').trigger('click');\n                        }\n                    });\n            } else {\n                _this = this;\n                container.hide()\n                    .find('.input-text:not(.giftmessage-area)').each(function (x, element) {\n                        $(element).val(element.defaultValue).removeClass(_this.options.mageError)\n                            .next('div.' + _this.options.mageError).remove();\n                    }).end()\n                    .find('.giftmessage-area').val('').change().end()\n                    .find('.select').val('').change().end()\n                    .find('.checkbox:checked').prop('checked', false).trigger('click').prop('checked', false).end()\n                    .find('.price-box').addClass(this.options.noDisplay).end();\n            }\n        },\n\n        /**\n         * Make the From and To input fields required if a gift message has been written.\n         * @private\n         * @param {jQuery.Event} event - Change event. Target is a textarea.\n         */\n        _toggleRequired: function (event) {\n            var textArea = $(event.target),\n                length = textArea.val().length;\n\n            textArea.closest('li').prev('.fields')\n                .find('.input-text').toggleClass(this.options.requiredEntry, length > 0);\n        }\n    });\n\n    return $.mage.giftOptions;\n});\n","Magento_GiftMessage/js/action/gift-options.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'Magento_GiftMessage/js/model/url-builder',\n    'mage/storage',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Checkout/js/model/error-processor',\n    'mage/url',\n    'Magento_Checkout/js/model/quote',\n    'underscore'\n], function (urlBuilder, storage, messageList, errorProcessor, url, quote, _) {\n    'use strict';\n\n    return function (giftMessage, remove) {\n        var serviceUrl;\n\n        url.setBaseUrl(giftMessage.getConfigValue('baseUrl'));\n\n        if (giftMessage.getConfigValue('isCustomerLoggedIn')) {\n            serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message', {});\n\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\n                serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message/:itemId', {\n                    itemId: giftMessage.itemId\n                });\n            }\n        } else {\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/gift-message', {\n                cartId: quote.getQuoteId()\n            });\n\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\n                serviceUrl = urlBuilder.createUrl(\n                    '/guest-carts/:cartId/gift-message/:itemId',\n                    {\n                        cartId: quote.getQuoteId(), itemId: giftMessage.itemId\n                    }\n                );\n            }\n        }\n        messageList.clear();\n\n        storage.post(\n            serviceUrl,\n            JSON.stringify({\n                'gift_message': giftMessage.getSubmitParams(remove)\n            })\n        ).done(function () {\n            giftMessage.reset();\n            _.each(giftMessage.getAfterSubmitCallbacks(), function (callback) {\n                if (_.isFunction(callback)) {\n                    callback();\n                }\n            });\n        }).fail(function (response) {\n            errorProcessor.process(response);\n        });\n    };\n});\n","Magento_GiftMessage/js/model/gift-message.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'uiElement',\n    'underscore',\n    'mage/url'\n], function (uiElement, _, url) {\n    'use strict';\n\n    var provider = uiElement();\n\n    return function (itemId) {\n        var model = {\n            id: 'message-' + itemId,\n            itemId: itemId,\n            observables: {},\n            additionalOptions: [],\n            submitParams: [\n                'recipient',\n                'sender',\n                'message'\n            ],\n\n            /**\n             * Initialize.\n             */\n            initialize: function () {\n                var message = false;\n\n                this.getObservable('alreadyAdded')(false);\n\n                if (this.itemId == 'orderLevel') { //eslint-disable-line eqeqeq\n                    message = window.giftOptionsConfig.giftMessage.hasOwnProperty(this.itemId) ?\n                        window.giftOptionsConfig.giftMessage[this.itemId] :\n                        null;\n                } else {\n                    message =\n                        window.giftOptionsConfig.giftMessage.hasOwnProperty('itemLevel') &&\n                        window.giftOptionsConfig.giftMessage.itemLevel.hasOwnProperty(this.itemId) ?\n                            window.giftOptionsConfig.giftMessage.itemLevel[this.itemId].message :\n                            null;\n                }\n\n                if (_.isObject(message)) {\n                    this.getObservable('recipient')(message.recipient);\n                    this.getObservable('sender')(message.sender);\n                    this.getObservable('message')(message.message);\n                    this.getObservable('alreadyAdded')(true);\n                }\n            },\n\n            /**\n             * @param {String} key\n             * @return {*}\n             */\n            getObservable: function (key) {\n                this.initObservable(this.id, key);\n\n                return provider[this.getUniqueKey(this.id, key)];\n            },\n\n            /**\n             * @param {String} node\n             * @param {String} key\n             */\n            initObservable: function (node, key) {\n                if (node && !this.observables.hasOwnProperty(node)) {\n                    this.observables[node] = [];\n                }\n\n                if (key && this.observables[node].indexOf(key) === -1) {\n                    this.observables[node].push(key);\n                    provider.observe(this.getUniqueKey(node, key));\n                }\n            },\n\n            /**\n             * @param {String} node\n             * @param {String} key\n             * @return {String}\n             */\n            getUniqueKey: function (node, key) {\n                return node + '-' + key;\n            },\n\n            /**\n             * @param {String} key\n             * @return {null}\n             */\n            getConfigValue: function (key) {\n                return window.giftOptionsConfig.hasOwnProperty(key) ?\n                    window.giftOptionsConfig[key]\n                    : null;\n            },\n\n            /**\n             * Reset.\n             */\n            reset: function () {\n                this.getObservable('isClear')(true);\n            },\n\n            /**\n             * @return {Array}\n             */\n            getAfterSubmitCallbacks: function () {\n                var callbacks = [];\n\n                callbacks.push(this.afterSubmit);\n                _.each(this.additionalOptions, function (option) {\n                    if (_.isFunction(option.afterSubmit)) {\n                        callbacks.push(option.afterSubmit);\n                    }\n                });\n\n                return callbacks;\n            },\n\n            /**\n             * After submit.\n             */\n            afterSubmit: function () {\n                window.location.href = url.build('checkout/cart/updatePost') +\n                    '?form_key=' + window.checkoutConfig.formKey +\n                    '&cart[]';\n            },\n\n            /**\n             * @param {Boolean} remove\n             * @return {Object}\n             */\n            getSubmitParams: function (remove) {\n                var params = {},\n                    self = this;\n\n                _.each(this.submitParams, function (key) {\n                    var observable = provider[self.getUniqueKey(self.id, key)];\n\n                    if (_.isFunction(observable)) {\n                        params[key] = remove ? null : observable();\n                    }\n                });\n\n                if (this.additionalOptions.length) {\n                    params['extension_attributes'] = {};\n                }\n                _.each(this.additionalOptions, function (option) {\n                    if (_.isFunction(option.getSubmitParams)) {\n                        params['extension_attributes'] = _.extend(\n                            params['extension_attributes'],\n                            option.getSubmitParams(remove)\n                        );\n                    }\n                });\n\n                return params;\n            },\n\n            /**\n             * Check if gift message can be displayed\n             *\n             * @returns {Boolean}\n             */\n            isGiftMessageAvailable: function () {\n                var isGloballyAvailable,\n                    giftMessageConfig,\n                    itemConfig;\n\n                // itemId represent gift message level: 'orderLevel' constant or cart item ID\n                if (this.itemId === 'orderLevel') {\n                    return this.getConfigValue('isOrderLevelGiftOptionsEnabled');\n                }\n\n                // gift message product configuration must override system configuration\n                isGloballyAvailable = this.getConfigValue('isItemLevelGiftOptionsEnabled');\n                giftMessageConfig = window.giftOptionsConfig.giftMessage;\n                itemConfig = giftMessageConfig.hasOwnProperty('itemLevel') &&\n                    giftMessageConfig.itemLevel.hasOwnProperty(this.itemId) ?\n                    giftMessageConfig.itemLevel[this.itemId] :\n                    {};\n\n                return itemConfig.hasOwnProperty('is_available') ? itemConfig['is_available'] : isGloballyAvailable;\n            }\n        };\n\n        model.initialize();\n\n        return model;\n    };\n});\n","Magento_GiftMessage/js/model/gift-options.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'underscore',\n    'ko'\n], function (_, ko) {\n    'use strict';\n\n    return {\n        options: ko.observableArray([]),\n\n        /**\n         * @param {Object} option\n         */\n        addOption: function (option) {\n            if (!this.options().hasOwnProperty(option.itemId)) {\n                this.options.push({\n                        id: option.itemId, value: option\n                    }\n                );\n            }\n        },\n\n        /**\n         * @param {*} itemId\n         * @return {*}\n         */\n        getOptionByItemId: function (itemId) {\n            var option = null;\n\n            _.each(this.options(), function (data) {\n                if (data.id === itemId) {\n                    option = data.value;\n\n                    return false;\n                }\n            });\n\n            return option;\n        }\n    };\n});\n","Magento_GiftMessage/js/model/url-builder.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Checkout/js/model/url-builder'\n], function ($, urlBuilder) {\n    'use strict';\n\n    return $.extend(urlBuilder, {\n        storeCode: window.giftOptionsConfig.storeCode\n    });\n});\n","Magento_GiftMessage/js/view/gift-message.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_GiftMessage/js/model/gift-message',\n    'Magento_GiftMessage/js/model/gift-options',\n    'Magento_GiftMessage/js/action/gift-options'\n], function (Component, GiftMessage, giftOptions, giftOptionsService) {\n    'use strict';\n\n    return Component.extend({\n        formBlockVisibility: null,\n        resultBlockVisibility: null,\n        model: {},\n\n        /**\n         * Component init\n         */\n        initialize: function () {\n            var self = this,\n                model;\n\n            this._super()\n                .observe('formBlockVisibility')\n                .observe({\n                    'resultBlockVisibility': false\n                });\n\n            this.itemId = this.itemId || 'orderLevel';\n            model = new GiftMessage(this.itemId);\n            this.model = model;\n            this.isResultBlockVisible();\n            giftOptions.addOption(model);\n\n            this.model.getObservable('isClear').subscribe(function (value) {\n                if (value == true) { //eslint-disable-line eqeqeq\n                    self.formBlockVisibility(false);\n                    self.model.getObservable('alreadyAdded')(true);\n                }\n            });\n        },\n\n        /**\n         * Is reslt block visible\n         */\n        isResultBlockVisible: function () {\n            var self = this;\n\n            if (this.model.getObservable('alreadyAdded')()) {\n                this.resultBlockVisibility(true);\n            }\n            this.model.getObservable('additionalOptionsApplied').subscribe(function (value) {\n                if (value == true) { //eslint-disable-line eqeqeq\n                    self.resultBlockVisibility(true);\n                }\n            });\n        },\n\n        /**\n         * @param {String} key\n         * @return {*}\n         */\n        getObservable: function (key) {\n            return this.model.getObservable(key);\n        },\n\n        /**\n         * Hide\\Show form block\n         */\n        toggleFormBlockVisibility: function () {\n            if (!this.model.getObservable('alreadyAdded')()) {\n                this.formBlockVisibility(!this.formBlockVisibility());\n            } else {\n                this.resultBlockVisibility(!this.resultBlockVisibility());\n            }\n        },\n\n        /**\n         * Edit options\n         */\n        editOptions: function () {\n            this.resultBlockVisibility(false);\n            this.formBlockVisibility(true);\n        },\n\n        /**\n         * Delete options\n         */\n        deleteOptions: function () {\n            giftOptionsService(this.model, true);\n        },\n\n        /**\n         * Hide form block\n         */\n        hideFormBlock: function () {\n            this.formBlockVisibility(false);\n\n            if (this.model.getObservable('alreadyAdded')()) {\n                this.resultBlockVisibility(true);\n            }\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        hasActiveOptions: function () {\n            var regionData = this.getRegion('additionalOptions'),\n                options = regionData(),\n                i;\n\n            for (i = 0; i < options.length; i++) {\n                if (options[i].isActive()) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        isActive: function () {\n            return this.model.isGiftMessageAvailable();\n        },\n\n        /**\n         * Submit options\n         */\n        submitOptions: function () {\n            giftOptionsService(this.model);\n        }\n    });\n});\n"}
}});
